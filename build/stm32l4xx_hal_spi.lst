ARM GAS  /tmp/ccNgnWxc.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"stm32l4xx_hal_spi.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.SPI_WaitFlagStateUntilTimeout,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	SPI_WaitFlagStateUntilTimeout:
  25              	.LFB179:
  26              		.file 1 "Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c"
   1:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
   2:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   ******************************************************************************
   3:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @file    stm32l4xx_hal_spi.c
   4:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @author  MCD Application Team
   5:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @version V1.7.2
   6:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @date    16-June-2017
   7:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief   SPI HAL module driver.
   8:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *          This file provides firmware functions to manage the following
   9:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *          functionalities of the Serial Peripheral Interface (SPI) peripheral:
  10:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *           + Initialization and de-initialization functions
  11:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *           + IO operation functions
  12:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *           + Peripheral Control functions
  13:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *           + Peripheral State functions
  14:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *
  15:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   @verbatim
  16:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   ==============================================================================
  17:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                         ##### How to use this driver #####
  18:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   ==============================================================================
  19:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     [..]
  20:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       The SPI HAL driver can be used as follows:
  21:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
  22:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       (#) Declare a SPI_HandleTypeDef handle structure, for example:
  23:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           SPI_HandleTypeDef  hspi;
  24:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
  25:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       (#)Initialize the SPI low level resources by implementing the HAL_SPI_MspInit() API:
  26:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           (##) Enable the SPIx interface clock
  27:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           (##) SPI pins configuration
  28:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****               (+++) Enable the clock for the SPI GPIOs
  29:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****               (+++) Configure these SPI pins as alternate function push-pull
  30:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           (##) NVIC configuration if you need to use interrupt process
  31:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****               (+++) Configure the SPIx interrupt priority
  32:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****               (+++) Enable the NVIC SPI IRQ handle
ARM GAS  /tmp/ccNgnWxc.s 			page 2


  33:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           (##) DMA Configuration if you need to use DMA process
  34:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****               (+++) Declare a DMA_HandleTypeDef handle structure for the transmit or receive Stream
  35:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****               (+++) Enable the DMAx clock
  36:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****               (+++) Configure the DMA handle parameters
  37:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****               (+++) Configure the DMA Tx or Rx Stream/Channel
  38:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****               (+++) Associate the initialized hdma_tx handle to the hspi DMA Tx or Rx handle
  39:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****               (+++) Configure the priority and enable the NVIC for the transfer complete interrupt 
  40:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
  41:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       (#) Program the Mode, BidirectionalMode , Data size, Baudrate Prescaler, NSS
  42:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           management, Clock polarity and phase, FirstBit and CRC configuration in the hspi Init str
  43:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
  44:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       (#) Initialize the SPI registers by calling the HAL_SPI_Init() API:
  45:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           (++) This API configures also the low level Hardware GPIO, CLOCK, CORTEX...etc)
  46:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****               by calling the customized HAL_SPI_MspInit() API.
  47:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****      [..]
  48:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        Circular mode restriction:
  49:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       (#) The DMA circular mode cannot be used when the SPI is configured in these modes:
  50:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           (##) Master 2Lines RxOnly
  51:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           (##) Master 1Line Rx
  52:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       (#) The CRC feature is not managed when the DMA circular mode is enabled
  53:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       (#) When the SPI DMA Pause/Stop features are used, we must use the following APIs
  54:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           the HAL_SPI_DMAPause()/ HAL_SPI_DMAStop() only under the SPI callbacks
  55:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****      [..]
  56:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        Master Receive mode restriction:
  57:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       (#) In Master unidirectional receive-only mode (MSTR =1, BIDIMODE=0, RXONLY=0) or
  58:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           bidirectional receive mode (MSTR=1, BIDIMODE=1, BIDIOE=0), to ensure that the SPI
  59:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           does not initiate a new transfer the following procedure has to be respected:
  60:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           (##) HAL_SPI_DeInit()
  61:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           (##) HAL_SPI_Init()
  62:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****      [..]
  63:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        The HAL drivers do not allow reaching all supported SPI frequencies in the different SPI
  64:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        modes. Refer to the source code (stm32xxxx_hal_spi.c header) to get a summary of the
  65:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        maximum SPI frequency that can be reached with a data size of 8 or 16 bits, depending on
  66:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        the APBx peripheral clock frequency (fPCLK) used by the SPI instance.
  67:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****      
  68:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
  69:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   @endverbatim
  70:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
  71:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   Additional table :
  72:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
  73:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        DataSize = SPI_DATASIZE_8BIT:
  74:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        +-------------------------------------------------------------------------------------------
  75:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |                | 2Lines Fullduplex   |     2Lines RxOnly    |         1Line     
  76:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        | Process | Tranfert mode  |---------------------|----------------------|-------------------
  77:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |                |  Master  |  Slave   |  Master   |  Slave   |  Master   |  Slave
  78:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |===========================================================================================
  79:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    T    |     Polling    | Fpclk/4  | Fpclk/8  |    NA     |    NA    |    NA     |   NA  
  80:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    X    |----------------|----------|----------|-----------|----------|-----------|-------
  81:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    /    |     Interrupt  | Fpclk/4  | Fpclk/16 |    NA     |    NA    |    NA     |   NA  
  82:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    R    |----------------|----------|----------|-----------|----------|-----------|-------
  83:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    X    |       DMA      | Fpclk/2  | Fpclk/2  |    NA     |    NA    |    NA     |   NA  
  84:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |=========|================|==========|==========|===========|==========|===========|=======
  85:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |     Polling    | Fpclk/4  | Fpclk/8  | Fpclk/16  | Fpclk/8  | Fpclk/8   | Fpclk/
  86:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |----------------|----------|----------|-----------|----------|-----------|-------
  87:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    R    |     Interrupt  | Fpclk/8  | Fpclk/16 | Fpclk/8   | Fpclk/8  | Fpclk/8   | Fpclk/
  88:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    X    |----------------|----------|----------|-----------|----------|-----------|-------
  89:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |       DMA      | Fpclk/4  | Fpclk/2  | Fpclk/2   | Fpclk/16 | Fpclk/2   | Fpclk/
ARM GAS  /tmp/ccNgnWxc.s 			page 3


  90:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |=========|================|==========|==========|===========|==========|===========|=======
  91:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |     Polling    | Fpclk/8  | Fpclk/2  |     NA    |    NA    | Fpclk/8   | Fpclk/
  92:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |----------------|----------|----------|-----------|----------|-----------|-------
  93:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    T    |     Interrupt  | Fpclk/2  | Fpclk/4  |     NA    |    NA    | Fpclk/16  | Fpclk/
  94:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    X    |----------------|----------|----------|-----------|----------|-----------|-------
  95:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |       DMA      | Fpclk/2  | Fpclk/2  |     NA    |    NA    | Fpclk/8   | Fpclk/
  96:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        +-------------------------------------------------------------------------------------------
  97:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
  98:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        DataSize = SPI_DATASIZE_16BIT:
  99:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        +-------------------------------------------------------------------------------------------
 100:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |                | 2Lines Fullduplex   |     2Lines RxOnly    |         1Line     
 101:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        | Process | Tranfert mode  |---------------------|----------------------|-------------------
 102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |                |  Master  |  Slave   |  Master   |  Slave   |  Master   |  Slave
 103:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |===========================================================================================
 104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    T    |     Polling    | Fpclk/4  | Fpclk/8  |    NA     |    NA    |    NA     |   NA  
 105:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    X    |----------------|----------|----------|-----------|----------|-----------|-------
 106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    /    |     Interrupt  | Fpclk/4  | Fpclk/16 |    NA     |    NA    |    NA     |   NA  
 107:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    R    |----------------|----------|----------|-----------|----------|-----------|-------
 108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    X    |       DMA      | Fpclk/2  | Fpclk/2  |    NA     |    NA    |    NA     |   NA  
 109:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |=========|================|==========|==========|===========|==========|===========|=======
 110:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |     Polling    | Fpclk/4  | Fpclk/8  | Fpclk/16  | Fpclk/8  | Fpclk/8   | Fpclk/
 111:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |----------------|----------|----------|-----------|----------|-----------|-------
 112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    R    |     Interrupt  | Fpclk/8  | Fpclk/16 | Fpclk/8   | Fpclk/8  | Fpclk/8   | Fpclk/
 113:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    X    |----------------|----------|----------|-----------|----------|-----------|-------
 114:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |       DMA      | Fpclk/4  | Fpclk/2  | Fpclk/2   | Fpclk/16 | Fpclk/2   | Fpclk/
 115:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |=========|================|==========|==========|===========|==========|===========|=======
 116:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |     Polling    | Fpclk/8  | Fpclk/2  |     NA    |    NA    | Fpclk/8   | Fpclk/
 117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |----------------|----------|----------|-----------|----------|-----------|-------
 118:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    T    |     Interrupt  | Fpclk/2  | Fpclk/4  |     NA    |    NA    | Fpclk/16  | Fpclk/
 119:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |    X    |----------------|----------|----------|-----------|----------|-----------|-------
 120:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        |         |       DMA      | Fpclk/2  | Fpclk/2  |     NA    |    NA    | Fpclk/8   | Fpclk/
 121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        +-------------------------------------------------------------------------------------------
 122:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        @note The max SPI frequency depend on SPI data size (4bits, 5bits,..., 8bits,...15bits, 16bi
 123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****              SPI mode(2 Lines fullduplex, 2 lines RxOnly, 1 line TX/RX) and Process mode (Polling, 
 124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        @note
 125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             (#) TX/RX processes are HAL_SPI_TransmitReceive(), HAL_SPI_TransmitReceive_IT() and HAL
 126:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             (#) RX processes are HAL_SPI_Receive(), HAL_SPI_Receive_IT() and HAL_SPI_Receive_DMA()
 127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             (#) TX processes are HAL_SPI_Transmit(), HAL_SPI_Transmit_IT() and HAL_SPI_Transmit_DMA
 128:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   ******************************************************************************
 130:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @attention
 131:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *
 132:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * <h2><center>&copy; COPYRIGHT(c) 2017 STMicroelectronics</center></h2>
 133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *
 134:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * Redistribution and use in source and binary forms, with or without modification,
 135:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * are permitted provided that the following conditions are met:
 136:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *   1. Redistributions of source code must retain the above copyright notice,
 137:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *      this list of conditions and the following disclaimer.
 138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *   2. Redistributions in binary form must reproduce the above copyright notice,
 139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *      this list of conditions and the following disclaimer in the documentation
 140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *      and/or other materials provided with the distribution.
 141:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *   3. Neither the name of STMicroelectronics nor the names of its contributors
 142:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *      may be used to endorse or promote products derived from this software
 143:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *      without specific prior written permission.
 144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *
 145:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
ARM GAS  /tmp/ccNgnWxc.s 			page 4


 147:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 149:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 150:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 151:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 153:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 155:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *
 156:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   ******************************************************************************
 157:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 159:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /* Includes ------------------------------------------------------------------*/
 160:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #include "stm32l4xx_hal.h"
 161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 162:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /** @addtogroup STM32L4xx_HAL_Driver
 163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @{
 164:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 165:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 166:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /** @defgroup SPI SPI
 167:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief SPI HAL module driver
 168:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @{
 169:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 170:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #ifdef HAL_SPI_MODULE_ENABLED
 171:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 172:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /* Private typedef -----------------------------------------------------------*/
 173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /* Private defines -----------------------------------------------------------*/
 174:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /** @defgroup SPI_Private_Constants SPI Private Constants
 175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @{
 176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #define SPI_DEFAULT_TIMEOUT 100U
 178:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
 179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @}
 180:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 181:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 182:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /* Private macros ------------------------------------------------------------*/
 183:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /* Private variables ---------------------------------------------------------*/
 184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /* Private function prototypes -----------------------------------------------*/
 185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /** @defgroup SPI_Private_Functions SPI Private Functions
 186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @{
 187:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 188:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMATransmitCplt(DMA_HandleTypeDef *hdma);
 189:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMAReceiveCplt(DMA_HandleTypeDef *hdma);
 190:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMATransmitReceiveCplt(DMA_HandleTypeDef *hdma);
 191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMAHalfTransmitCplt(DMA_HandleTypeDef *hdma);
 192:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMAHalfReceiveCplt(DMA_HandleTypeDef *hdma);
 193:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMAHalfTransmitReceiveCplt(DMA_HandleTypeDef *hdma);
 194:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMAError(DMA_HandleTypeDef *hdma);
 195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMAAbortOnError(DMA_HandleTypeDef *hdma);
 196:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMATxAbortCallback(DMA_HandleTypeDef *hdma);
 197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMARxAbortCallback(DMA_HandleTypeDef *hdma);
 198:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static HAL_StatusTypeDef SPI_WaitFlagStateUntilTimeout(SPI_HandleTypeDef *hspi, uint32_t Flag, uint
 199:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                        uint32_t Timeout, uint32_t Tickstart);
 200:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static HAL_StatusTypeDef SPI_WaitFifoStateUntilTimeout(SPI_HandleTypeDef *hspi, uint32_t Fifo, uint
 201:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                        uint32_t Timeout, uint32_t Tickstart);
 202:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_TxISR_8BIT(struct __SPI_HandleTypeDef *hspi);
 203:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_TxISR_16BIT(struct __SPI_HandleTypeDef *hspi);
ARM GAS  /tmp/ccNgnWxc.s 			page 5


 204:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_RxISR_8BIT(struct __SPI_HandleTypeDef *hspi);
 205:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_RxISR_16BIT(struct __SPI_HandleTypeDef *hspi);
 206:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_2linesRxISR_8BIT(struct __SPI_HandleTypeDef *hspi);
 207:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_2linesTxISR_8BIT(struct __SPI_HandleTypeDef *hspi);
 208:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_2linesTxISR_16BIT(struct __SPI_HandleTypeDef *hspi);
 209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_2linesRxISR_16BIT(struct __SPI_HandleTypeDef *hspi);
 210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 211:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_RxISR_8BITCRC(struct __SPI_HandleTypeDef *hspi);
 212:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_RxISR_16BITCRC(struct __SPI_HandleTypeDef *hspi);
 213:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_2linesRxISR_8BITCRC(struct __SPI_HandleTypeDef *hspi);
 214:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_2linesRxISR_16BITCRC(struct __SPI_HandleTypeDef *hspi);
 215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 216:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_AbortRx_ISR(SPI_HandleTypeDef *hspi);
 217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_AbortTx_ISR(SPI_HandleTypeDef *hspi);
 218:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_CloseRxTx_ISR(SPI_HandleTypeDef *hspi);
 219:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_CloseRx_ISR(SPI_HandleTypeDef *hspi);
 220:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_CloseTx_ISR(SPI_HandleTypeDef *hspi);
 221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static HAL_StatusTypeDef SPI_EndRxTransaction(SPI_HandleTypeDef *hspi, uint32_t Timeout, uint32_t T
 222:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static HAL_StatusTypeDef SPI_EndRxTxTransaction(SPI_HandleTypeDef *hspi, uint32_t Timeout, uint32_t
 223:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
 224:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @}
 225:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 226:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 227:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /* Exported functions --------------------------------------------------------*/
 228:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /** @defgroup SPI_Exported_Functions SPI Exported Functions
 229:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @{
 230:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 231:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 232:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /** @defgroup SPI_Exported_Functions_Group1 Initialization and de-initialization functions
 233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****  *  @brief    Initialization and Configuration functions
 234:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****  *
 235:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** @verbatim
 236:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****  ===============================================================================
 237:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****               ##### Initialization and de-initialization functions #####
 238:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****  ===============================================================================
 239:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     [..]  This subsection provides a set of functions allowing to initialize and
 240:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           de-initialize the SPIx peripheral:
 241:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 242:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       (+) User must implement HAL_SPI_MspInit() function in which he configures
 243:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           all related peripherals resources (CLOCK, GPIO, DMA, IT and NVIC ).
 244:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 245:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       (+) Call the function HAL_SPI_Init() to configure the selected device with
 246:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           the selected configuration:
 247:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         (++) Mode
 248:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         (++) Direction
 249:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         (++) Data Size
 250:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         (++) Clock Polarity and Phase
 251:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         (++) NSS Management
 252:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         (++) BaudRate Prescaler
 253:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         (++) FirstBit
 254:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         (++) TIMode
 255:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         (++) CRC Calculation
 256:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         (++) CRC Polynomial if CRC enabled
 257:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         (++) CRC Length, used only with Data8 and Data16
 258:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         (++) FIFO reception threshold
 259:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 260:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       (+) Call the function HAL_SPI_DeInit() to restore the default configuration
ARM GAS  /tmp/ccNgnWxc.s 			page 6


 261:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           of the selected SPIx peripheral.
 262:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 263:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** @endverbatim
 264:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @{
 265:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 266:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 267:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
 268:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Initialize the SPI according to the specified parameters
 269:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *         in the SPI_InitTypeDef and initialize the associated handle.
 270:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 271:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
 272:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
 273:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Init(SPI_HandleTypeDef *hspi)
 275:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
 276:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t frxth;
 277:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 278:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check the SPI handle allocation */
 279:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi == NULL)
 280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 281:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return HAL_ERROR;
 282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 283:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 284:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check the parameters */
 285:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_ALL_INSTANCE(hspi->Instance));
 286:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_MODE(hspi->Init.Mode));
 287:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION(hspi->Init.Direction));
 288:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_DATASIZE(hspi->Init.DataSize));
 289:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_NSS(hspi->Init.NSS));
 290:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_NSSP(hspi->Init.NSSPMode));
 291:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_BAUDRATE_PRESCALER(hspi->Init.BaudRatePrescaler));
 292:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_FIRST_BIT(hspi->Init.FirstBit));
 293:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_TIMODE(hspi->Init.TIMode));
 294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.TIMode == SPI_TIMODE_DISABLE)
 295:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 296:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     assert_param(IS_SPI_CPOL(hspi->Init.CLKPolarity));
 297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     assert_param(IS_SPI_CPHA(hspi->Init.CLKPhase));
 298:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 299:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_CRC_CALCULATION(hspi->Init.CRCCalculation));
 301:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 302:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 303:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     assert_param(IS_SPI_CRC_POLYNOMIAL(hspi->Init.CRCPolynomial));
 304:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     assert_param(IS_SPI_CRC_LENGTH(hspi->Init.CRCLength));
 305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 306:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #else
 307:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 308:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 309:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 310:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->State == HAL_SPI_STATE_RESET)
 311:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 312:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Allocate lock resource and initialize it */
 313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->Lock = HAL_UNLOCKED;
 314:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 315:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Init the low level hardware : GPIO, CLOCK, NVIC... */
 316:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     HAL_SPI_MspInit(hspi);
 317:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
ARM GAS  /tmp/ccNgnWxc.s 			page 7


 318:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 319:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_BUSY;
 320:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 321:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable the selected SPI peripheral */
 322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_DISABLE(hspi);
 323:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 324:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Align by default the rs fifo threshold on the data size */
 325:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.DataSize > SPI_DATASIZE_8BIT)
 326:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     frxth = SPI_RXFIFO_THRESHOLD_HF;
 328:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 329:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
 330:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     frxth = SPI_RXFIFO_THRESHOLD_QF;
 332:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 333:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 334:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* CRC calculation is valid only for 16Bit and 8 Bit */
 335:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Init.DataSize != SPI_DATASIZE_16BIT) && (hspi->Init.DataSize != SPI_DATASIZE_8BIT))
 336:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 337:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* CRC must be disabled */
 338:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 339:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 340:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 341:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Align the CRC Length on the data size */
 342:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCLength == SPI_CRC_LENGTH_DATASIZE)
 343:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 344:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* CRC Length aligned on the data size : value set by default */
 345:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.DataSize > SPI_DATASIZE_8BIT)
 346:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 347:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->Init.CRCLength = SPI_CRC_LENGTH_16BIT;
 348:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 349:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     else
 350:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->Init.CRCLength = SPI_CRC_LENGTH_8BIT;
 352:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 353:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 354:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 355:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /*----------------------- SPIx CR1 & CR2 Configuration ---------------------*/
 356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Configure : SPI Mode, Communication Mode, Clock polarity and phase, NSS management,
 357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   Communication speed, First bit and CRC calculation state */
 358:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   WRITE_REG(hspi->Instance->CR1, (hspi->Init.Mode | hspi->Init.Direction |
 359:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                   hspi->Init.CLKPolarity | hspi->Init.CLKPhase | (hspi->Init.NSS & 
 360:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                   hspi->Init.BaudRatePrescaler | hspi->Init.FirstBit  | hspi->Init.
 361:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 362:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Configure : CRC Length */
 363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCLength == SPI_CRC_LENGTH_16BIT)
 364:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 365:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->Instance->CR1 |= SPI_CR1_CRCL;
 366:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 367:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 368:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 369:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Configure : NSS management, TI Mode, NSS Pulse, Data size and Rx Fifo Threshold */
 370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   WRITE_REG(hspi->Instance->CR2, (((hspi->Init.NSS >> 16U) & SPI_CR2_SSOE) | hspi->Init.TIMode |
 371:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                   hspi->Init.NSSPMode | hspi->Init.DataSize) | frxth);
 372:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 373:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 374:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /*---------------------------- SPIx CRCPOLY Configuration ------------------*/
ARM GAS  /tmp/ccNgnWxc.s 			page 8


 375:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Configure : CRC Polynomial */
 376:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 377:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 378:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     WRITE_REG(hspi->Instance->CRCPR, hspi->Init.CRCPolynomial);
 379:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 380:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 381:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 382:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if defined(SPI_I2SCFGR_I2SMOD)
 383:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Activate the SPI mode (Make sure that I2SMOD bit in I2SCFGR register is reset) */
 384:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->I2SCFGR, SPI_I2SCFGR_I2SMOD);
 385:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* SPI_I2SCFGR_I2SMOD */
 386:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode = HAL_SPI_ERROR_NONE;
 388:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State     = HAL_SPI_STATE_READY;
 389:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 390:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return HAL_OK;
 391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 392:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 393:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
 394:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  De-Initialize the SPI peripheral.
 395:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 396:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
 397:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
 398:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 399:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_DeInit(SPI_HandleTypeDef *hspi)
 400:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
 401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check the SPI handle allocation */
 402:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi == NULL)
 403:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 404:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return HAL_ERROR;
 405:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 406:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 407:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check SPI Instance parameter */
 408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_ALL_INSTANCE(hspi->Instance));
 409:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_BUSY;
 411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 412:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable the SPI Peripheral Clock */
 413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_DISABLE(hspi);
 414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 415:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* DeInit the low level hardware: GPIO, CLOCK, NVIC... */
 416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_SPI_MspDeInit(hspi);
 417:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 418:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode = HAL_SPI_ERROR_NONE;
 419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_RESET;
 420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 421:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Release Lock */
 422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
 423:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 424:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return HAL_OK;
 425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 426:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 427:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
 428:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Initialize the SPI MSP.
 429:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 430:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
 431:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
ARM GAS  /tmp/ccNgnWxc.s 			page 9


 432:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 433:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** __weak void HAL_SPI_MspInit(SPI_HandleTypeDef *hspi)
 434:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
 435:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 436:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(hspi);
 437:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 438:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
 439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             the HAL_SPI_MspInit should be implemented in the user file
 440:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****    */
 441:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 442:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 443:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
 444:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  De-Initialize the SPI MSP.
 445:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 446:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
 447:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
 448:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 449:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** __weak void HAL_SPI_MspDeInit(SPI_HandleTypeDef *hspi)
 450:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
 451:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 452:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(hspi);
 453:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 454:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
 455:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             the HAL_SPI_MspDeInit should be implemented in the user file
 456:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****    */
 457:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 458:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 459:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
 460:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @}
 461:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 463:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /** @defgroup SPI_Exported_Functions_Group2 IO operation functions
 464:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****  *  @brief   Data transfers functions
 465:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****  *
 466:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** @verbatim
 467:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   ==============================================================================
 468:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                       ##### IO operation functions #####
 469:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****  ===============================================================================
 470:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****  [..]
 471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     This subsection provides a set of functions allowing to manage the SPI
 472:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     data transfers.
 473:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 474:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     [..] The SPI supports master and slave mode :
 475:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 476:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     (#) There are two modes of transfer:
 477:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        (++) Blocking mode: The communication is performed in polling mode.
 478:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             The HAL status of all data processing is returned by the same function
 479:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             after finishing transfer.
 480:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        (++) No-Blocking mode: The communication is performed using Interrupts
 481:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             or DMA, These APIs return the HAL status.
 482:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             The end of the data processing will be indicated through the
 483:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             dedicated SPI IRQ when using Interrupt mode or the DMA IRQ when
 484:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             using DMA mode.
 485:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             The HAL_SPI_TxCpltCallback(), HAL_SPI_RxCpltCallback() and HAL_SPI_TxRxCpltCallback() u
 486:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             will be executed respectively at the end of the transmit or Receive process
 487:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             The HAL_SPI_ErrorCallback()user callback will be executed when a communication error is
 488:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
ARM GAS  /tmp/ccNgnWxc.s 			page 10


 489:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     (#) APIs provided for these 2 transfer modes (Blocking mode or Non blocking mode using either I
 490:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         exist for 1Line (simplex) and 2Lines (full duplex) modes.
 491:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 492:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** @endverbatim
 493:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @{
 494:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 495:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 496:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
 497:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Transmit an amount of data in blocking mode.
 498:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 499:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
 500:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  pData: pointer to data buffer
 501:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Size: amount of data to be sent
 502:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Timeout: Timeout duration
 503:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
 504:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 505:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Transmit(SPI_HandleTypeDef *hspi, uint8_t *pData, uint16_t Size, uint32_t
 506:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
 507:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
 508:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 509:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 510:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 511:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check Direction parameter */
 512:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION_2LINES_OR_1LINE(hspi->Init.Direction));
 513:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 514:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Locked */
 515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_LOCK(hspi);
 516:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Init tickstart for timeout management*/
 518:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tickstart = HAL_GetTick();
 519:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 520:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->State != HAL_SPI_STATE_READY)
 521:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 522:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_BUSY;
 523:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 524:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 525:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((pData == NULL) || (Size == 0U))
 527:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 528:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
 529:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 530:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 531:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 532:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the transaction information */
 533:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State       = HAL_SPI_STATE_BUSY_TX;
 534:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
 536:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 537:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = Size;
 538:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 539:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /*Init field not used in handle to zero */
 540:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)NULL;
 541:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = 0U;
 542:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = 0U;
 543:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
 544:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxISR       = NULL;
 545:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
ARM GAS  /tmp/ccNgnWxc.s 			page 11


 546:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Configure communication direction : 1Line */
 547:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.Direction == SPI_DIRECTION_1LINE)
 548:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_1LINE_TX(hspi);
 550:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 551:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 552:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Reset CRC Calculation */
 554:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 555:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 556:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
 557:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 558:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 559:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if the SPI is already enabled */
 561:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Instance->CR1 & SPI_CR1_SPE) != SPI_CR1_SPE)
 562:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Enable SPI peripheral */
 564:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
 565:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 566:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 567:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Transmit data in 16 Bit mode */
 568:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.DataSize > SPI_DATASIZE_8BIT)
 569:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if ((hspi->Init.Mode == SPI_MODE_SLAVE) || (hspi->TxXferCount == 0x01U))
 571:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 572:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->Instance->DR = *((uint16_t *)pData);
 573:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       pData += sizeof(uint16_t);
 574:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->TxXferCount--;
 575:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 576:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Transmit data in 16 Bit mode */
 577:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     while (hspi->TxXferCount > 0U)
 578:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 579:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Wait until TXE flag is set to send data */
 580:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_TXE))
 581:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 582:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->Instance->DR = *((uint16_t *)pData);
 583:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pData += sizeof(uint16_t);
 584:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount--;
 585:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 586:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
 587:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 588:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Timeout management */
 589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if ((Timeout == 0U) || ((Timeout != HAL_MAX_DELAY) && ((HAL_GetTick() - tickstart) >=  Time
 590:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           errorcode = HAL_TIMEOUT;
 592:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 593:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 594:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 595:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 596:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 597:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Transmit data in 8 Bit mode */
 598:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
 599:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if ((hspi->Init.Mode == SPI_MODE_SLAVE) || (hspi->TxXferCount == 0x01U))
 601:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (hspi->TxXferCount > 1U)
ARM GAS  /tmp/ccNgnWxc.s 			page 12


 603:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 604:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* write on the data register in packing mode */
 605:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->Instance->DR = *((uint16_t *)pData);
 606:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pData += sizeof(uint16_t);
 607:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount -= 2U;
 608:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 609:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
 610:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 611:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         *((__IO uint8_t *)&hspi->Instance->DR) = (*pData++);
 612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount--;
 613:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 614:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 615:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     while (hspi->TxXferCount > 0U)
 616:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 617:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Wait until TXE flag is set to send data */
 618:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_TXE))
 619:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 620:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if (hspi->TxXferCount > 1U)
 621:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 622:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           /* write on the data register in packing mode */
 623:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->Instance->DR = *((uint16_t *)pData);
 624:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           pData += sizeof(uint16_t);
 625:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->TxXferCount -= 2U;
 626:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 627:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         else
 628:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           *((__IO uint8_t *)&hspi->Instance->DR) = (*pData++);
 630:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->TxXferCount--;
 631:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 632:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 633:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
 634:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 635:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Timeout management */
 636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if ((Timeout == 0U) || ((Timeout != HAL_MAX_DELAY) && ((HAL_GetTick() - tickstart) >=  Time
 637:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           errorcode = HAL_TIMEOUT;
 639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 640:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 641:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 642:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 643:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 644:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 645:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable CRC Transmission */
 646:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 647:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 648:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
 649:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 650:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 651:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 652:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check the end of the transaction */
 653:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_EndRxTxTransaction(hspi, Timeout, tickstart) != HAL_OK)
 654:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 655:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_FLAG;
 656:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 657:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 658:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Clear overrun flag in 2 Lines communication mode because received is not read */
 659:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.Direction == SPI_DIRECTION_2LINES)
ARM GAS  /tmp/ccNgnWxc.s 			page 13


 660:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 661:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_CLEAR_OVRFLAG(hspi);
 662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 663:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 664:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->ErrorCode != HAL_SPI_ERROR_NONE)
 665:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 666:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
 667:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 668:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 669:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** error:
 670:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
 671:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Unlocked */
 672:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
 673:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
 674:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 675:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 676:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
 677:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Receive an amount of data in blocking mode.
 678:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 679:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
 680:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  pData: pointer to data buffer
 681:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Size: amount of data to be received
 682:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Timeout: Timeout duration
 683:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
 684:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 685:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Receive(SPI_HandleTypeDef *hspi, uint8_t *pData, uint16_t Size, uint32_t 
 686:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
 687:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 688:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint16_t tmpreg = 0U;
 689:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 690:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
 691:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 692:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
 693:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 694:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Init.Mode == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES))
 695:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 696:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_BUSY_RX;
 697:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line 
 698:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return HAL_SPI_TransmitReceive(hspi, pData, pData, Size, Timeout);
 699:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 700:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 701:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Locked */
 702:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_LOCK(hspi);
 703:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 704:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Init tickstart for timeout management*/
 705:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tickstart = HAL_GetTick();
 706:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 707:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->State != HAL_SPI_STATE_READY)
 708:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 709:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_BUSY;
 710:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 711:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 712:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((pData == NULL) || (Size == 0U))
 714:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 715:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
 716:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
ARM GAS  /tmp/ccNgnWxc.s 			page 14


 717:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 718:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 719:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the transaction information */
 720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State       = HAL_SPI_STATE_BUSY_RX;
 721:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 722:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
 723:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 724:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = Size;
 725:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 726:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /*Init field not used in handle to zero */
 727:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)NULL;
 728:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = 0U;
 729:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 730:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxISR       = NULL;
 731:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
 732:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 733:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 734:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Reset CRC Calculation */
 735:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 736:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 737:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
 738:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* this is done to handle the CRCNEXT before the latest data */
 739:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxXferCount--;
 740:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 741:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 742:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 743:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the Rx Fifo threshold */
 744:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.DataSize > SPI_DATASIZE_8BIT)
 745:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 746:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* set fiforxthresold according the reception data length: 16bit */
 747:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     CLEAR_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
 748:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 749:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
 750:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 751:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* set fiforxthresold according the reception data length: 8bit */
 752:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
 753:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 754:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 755:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Configure communication direction: 1Line */
 756:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.Direction == SPI_DIRECTION_1LINE)
 757:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 758:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_1LINE_RX(hspi);
 759:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 760:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 761:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if the SPI is already enabled */
 762:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Instance->CR1 & SPI_CR1_SPE) != SPI_CR1_SPE)
 763:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 764:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Enable SPI peripheral */
 765:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
 766:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 767:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Receive data in 8 Bit mode */
 769:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.DataSize <= SPI_DATASIZE_8BIT)
 770:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 771:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Transfer loop */
 772:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     while (hspi->RxXferCount > 0U)
 773:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
ARM GAS  /tmp/ccNgnWxc.s 			page 15


 774:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Check the RXNE flag */
 775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_RXNE))
 776:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 777:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* read the received data */
 778:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         (* (uint8_t *)pData) = *(__IO uint8_t *)&hspi->Instance->DR;
 779:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pData += sizeof(uint8_t);
 780:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->RxXferCount--;
 781:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 782:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
 783:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 784:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Timeout management */
 785:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if ((Timeout == 0U) || ((Timeout != HAL_MAX_DELAY) && ((HAL_GetTick() - tickstart) >=  Time
 786:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 787:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           errorcode = HAL_TIMEOUT;
 788:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 789:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 790:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 791:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 792:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 793:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
 794:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 795:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Transfer loop */
 796:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     while (hspi->RxXferCount > 0U)
 797:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 798:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Check the RXNE flag */
 799:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_RXNE))
 800:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 801:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         *((uint16_t *)pData) = hspi->Instance->DR;
 802:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pData += sizeof(uint16_t);
 803:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->RxXferCount--;
 804:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 805:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
 806:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 807:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Timeout management */
 808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if ((Timeout == 0U) || ((Timeout != HAL_MAX_DELAY) && ((HAL_GetTick() - tickstart) >=  Time
 809:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           errorcode = HAL_TIMEOUT;
 811:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 812:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 813:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 814:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 815:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 816:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 817:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 818:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Handle the CRC Transmission */
 819:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 820:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 821:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* freeze the CRC before the latest data */
 822:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
 823:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 824:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Read the latest data */
 825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_RXNE, SET, Timeout, tickstart) != HAL_OK)
 826:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 827:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* the latest data has not been received */
 828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       errorcode = HAL_TIMEOUT;
 829:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       goto error;
 830:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
ARM GAS  /tmp/ccNgnWxc.s 			page 16


 831:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 832:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Receive last data in 16 Bit mode */
 833:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.DataSize > SPI_DATASIZE_8BIT)
 834:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 835:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       *((uint16_t *)pData) = hspi->Instance->DR;
 836:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 837:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Receive last data in 8 Bit mode */
 838:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     else
 839:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 840:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       (*(uint8_t *)pData) = *(__IO uint8_t *)&hspi->Instance->DR;
 841:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 842:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 843:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Wait the CRC data */
 844:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_RXNE, SET, Timeout, tickstart) != HAL_OK)
 845:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 846:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
 847:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       errorcode = HAL_TIMEOUT;
 848:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       goto error;
 849:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 850:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 851:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Read CRC to Flush DR and RXNE flag */
 852:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.DataSize == SPI_DATASIZE_16BIT)
 853:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 854:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       tmpreg = hspi->Instance->DR;
 855:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* To avoid GCC warning */
 856:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       UNUSED(tmpreg);
 857:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 858:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     else
 859:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 860:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       tmpreg = *(__IO uint8_t *)&hspi->Instance->DR;
 861:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* To avoid GCC warning */
 862:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       UNUSED(tmpreg);
 863:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 864:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if ((hspi->Init.DataSize == SPI_DATASIZE_8BIT) && (hspi->Init.CRCLength == SPI_CRC_LENGTH_16B
 865:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 866:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if (SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_RXNE, SPI_FLAG_RXNE, Timeout, tickstart) !
 867:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 868:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           /* Error on the CRC reception */
 869:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
 870:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           errorcode = HAL_TIMEOUT;
 871:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 872:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 873:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         tmpreg = *(__IO uint8_t *)&hspi->Instance->DR;
 874:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* To avoid GCC warning */
 875:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         UNUSED(tmpreg);
 876:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 877:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 878:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 879:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 880:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 881:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check the end of the transaction */
 882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_EndRxTransaction(hspi, Timeout, tickstart) != HAL_OK)
 883:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 884:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_FLAG;
 885:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 886:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 887:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
ARM GAS  /tmp/ccNgnWxc.s 			page 17


 888:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if CRC error occurred */
 889:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_CRCERR))
 890:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 891:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
 892:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
 893:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 894:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 895:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 896:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->ErrorCode != HAL_SPI_ERROR_NONE)
 897:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 898:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
 899:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 900:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 901:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** error :
 902:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
 903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
 904:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
 905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 906:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 907:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
 908:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Transmit and Receive an amount of data in blocking mode.
 909:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 910:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
 911:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  pTxData: pointer to transmission data buffer
 912:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  pRxData: pointer to reception data buffer
 913:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Size: amount of data to be sent and received
 914:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Timeout: Timeout duration
 915:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
 916:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
 917:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_TransmitReceive(SPI_HandleTypeDef *hspi, uint8_t *pTxData, uint8_t *pRxDa
 918:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                           uint32_t Timeout)
 919:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
 920:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tmp = 0U, tmp1 = 0U;
 921:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 922:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint16_t tmpreg = 0U;
 923:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 924:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
 925:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Variable used to alternate Rx and Tx during transfer */
 926:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t txallowed = 1U;
 927:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 928:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
 929:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 930:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check Direction parameter */
 931:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION_2LINES(hspi->Init.Direction));
 932:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 933:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Locked */
 934:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_LOCK(hspi);
 935:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 936:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Init tickstart for timeout management*/
 937:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tickstart = HAL_GetTick();
 938:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 939:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tmp  = hspi->State;
 940:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
 941:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 942:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (!((tmp == HAL_SPI_STATE_READY) || \
 943:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL
 944:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
ARM GAS  /tmp/ccNgnWxc.s 			page 18


 945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_BUSY;
 946:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 947:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 948:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 949:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((pTxData == NULL) || (pRxData == NULL) || (Size == 0U))
 950:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 951:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
 952:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 953:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 954:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 955:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Don't overwrite in case of HAL_SPI_STATE_BUSY_RX */
 956:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->State != HAL_SPI_STATE_BUSY_RX)
 957:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 958:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_BUSY_TX_RX;
 959:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 960:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 961:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the transaction information */
 962:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 963:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pRxData;
 964:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = Size;
 965:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 966:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pTxData;
 967:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = Size;
 968:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 969:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 970:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /*Init field not used in handle to zero */
 971:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxISR       = NULL;
 972:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
 973:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 974:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 975:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Reset CRC Calculation */
 976:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 977:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 978:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
 979:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 980:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 981:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 982:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the Rx Fifo threshold */
 983:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Init.DataSize > SPI_DATASIZE_8BIT) || (hspi->RxXferCount > 1U))
 984:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 985:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* set fiforxthreshold according the reception data length: 16bit */
 986:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     CLEAR_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
 987:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 988:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
 989:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 990:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* set fiforxthreshold according the reception data length: 8bit */
 991:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
 992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 993:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 994:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if the SPI is already enabled */
 995:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Instance->CR1 & SPI_CR1_SPE) != SPI_CR1_SPE)
 996:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 997:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Enable SPI peripheral */
 998:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
 999:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1000:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1001:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Transmit and Receive data in 16 Bit mode */
ARM GAS  /tmp/ccNgnWxc.s 			page 19


1002:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.DataSize > SPI_DATASIZE_8BIT)
1003:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1004:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if ((hspi->Init.Mode == SPI_MODE_SLAVE) || (hspi->TxXferCount == 0x01U))
1005:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1006:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->Instance->DR = *((uint16_t *)pTxData);
1007:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       pTxData += sizeof(uint16_t);
1008:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->TxXferCount--;
1009:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1010:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     while ((hspi->TxXferCount > 0U) || (hspi->RxXferCount > 0U))
1011:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1012:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Check TXE flag */
1013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (txallowed && (hspi->TxXferCount > 0U) && (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_TXE)))
1014:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1015:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->Instance->DR = *((uint16_t *)pTxData);
1016:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pTxData += sizeof(uint16_t);
1017:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount--;
1018:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Next Data is a reception (Rx). Tx not allowed */
1019:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         txallowed = 0U;
1020:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1021:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1022:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Enable CRC Transmission */
1023:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if ((hspi->TxXferCount == 0U) && (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE))
1024:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
1025:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           /* Set NSS Soft to received correctly the CRC on slave mode with NSS pulse activated */
1026:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           if (((hspi->Instance->CR1 & SPI_CR1_MSTR) == 0U) && ((hspi->Instance->CR2 & SPI_CR2_NSSP)
1027:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           {
1028:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             SET_BIT(hspi->Instance->CR1, SPI_CR1_SSM);
1029:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           }
1030:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
1031:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
1032:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1033:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1034:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1035:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Check RXNE flag */
1036:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if ((hspi->RxXferCount > 0U) && (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_RXNE)))
1037:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1038:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         *((uint16_t *)pRxData) = hspi->Instance->DR;
1039:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pRxData += sizeof(uint16_t);
1040:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->RxXferCount--;
1041:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Next Data is a Transmission (Tx). Tx is allowed */
1042:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         txallowed = 1U;
1043:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1044:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if ((Timeout != HAL_MAX_DELAY) && ((HAL_GetTick() - tickstart) >=  Timeout))
1045:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1046:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         errorcode = HAL_TIMEOUT;
1047:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         goto error;
1048:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1049:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1050:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1051:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Transmit and Receive data in 8 Bit mode */
1052:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
1053:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1054:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if ((hspi->Init.Mode == SPI_MODE_SLAVE) || (hspi->TxXferCount == 0x01U))
1055:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1056:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (hspi->TxXferCount > 1U)
1057:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1058:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->Instance->DR = *((uint16_t *)pTxData);
ARM GAS  /tmp/ccNgnWxc.s 			page 20


1059:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pTxData += sizeof(uint16_t);
1060:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount -= 2U;
1061:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1062:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
1063:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1064:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         *(__IO uint8_t *)&hspi->Instance->DR = (*pTxData++);
1065:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount--;
1066:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1067:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1068:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     while ((hspi->TxXferCount > 0U) || (hspi->RxXferCount > 0U))
1069:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1070:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* check TXE flag */
1071:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (txallowed && (hspi->TxXferCount > 0U) && (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_TXE)))
1072:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1073:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if (hspi->TxXferCount > 1U)
1074:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
1075:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->Instance->DR = *((uint16_t *)pTxData);
1076:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           pTxData += sizeof(uint16_t);
1077:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->TxXferCount -= 2U;
1078:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
1079:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         else
1080:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
1081:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           *(__IO uint8_t *)&hspi->Instance->DR = (*pTxData++);
1082:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->TxXferCount--;
1083:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
1084:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Next Data is a reception (Rx). Tx not allowed */
1085:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         txallowed = 0U;
1086:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1087:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1088:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Enable CRC Transmission */
1089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if ((hspi->TxXferCount == 0U) && (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE))
1090:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
1091:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           /* Set NSS Soft to received correctly the CRC on slave mode with NSS pulse activated */
1092:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           if (((hspi->Instance->CR1 & SPI_CR1_MSTR) == 0U) && ((hspi->Instance->CR2 & SPI_CR2_NSSP)
1093:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           {
1094:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             SET_BIT(hspi->Instance->CR1, SPI_CR1_SSM);
1095:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           }
1096:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
1097:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
1098:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1099:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1100:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1101:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Wait until RXNE flag is reset */
1102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if ((hspi->RxXferCount > 0U) && (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_RXNE)))
1103:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if (hspi->RxXferCount > 1U)
1105:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
1106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           *((uint16_t *)pRxData) = hspi->Instance->DR;
1107:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           pRxData += sizeof(uint16_t);
1108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->RxXferCount -= 2U;
1109:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           if (hspi->RxXferCount <= 1U)
1110:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           {
1111:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             /* set fiforxthresold before to switch on 8 bit data size */
1112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             SET_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
1113:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           }
1114:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
1115:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         else
ARM GAS  /tmp/ccNgnWxc.s 			page 21


1116:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
1117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           (*(uint8_t *)pRxData++) = *(__IO uint8_t *)&hspi->Instance->DR;
1118:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->RxXferCount--;
1119:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
1120:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Next Data is a Transmission (Tx). Tx is allowed */
1121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         txallowed = 1U;
1122:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if ((Timeout != HAL_MAX_DELAY) && ((HAL_GetTick() - tickstart) >=  Timeout))
1124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         errorcode = HAL_TIMEOUT;
1126:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         goto error;
1127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1128:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1130:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1131:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1132:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Read CRC from DR to close CRC calculation process */
1133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
1134:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1135:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Wait until TXE flag */
1136:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_RXNE, SET, Timeout, tickstart) != HAL_OK)
1137:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Error on the CRC reception */
1139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
1140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       errorcode = HAL_TIMEOUT;
1141:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       goto error;
1142:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1143:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Read CRC */
1144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.DataSize == SPI_DATASIZE_16BIT)
1145:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       tmpreg = hspi->Instance->DR;
1147:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* To avoid GCC warning */
1148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       UNUSED(tmpreg);
1149:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1150:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     else
1151:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       tmpreg = *(__IO uint8_t *)&hspi->Instance->DR;
1153:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* To avoid GCC warning */
1154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       UNUSED(tmpreg);
1155:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1156:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (hspi->Init.CRCLength == SPI_CRC_LENGTH_16BIT)
1157:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if (SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_RXNE, SET, Timeout, tickstart) != HAL_OK)
1159:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
1160:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           /* Error on the CRC reception */
1161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
1162:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           errorcode = HAL_TIMEOUT;
1163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
1164:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
1165:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         tmpreg = *(__IO uint8_t *)&hspi->Instance->DR;
1166:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* To avoid GCC warning */
1167:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         UNUSED(tmpreg);
1168:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1169:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1170:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1171:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1172:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if CRC error occurred */
ARM GAS  /tmp/ccNgnWxc.s 			page 22


1173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_CRCERR))
1174:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
1176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Clear CRC Flag */
1177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
1178:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
1180:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1181:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1182:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1183:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check the end of the transaction */
1184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_EndRxTxTransaction(hspi, Timeout, tickstart) != HAL_OK)
1185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_FLAG;
1187:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1188:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1189:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->ErrorCode != HAL_SPI_ERROR_NONE)
1190:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
1192:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1193:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1194:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** error :
1195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
1196:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
1198:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
1199:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1200:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
1201:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Transmit an amount of data in non-blocking mode with Interrupt.
1202:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1203:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
1204:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  pData: pointer to data buffer
1205:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Size: amount of data to be sent
1206:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
1207:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
1208:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Transmit_IT(SPI_HandleTypeDef *hspi, uint8_t *pData, uint16_t Size)
1209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
1210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
1211:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
1212:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1213:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check Direction parameter */
1214:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION_2LINES_OR_1LINE(hspi->Init.Direction));
1215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1216:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Locked */
1217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_LOCK(hspi);
1218:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1219:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((pData == NULL) || (Size == 0U))
1220:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
1222:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
1223:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1224:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1225:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->State != HAL_SPI_STATE_READY)
1226:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1227:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_BUSY;
1228:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
1229:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
ARM GAS  /tmp/ccNgnWxc.s 			page 23


1230:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1231:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the transaction information */
1232:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State       = HAL_SPI_STATE_BUSY_TX;
1233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
1234:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
1235:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = Size;
1236:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = Size;
1237:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1238:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Init field not used in handle to zero */
1239:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)NULL;
1240:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = 0U;
1241:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = 0U;
1242:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxISR       = NULL;
1243:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1244:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the function for IT treatment */
1245:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.DataSize > SPI_DATASIZE_8BIT)
1246:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1247:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxISR = SPI_TxISR_16BIT;
1248:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1249:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
1250:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1251:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxISR = SPI_TxISR_8BIT;
1252:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1253:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1254:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Configure communication direction : 1Line */
1255:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.Direction == SPI_DIRECTION_1LINE)
1256:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1257:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_1LINE_TX(hspi);
1258:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1259:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1260:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1261:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Reset CRC Calculation */
1262:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
1263:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1264:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
1265:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1266:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1267:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1268:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable TXE and ERR interrupt */
1269:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_ENABLE_IT(hspi, (SPI_IT_TXE | SPI_IT_ERR));
1270:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1271:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1272:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if the SPI is already enabled */
1273:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Instance->CR1 & SPI_CR1_SPE) != SPI_CR1_SPE)
1274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1275:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Enable SPI peripheral */
1276:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
1277:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1278:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1279:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** error :
1280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1281:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
1282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
1283:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1284:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
1285:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Receive an amount of data in non-blocking mode with Interrupt.
1286:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
ARM GAS  /tmp/ccNgnWxc.s 			page 24


1287:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
1288:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  pData: pointer to data buffer
1289:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Size: amount of data to be sent
1290:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
1291:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
1292:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Receive_IT(SPI_HandleTypeDef *hspi, uint8_t *pData, uint16_t Size)
1293:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
1294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
1295:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
1296:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Init.Direction == SPI_DIRECTION_2LINES) && (hspi->Init.Mode == SPI_MODE_MASTER))
1298:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1299:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_BUSY_RX;
1300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line 
1301:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return HAL_SPI_TransmitReceive_IT(hspi, pData, pData, Size);
1302:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1303:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1304:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Locked */
1305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_LOCK(hspi);
1306:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1307:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->State != HAL_SPI_STATE_READY)
1308:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1309:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_BUSY;
1310:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
1311:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1312:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((pData == NULL) || (Size == 0U))
1314:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1315:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
1316:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
1317:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1318:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1319:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the transaction information */
1320:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State       = HAL_SPI_STATE_BUSY_RX;
1321:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
1322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
1323:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = Size;
1324:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = Size;
1325:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1326:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Init field not used in handle to zero */
1327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)NULL;
1328:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = 0U;
1329:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
1330:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
1331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1332:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check the data size to adapt Rx threshold and the set the function for IT treatment */
1333:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.DataSize > SPI_DATASIZE_8BIT)
1334:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1335:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Set fiforxthresold according the reception data length: 16 bit */
1336:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     CLEAR_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
1337:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxISR = SPI_RxISR_16BIT;
1338:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1339:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
1340:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1341:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Set fiforxthresold according the reception data length: 8 bit */
1342:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
1343:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxISR = SPI_RxISR_8BIT;
ARM GAS  /tmp/ccNgnWxc.s 			page 25


1344:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1345:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1346:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Configure communication direction : 1Line */
1347:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.Direction == SPI_DIRECTION_1LINE)
1348:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1349:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_1LINE_RX(hspi);
1350:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1352:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1353:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Reset CRC Calculation */
1354:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
1355:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->CRCSize = 1U;
1357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if ((hspi->Init.DataSize <= SPI_DATASIZE_8BIT) && (hspi->Init.CRCLength == SPI_CRC_LENGTH_16BIT
1358:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1359:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->CRCSize = 2U;
1360:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1361:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
1362:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
1364:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1365:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->CRCSize = 0U;
1366:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1367:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1368:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1369:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable TXE and ERR interrupt */
1370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_ENABLE_IT(hspi, (SPI_IT_RXNE | SPI_IT_ERR));
1371:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1372:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Note : The SPI must be enabled after unlocking current process
1373:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             to avoid the risk of SPI interrupt handle execution before current
1374:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             process unlock */
1375:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1376:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if the SPI is already enabled */
1377:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Instance->CR1 & SPI_CR1_SPE) != SPI_CR1_SPE)
1378:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1379:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Enable SPI peripheral */
1380:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
1381:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1382:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1383:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** error :
1384:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Unlocked */
1385:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1386:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
1387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
1388:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1389:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
1390:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Transmit and Receive an amount of data in non-blocking mode with Interrupt.
1391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1392:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
1393:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  pTxData: pointer to transmission data buffer
1394:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  pRxData: pointer to reception data buffer
1395:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Size: amount of data to be sent and received
1396:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
1397:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
1398:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_TransmitReceive_IT(SPI_HandleTypeDef *hspi, uint8_t *pTxData, uint8_t *pR
1399:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
1400:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tmp = 0U, tmp1 = 0U;
ARM GAS  /tmp/ccNgnWxc.s 			page 26


1401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
1402:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
1403:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1404:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check Direction parameter */
1405:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION_2LINES(hspi->Init.Direction));
1406:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1407:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process locked */
1408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_LOCK(hspi);
1409:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tmp  = hspi->State;
1411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
1412:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (!((tmp == HAL_SPI_STATE_READY) || \
1414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL
1415:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_BUSY;
1417:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
1418:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((pTxData == NULL) || (pRxData == NULL) || (Size == 0U))
1421:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
1423:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
1424:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1426:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Don't overwrite in case of HAL_SPI_STATE_BUSY_RX */
1427:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->State != HAL_SPI_STATE_BUSY_RX)
1428:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1429:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_BUSY_TX_RX;
1430:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1431:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1432:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the transaction information */
1433:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
1434:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pTxData;
1435:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = Size;
1436:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = Size;
1437:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pRxData;
1438:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = Size;
1439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = Size;
1440:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1441:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the function for IT treatment */
1442:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.DataSize > SPI_DATASIZE_8BIT)
1443:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1444:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxISR     = SPI_2linesRxISR_16BIT;
1445:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxISR     = SPI_2linesTxISR_16BIT;
1446:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1447:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
1448:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1449:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxISR     = SPI_2linesRxISR_8BIT;
1450:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxISR     = SPI_2linesTxISR_8BIT;
1451:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1452:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1453:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1454:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Reset CRC Calculation */
1455:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
1456:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1457:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->CRCSize = 1U;
ARM GAS  /tmp/ccNgnWxc.s 			page 27


1458:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if ((hspi->Init.DataSize <= SPI_DATASIZE_8BIT) && (hspi->Init.CRCLength == SPI_CRC_LENGTH_16BIT
1459:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1460:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->CRCSize = 2U;
1461:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
1463:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1464:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
1465:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1466:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->CRCSize = 0U;
1467:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1468:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1469:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1470:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if packing mode is enabled and if there is more than 2 data to receive */
1471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Init.DataSize > SPI_DATASIZE_8BIT) || (hspi->RxXferCount >= 2U))
1472:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1473:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Set fiforxthresold according the reception data length: 16 bit */
1474:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     CLEAR_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
1475:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1476:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
1477:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1478:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Set fiforxthresold according the reception data length: 8 bit */
1479:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
1480:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1481:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1482:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable TXE, RXNE and ERR interrupt */
1483:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_ENABLE_IT(hspi, (SPI_IT_TXE | SPI_IT_RXNE | SPI_IT_ERR));
1484:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1485:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if the SPI is already enabled */
1486:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Instance->CR1 & SPI_CR1_SPE) != SPI_CR1_SPE)
1487:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1488:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Enable SPI peripheral */
1489:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
1490:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1491:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1492:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** error :
1493:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Unlocked */
1494:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1495:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
1496:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
1497:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1498:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
1499:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Transmit an amount of data in non-blocking mode with DMA.
1500:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1501:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
1502:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  pData: pointer to data buffer
1503:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Size: amount of data to be sent
1504:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
1505:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
1506:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Transmit_DMA(SPI_HandleTypeDef *hspi, uint8_t *pData, uint16_t Size)
1507:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
1508:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
1509:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
1510:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* check tx dma handle */
1511:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_DMA_HANDLE(hspi->hdmatx));
1512:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1513:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check Direction parameter */
1514:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION_2LINES_OR_1LINE(hspi->Init.Direction));
ARM GAS  /tmp/ccNgnWxc.s 			page 28


1515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1516:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Locked */
1517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_LOCK(hspi);
1518:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1519:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->State != HAL_SPI_STATE_READY)
1520:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1521:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_BUSY;
1522:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
1523:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1524:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1525:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((pData == NULL) || (Size == 0U))
1526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1527:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
1528:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
1529:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1530:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1531:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the transaction information */
1532:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State       = HAL_SPI_STATE_BUSY_TX;
1533:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
1534:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
1535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = Size;
1536:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = Size;
1537:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1538:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Init field not used in handle to zero */
1539:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)NULL;
1540:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
1541:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxISR       = NULL;
1542:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = 0U;
1543:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = 0U;
1544:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1545:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Configure communication direction : 1Line */
1546:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.Direction == SPI_DIRECTION_1LINE)
1547:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1548:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_1LINE_TX(hspi);
1549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1550:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1551:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1552:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Reset CRC Calculation */
1553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
1554:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1555:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
1556:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1557:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1558:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1559:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the SPI TxDMA Half transfer complete callback */
1560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmatx->XferHalfCpltCallback = SPI_DMAHalfTransmitCplt;
1561:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1562:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the SPI TxDMA transfer complete callback */
1563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmatx->XferCpltCallback = SPI_DMATransmitCplt;
1564:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1565:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the DMA error callback */
1566:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmatx->XferErrorCallback = SPI_DMAError;
1567:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1568:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the DMA AbortCpltCallback */
1569:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmatx->XferAbortCallback = NULL;
1570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1571:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_LDMATX);
ARM GAS  /tmp/ccNgnWxc.s 			page 29


1572:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Packing mode is enabled only if the DMA setting is HALWORD */
1573:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Init.DataSize <= SPI_DATASIZE_8BIT) && (hspi->hdmatx->Init.MemDataAlignment == DMA_MDA
1574:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1575:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Check the even/odd of the data size + crc if enabled */
1576:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if ((hspi->TxXferCount & 0x1U) == 0U)
1577:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1578:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_LDMATX);
1579:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->TxXferCount = (hspi->TxXferCount >> 1U);
1580:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1581:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     else
1582:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1583:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->Instance->CR2, SPI_CR2_LDMATX);
1584:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->TxXferCount = (hspi->TxXferCount >> 1U) + 1U;
1585:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1586:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1587:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1588:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable the Tx DMA Stream/Channel */
1589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_DMA_Start_IT(hspi->hdmatx, (uint32_t)hspi->pTxBuffPtr, (uint32_t)&hspi->Instance->DR, hspi->T
1590:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if the SPI is already enabled */
1592:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Instance->CR1 & SPI_CR1_SPE) != SPI_CR1_SPE)
1593:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1594:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Enable SPI peripheral */
1595:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
1596:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1597:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1598:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable the SPI Error Interrupt Bit */
1599:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_ENABLE_IT(hspi, (SPI_IT_ERR));
1600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1601:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable Tx DMA Request */
1602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SET_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN);
1603:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1604:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** error :
1605:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Unlocked */
1606:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1607:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
1608:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
1609:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1610:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
1611:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Receive an amount of data in non-blocking mode with DMA.
1612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @note   In case of MASTER mode and SPI_DIRECTION_2LINES direction, hdmatx shall be defined.
1613:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1614:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
1615:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  pData: pointer to data buffer
1616:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @note   When the CRC feature is enabled the pData Length must be Size + 1.
1617:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Size: amount of data to be sent
1618:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
1619:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
1620:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Receive_DMA(SPI_HandleTypeDef *hspi, uint8_t *pData, uint16_t Size)
1621:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
1622:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
1623:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
1624:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* check rx dma handle */
1625:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_DMA_HANDLE(hspi->hdmarx));
1626:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1627:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Init.Direction == SPI_DIRECTION_2LINES) && (hspi->Init.Mode == SPI_MODE_MASTER))
1628:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
ARM GAS  /tmp/ccNgnWxc.s 			page 30


1629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_BUSY_RX;
1630:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     
1631:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* check tx dma handle */
1632:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     assert_param(IS_SPI_DMA_HANDLE(hspi->hdmatx));
1633:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
1634:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line 
1635:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return HAL_SPI_TransmitReceive_DMA(hspi, pData, pData, Size);
1636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1637:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Locked */
1639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_LOCK(hspi);
1640:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1641:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->State != HAL_SPI_STATE_READY)
1642:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1643:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_BUSY;
1644:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
1645:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1646:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1647:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((pData == NULL) || (Size == 0U))
1648:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1649:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
1650:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
1651:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1652:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1653:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the transaction information */
1654:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State       = HAL_SPI_STATE_BUSY_RX;
1655:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
1656:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
1657:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = Size;
1658:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = Size;
1659:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1660:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /*Init field not used in handle to zero */
1661:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxISR       = NULL;
1662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
1663:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = 0U;
1664:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
1665:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1666:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Configure communication direction : 1Line */
1667:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.Direction == SPI_DIRECTION_1LINE)
1668:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1669:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_1LINE_RX(hspi);
1670:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1671:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1672:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1673:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Reset CRC Calculation */
1674:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
1675:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1676:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
1677:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1678:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1679:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1680:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1681:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_LDMARX);
1682:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.DataSize > SPI_DATASIZE_8BIT)
1683:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1684:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Set fiforxthresold according the reception data length: 16bit */
1685:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     CLEAR_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
ARM GAS  /tmp/ccNgnWxc.s 			page 31


1686:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1687:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
1688:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1689:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Set fiforxthresold according the reception data length: 8bit */
1690:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
1691:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1692:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->hdmarx->Init.MemDataAlignment == DMA_MDATAALIGN_HALFWORD)
1693:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1694:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* set fiforxthresold according the reception data length: 16bit */
1695:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       CLEAR_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
1696:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1697:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if ((hspi->RxXferCount & 0x1U) == 0x0U)
1698:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1699:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_LDMARX);
1700:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->RxXferCount = hspi->RxXferCount >> 1U;
1701:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1702:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
1703:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1704:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         SET_BIT(hspi->Instance->CR2, SPI_CR2_LDMARX);
1705:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->RxXferCount = (hspi->RxXferCount >> 1U) + 1U;
1706:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1707:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1708:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1709:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1710:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the SPI RxDMA Half transfer complete callback */
1711:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmarx->XferHalfCpltCallback = SPI_DMAHalfReceiveCplt;
1712:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the SPI Rx DMA transfer complete callback */
1714:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmarx->XferCpltCallback = SPI_DMAReceiveCplt;
1715:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1716:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the DMA error callback */
1717:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmarx->XferErrorCallback = SPI_DMAError;
1718:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1719:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the DMA AbortCpltCallback */
1720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmarx->XferAbortCallback = NULL;
1721:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1722:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable the Rx DMA Stream/Channel  */
1723:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_DMA_Start_IT(hspi->hdmarx, (uint32_t)&hspi->Instance->DR, (uint32_t)hspi->pRxBuffPtr, hspi->R
1724:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1725:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if the SPI is already enabled */
1726:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Instance->CR1 & SPI_CR1_SPE) != SPI_CR1_SPE)
1727:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1728:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Enable SPI peripheral */
1729:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
1730:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1731:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1732:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable the SPI Error Interrupt Bit */
1733:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_ENABLE_IT(hspi, (SPI_IT_ERR));
1734:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1735:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable Rx DMA Request */
1736:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SET_BIT(hspi->Instance->CR2, SPI_CR2_RXDMAEN);
1737:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1738:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** error:
1739:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Unlocked */
1740:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1741:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
1742:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
ARM GAS  /tmp/ccNgnWxc.s 			page 32


1743:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1744:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
1745:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Transmit and Receive an amount of data in non-blocking mode with DMA.
1746:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1747:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
1748:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  pTxData: pointer to transmission data buffer
1749:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  pRxData: pointer to reception data buffer
1750:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @note   When the CRC feature is enabled the pRxData Length must be Size + 1
1751:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Size: amount of data to be sent
1752:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
1753:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
1754:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_TransmitReceive_DMA(SPI_HandleTypeDef *hspi, uint8_t *pTxData, uint8_t *p
1755:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                               uint16_t Size)
1756:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
1757:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tmp = 0U, tmp1 = 0U;
1758:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
1759:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
1760:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* check rx & tx dma handles */
1761:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_DMA_HANDLE(hspi->hdmarx));
1762:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_DMA_HANDLE(hspi->hdmatx));
1763:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1764:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check Direction parameter */
1765:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION_2LINES(hspi->Init.Direction));
1766:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1767:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process locked */
1768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_LOCK(hspi);
1769:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1770:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tmp  = hspi->State;
1771:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
1772:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (!((tmp == HAL_SPI_STATE_READY) ||
1773:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL
1774:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_BUSY;
1776:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
1777:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1778:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1779:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((pTxData == NULL) || (pRxData == NULL) || (Size == 0U))
1780:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1781:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
1782:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
1783:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1784:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1785:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Don't overwrite in case of HAL_SPI_STATE_BUSY_RX */
1786:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->State != HAL_SPI_STATE_BUSY_RX)
1787:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1788:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_BUSY_TX_RX;
1789:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1790:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1791:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the transaction information */
1792:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
1793:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pTxData;
1794:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = Size;
1795:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = Size;
1796:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pRxData;
1797:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = Size;
1798:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = Size;
1799:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
ARM GAS  /tmp/ccNgnWxc.s 			page 33


1800:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Init field not used in handle to zero */
1801:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxISR       = NULL;
1802:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
1803:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1804:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1805:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Reset CRC Calculation */
1806:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
1807:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
1809:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1811:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1812:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1813:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1814:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Reset the threshold bit */
1815:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_LDMATX | SPI_CR2_LDMARX);
1816:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1817:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* The packing mode management is enabled by the DMA settings according the spi data size */
1818:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.DataSize > SPI_DATASIZE_8BIT)
1819:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1820:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Set fiforxthreshold according the reception data length: 16bit */
1821:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     CLEAR_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
1822:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1823:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
1824:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Set fiforxthresold according the reception data length: 8bit */
1826:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
1827:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->hdmatx->Init.MemDataAlignment == DMA_MDATAALIGN_HALFWORD)
1829:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1830:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if ((hspi->TxXferSize & 0x1U) == 0x0U)
1831:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1832:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_LDMATX);
1833:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount = hspi->TxXferCount >> 1U;
1834:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1835:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
1836:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1837:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         SET_BIT(hspi->Instance->CR2, SPI_CR2_LDMATX);
1838:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount = (hspi->TxXferCount >> 1U) + 1U;
1839:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1840:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1841:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1842:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->hdmarx->Init.MemDataAlignment == DMA_MDATAALIGN_HALFWORD)
1843:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1844:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Set fiforxthresold according the reception data length: 16bit */
1845:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       CLEAR_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
1846:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1847:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if ((hspi->RxXferCount & 0x1U) == 0x0U)
1848:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1849:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_LDMARX);
1850:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->RxXferCount = hspi->RxXferCount >> 1U;
1851:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1852:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
1853:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1854:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         SET_BIT(hspi->Instance->CR2, SPI_CR2_LDMARX);
1855:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->RxXferCount = (hspi->RxXferCount >> 1U) + 1U;
1856:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
ARM GAS  /tmp/ccNgnWxc.s 			page 34


1857:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1858:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1859:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1860:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if we are in Rx only or in Rx/Tx Mode and configure the DMA transfer complete callback *
1861:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->State == HAL_SPI_STATE_BUSY_RX)
1862:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1863:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Set the SPI Rx DMA Half transfer complete callback */
1864:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->hdmarx->XferHalfCpltCallback = SPI_DMAHalfReceiveCplt;
1865:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->hdmarx->XferCpltCallback     = SPI_DMAReceiveCplt;
1866:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1867:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
1868:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1869:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Set the SPI Tx/Rx DMA Half transfer complete callback */
1870:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->hdmarx->XferHalfCpltCallback = SPI_DMAHalfTransmitReceiveCplt;
1871:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->hdmarx->XferCpltCallback     = SPI_DMATransmitReceiveCplt;
1872:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1873:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1874:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the DMA error callback */
1875:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmarx->XferErrorCallback = SPI_DMAError;
1876:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1877:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the DMA AbortCpltCallback */
1878:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmarx->XferAbortCallback = NULL;
1879:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1880:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable the Rx DMA Stream/Channel  */
1881:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_DMA_Start_IT(hspi->hdmarx, (uint32_t)&hspi->Instance->DR, (uint32_t)hspi->pRxBuffPtr, hspi->R
1882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1883:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable Rx DMA Request */
1884:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SET_BIT(hspi->Instance->CR2, SPI_CR2_RXDMAEN);
1885:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1886:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Set the SPI Tx DMA transfer complete callback as NULL because the communication closing
1887:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   is performed in DMA reception complete callback  */
1888:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmatx->XferHalfCpltCallback = NULL;
1889:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmatx->XferCpltCallback     = NULL;
1890:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmatx->XferErrorCallback    = NULL;
1891:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmatx->XferAbortCallback    = NULL;
1892:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1893:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable the Tx DMA Stream/Channel  */
1894:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_DMA_Start_IT(hspi->hdmatx, (uint32_t)hspi->pTxBuffPtr, (uint32_t)&hspi->Instance->DR, hspi->T
1895:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1896:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if the SPI is already enabled */
1897:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Instance->CR1 & SPI_CR1_SPE) != SPI_CR1_SPE)
1898:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1899:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Enable SPI peripheral */
1900:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
1901:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1902:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable the SPI Error Interrupt Bit */
1903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_ENABLE_IT(hspi, (SPI_IT_ERR));
1904:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable Tx DMA Request */
1906:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SET_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN);
1907:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1908:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** error :
1909:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Unlocked */
1910:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1911:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
1912:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
1913:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
ARM GAS  /tmp/ccNgnWxc.s 			page 35


1914:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
1915:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Abort ongoing transfer (blocking mode).
1916:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi SPI handle.
1917:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @note   This procedure could be used for aborting any ongoing transfer (Tx and Rx),
1918:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *         started in Interrupt or DMA mode.
1919:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *         This procedure performs following operations :
1920:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *           - Disable SPI Interrupts (depending of transfer direction)
1921:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *           - Disable the DMA transfer in the peripheral register (if enabled)
1922:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *           - Abort DMA transfer by calling HAL_DMA_Abort (in case of transfer in DMA mode)
1923:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *           - Set handle State to READY
1924:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @note   This procedure is executed in blocking mode : when exiting function, Abort is considere
1925:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
1926:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** */
1927:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Abort(SPI_HandleTypeDef *hspi)
1928:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
1929:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode;
1930:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint32_t count, resetcount;
1931:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1932:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Initialized local variable  */
1933:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   errorcode = HAL_OK;
1934:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   resetcount = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
1935:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   count = resetcount;
1936:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1937:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable TXEIE, RXNEIE and ERRIE(mode fault event, overrun error, TI frame error) interrupts */
1938:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_TXEIE))
1939:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1940:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxISR = SPI_AbortTx_ISR;
1941:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Wait HAL_SPI_STATE_ABORT state */
1942:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     do
1943:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1944:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (count-- == 0U)
1945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1946:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_ABORT);
1947:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         break;
1948:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1949:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1950:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     while (hspi->State != HAL_SPI_STATE_ABORT);
1951:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Reset Timeout Counter */
1952:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     count = resetcount;
1953:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
1954:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1955:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_RXNEIE))
1956:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1957:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxISR = SPI_AbortRx_ISR;
1958:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Wait HAL_SPI_STATE_ABORT state */
1959:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     do
1960:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1961:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (count-- == 0U)
1962:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1963:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_ABORT);
1964:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         break;
1965:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1966:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
1967:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     while (hspi->State != HAL_SPI_STATE_ABORT);
1968:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Reset Timeout Counter */
1969:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     count = resetcount;
1970:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
ARM GAS  /tmp/ccNgnWxc.s 			page 36


1971:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1972:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Clear ERRIE interrupts in case of DMA Mode */
1973:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_ERRIE);
1974:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1975:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable the SPI DMA Tx or SPI DMA Rx request if enabled */
1976:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_TXDMAEN)) || (HAL_IS_BIT_SET(hspi->Instance->CR2
1977:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
1978:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Abort the SPI DMA Tx Stream/Channel : use blocking DMA Abort API (no callback) */
1979:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->hdmatx != NULL)
1980:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
1981:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Set the SPI DMA Abort callback :
1982:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       will lead to call HAL_SPI_AbortCpltCallback() at end of DMA abort procedure */
1983:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->hdmatx->XferAbortCallback = NULL;
1984:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1985:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Abort DMA Tx Handle linked to SPI Peripheral */
1986:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (HAL_DMA_Abort(hspi->hdmatx) != HAL_OK)
1987:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1988:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
1989:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1990:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1991:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Disable Tx DMA Request */
1992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       CLEAR_BIT(hspi->Instance->CR2, (SPI_CR2_TXDMAEN));
1993:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1994:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (SPI_EndRxTxTransaction(hspi, SPI_DEFAULT_TIMEOUT, HAL_GetTick()) != HAL_OK)
1995:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
1996:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
1997:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
1998:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
1999:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Disable SPI Peripheral */
2000:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_DISABLE(hspi);
2001:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2002:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Empty the FRLVL fifo */
2003:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (SPI_WaitFifoStateUntilTimeout(hspi, SPI_FLAG_FRLVL, SPI_FRLVL_EMPTY, SPI_DEFAULT_TIMEOUT,
2004:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2005:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
2006:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2007:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2008:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Abort the SPI DMA Rx Stream/Channel : use blocking DMA Abort API (no callback) */
2009:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->hdmarx != NULL)
2010:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2011:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Set the SPI DMA Abort callback :
2012:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       will lead to call HAL_SPI_AbortCpltCallback() at end of DMA abort procedure */
2013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->hdmarx->XferAbortCallback = NULL;
2014:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2015:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Abort DMA Rx Handle linked to SPI Peripheral */
2016:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (HAL_DMA_Abort(hspi->hdmarx) != HAL_OK)
2017:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2018:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
2019:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2020:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2021:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Disable peripheral */
2022:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_DISABLE(hspi);
2023:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2024:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Control the BSY flag */
2025:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_BSY, RESET, SPI_DEFAULT_TIMEOUT, HAL_GetTick
2026:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2027:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
ARM GAS  /tmp/ccNgnWxc.s 			page 37


2028:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2029:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2030:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Empty the FRLVL fifo */
2031:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (SPI_WaitFifoStateUntilTimeout(hspi, SPI_FLAG_FRLVL, SPI_FRLVL_EMPTY, SPI_DEFAULT_TIMEOUT,
2032:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2033:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
2034:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2035:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2036:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Disable Rx DMA Request */
2037:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       CLEAR_BIT(hspi->Instance->CR2, (SPI_CR2_RXDMAEN));
2038:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2039:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2040:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Reset Tx and Rx transfer counters */
2041:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = 0U;
2042:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
2043:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2044:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check error during Abort procedure */
2045:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->ErrorCode == HAL_SPI_ERROR_ABORT)
2046:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2047:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* return HAL_Error in case of error during Abort procedure */
2048:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     errorcode = HAL_ERROR;
2049:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2050:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
2051:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2052:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Reset errorCode */
2053:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_NONE;
2054:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2055:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2056:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Clear the Error flags in the SR register */
2057:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_CLEAR_OVRFLAG(hspi);
2058:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_CLEAR_FREFLAG(hspi);
2059:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2060:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Restore hspi->state to ready */
2061:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
2062:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2063:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
2064:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2065:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2066:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2067:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Abort ongoing transfer (Interrupt mode).
2068:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi SPI handle.
2069:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @note   This procedure could be used for aborting any ongoing transfer (Tx and Rx),
2070:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *         started in Interrupt or DMA mode.
2071:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *         This procedure performs following operations :
2072:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *           - Disable SPI Interrupts (depending of transfer direction)
2073:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *           - Disable the DMA transfer in the peripheral register (if enabled)
2074:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *           - Abort DMA transfer by calling HAL_DMA_Abort_IT (in case of transfer in DMA mode)
2075:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *           - Set handle State to READY
2076:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *           - At abort completion, call user abort complete callback
2077:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @note   This procedure is executed in Interrupt mode, meaning that abort procedure could be
2078:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *         considered as completed only when user abort complete callback is executed (not when ex
2079:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
2080:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** */
2081:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Abort_IT(SPI_HandleTypeDef *hspi)
2082:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2083:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode;
2084:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t abortcplt ;
ARM GAS  /tmp/ccNgnWxc.s 			page 38


2085:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint32_t count, resetcount;
2086:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2087:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Initialized local variable  */
2088:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   errorcode = HAL_OK;
2089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   abortcplt = 1U;
2090:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   resetcount = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
2091:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   count = resetcount;
2092:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2093:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Change Rx and Tx Irq Handler to Disable TXEIE, RXNEIE and ERRIE interrupts */
2094:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_TXEIE))
2095:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2096:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxISR = SPI_AbortTx_ISR;
2097:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Wait HAL_SPI_STATE_ABORT state */
2098:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     do
2099:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2100:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (count-- == 0U)
2101:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_ABORT);
2103:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         break;
2104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2105:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     while (hspi->State != HAL_SPI_STATE_ABORT);
2107:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Reset Timeout Counter */
2108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     count = resetcount;
2109:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2110:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2111:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_RXNEIE))
2112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2113:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxISR = SPI_AbortRx_ISR;
2114:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Wait HAL_SPI_STATE_ABORT state */
2115:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     do
2116:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (count-- == 0U)
2118:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2119:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_ABORT);
2120:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         break;
2121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2122:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     while (hspi->State != HAL_SPI_STATE_ABORT);
2124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Reset Timeout Counter */
2125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     count = resetcount;
2126:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2128:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Clear ERRIE interrupts in case of DMA Mode */
2129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_ERRIE);
2130:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2131:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* If DMA Tx and/or DMA Rx Handles are associated to SPI Handle, DMA Abort complete callbacks sho
2132:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****      before any call to DMA Abort functions */
2133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* DMA Tx Handle is valid */
2134:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->hdmatx != NULL)
2135:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2136:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Set DMA Abort Complete callback if UART DMA Tx request if enabled.
2137:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        Otherwise, set it to NULL */
2138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_TXDMAEN))
2139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->hdmatx->XferAbortCallback = SPI_DMATxAbortCallback;
2141:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
ARM GAS  /tmp/ccNgnWxc.s 			page 39


2142:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     else
2143:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->hdmatx->XferAbortCallback = NULL;
2145:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2147:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* DMA Rx Handle is valid */
2148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->hdmarx != NULL)
2149:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2150:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Set DMA Abort Complete callback if UART DMA Rx request if enabled.
2151:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****        Otherwise, set it to NULL */
2152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_RXDMAEN))
2153:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->hdmarx->XferAbortCallback = SPI_DMARxAbortCallback;
2155:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2156:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     else
2157:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->hdmarx->XferAbortCallback = NULL;
2159:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2160:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2162:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable the SPI DMA Tx or the SPI Rx request if enabled */
2163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_TXDMAEN)) && (HAL_IS_BIT_SET(hspi->Instance->CR2
2164:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2165:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Abort the SPI DMA Tx Stream/Channel */
2166:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->hdmatx != NULL)
2167:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2168:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Abort DMA Tx Handle linked to SPI Peripheral */
2169:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (HAL_DMA_Abort_IT(hspi->hdmatx) != HAL_OK)
2170:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2171:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->hdmatx->XferAbortCallback = NULL;
2172:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
2173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2174:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
2175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         abortcplt = 0U;
2177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2178:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Abort the SPI DMA Rx Stream/Channel */
2180:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->hdmarx != NULL)
2181:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2182:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Abort DMA Rx Handle linked to SPI Peripheral */
2183:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (HAL_DMA_Abort_IT(hspi->hdmarx) !=  HAL_OK)
2184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->hdmarx->XferAbortCallback = NULL;
2186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
2187:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         abortcplt = 1U;
2188:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2189:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
2190:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         abortcplt = 0U;
2192:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2193:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2194:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2196:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable the SPI DMA Tx or the SPI Rx request if enabled */
2197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_TXDMAEN))
2198:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
ARM GAS  /tmp/ccNgnWxc.s 			page 40


2199:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Abort the SPI DMA Tx Stream/Channel */
2200:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->hdmatx != NULL)
2201:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2202:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Abort DMA Tx Handle linked to SPI Peripheral */
2203:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (HAL_DMA_Abort_IT(hspi->hdmatx) != HAL_OK)
2204:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2205:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->hdmatx->XferAbortCallback = NULL;
2206:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
2207:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2208:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
2209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         abortcplt = 0U;
2211:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2212:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2213:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2214:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable the SPI DMA Tx or the SPI Rx request if enabled */
2215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_RXDMAEN))
2216:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Abort the SPI DMA Rx Stream/Channel */
2218:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->hdmarx != NULL)
2219:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2220:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Abort DMA Rx Handle linked to SPI Peripheral */
2221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (HAL_DMA_Abort_IT(hspi->hdmarx) !=  HAL_OK)
2222:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2223:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->hdmarx->XferAbortCallback = NULL;
2224:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
2225:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2226:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
2227:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2228:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         abortcplt = 0U;
2229:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2230:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2231:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2232:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (abortcplt == 1U)
2234:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2235:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Reset Tx and Rx transfer counters */
2236:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxXferCount = 0U;
2237:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxXferCount = 0U;
2238:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2239:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Check error during Abort procedure */
2240:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->ErrorCode == HAL_SPI_ERROR_ABORT)
2241:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2242:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* return HAL_Error in case of error during Abort procedure */
2243:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       errorcode = HAL_ERROR;
2244:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2245:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     else
2246:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2247:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Reset errorCode */
2248:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->ErrorCode = HAL_SPI_ERROR_NONE;
2249:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2250:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2251:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Clear the Error flags in the SR register */
2252:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_CLEAR_OVRFLAG(hspi);
2253:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_CLEAR_FREFLAG(hspi);
2254:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2255:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Restore hspi->State to Ready */
ARM GAS  /tmp/ccNgnWxc.s 			page 41


2256:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
2257:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2258:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* As no DMA to be aborted, call directly user Abort complete callback */
2259:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     HAL_SPI_AbortCpltCallback(hspi);
2260:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2261:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2262:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
2263:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2264:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2265:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2266:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Pause the DMA Transfer.
2267:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2268:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for the specified SPI module.
2269:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
2270:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2271:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_DMAPause(SPI_HandleTypeDef *hspi)
2272:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2273:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Locked */
2274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_LOCK(hspi);
2275:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2276:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable the SPI DMA Tx & Rx requests */
2277:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN);
2278:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2279:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Unlocked */
2280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
2281:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return HAL_OK;
2283:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2284:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2285:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2286:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Resume the DMA Transfer.
2287:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2288:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for the specified SPI module.
2289:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
2290:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2291:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_DMAResume(SPI_HandleTypeDef *hspi)
2292:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2293:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Locked */
2294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_LOCK(hspi);
2295:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2296:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable the SPI DMA Tx & Rx requests */
2297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SET_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN);
2298:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2299:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Unlocked */
2300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
2301:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2302:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return HAL_OK;
2303:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2304:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2306:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief Stop the DMA Transfer.
2307:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2308:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for the specified SPI module.
2309:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
2310:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2311:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_DMAStop(SPI_HandleTypeDef *hspi)
2312:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
ARM GAS  /tmp/ccNgnWxc.s 			page 42


2313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* The Lock is not implemented on this API to allow the user application
2314:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****      to call the HAL SPI API under callbacks HAL_SPI_TxCpltCallback() or HAL_SPI_RxCpltCallback() o
2315:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****      when calling HAL_DMA_Abort() API the DMA TX/RX Transfer complete interrupt is generated
2316:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****      and the correspond call back is executed HAL_SPI_TxCpltCallback() or HAL_SPI_RxCpltCallback() 
2317:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****      */
2318:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2319:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Abort the SPI DMA tx Stream/Channel  */
2320:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->hdmatx != NULL)
2321:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     HAL_DMA_Abort(hspi->hdmatx);
2323:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2324:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Abort the SPI DMA rx Stream/Channel  */
2325:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->hdmarx != NULL)
2326:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     HAL_DMA_Abort(hspi->hdmarx);
2328:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2329:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2330:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable the SPI DMA Tx & Rx requests */
2331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN);
2332:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
2333:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return HAL_OK;
2334:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2335:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2336:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2337:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Handle SPI interrupt request.
2338:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2339:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for the specified SPI module.
2340:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2341:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2342:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** void HAL_SPI_IRQHandler(SPI_HandleTypeDef *hspi)
2343:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2344:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t itsource = hspi->Instance->CR2;
2345:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t itflag   = hspi->Instance->SR;
2346:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2347:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* SPI in mode Receiver ----------------------------------------------------*/
2348:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (((itflag & SPI_FLAG_OVR) == RESET) &&
2349:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       ((itflag & SPI_FLAG_RXNE) != RESET) && ((itsource & SPI_IT_RXNE) != RESET))
2350:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxISR(hspi);
2352:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return;
2353:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2354:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2355:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* SPI in mode Transmitter -------------------------------------------------*/
2356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (((itflag & SPI_FLAG_TXE) != RESET) && ((itsource & SPI_IT_TXE) != RESET))
2357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2358:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxISR(hspi);
2359:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return;
2360:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2361:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2362:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* SPI in Error Treatment --------------------------------------------------*/
2363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (((itflag & (SPI_FLAG_MODF | SPI_FLAG_OVR | SPI_FLAG_FRE)) != RESET) && ((itsource & SPI_IT_ER
2364:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2365:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* SPI Overrun error interrupt occurred ----------------------------------*/
2366:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if ((itflag & SPI_FLAG_OVR) != RESET)
2367:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2368:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (hspi->State != HAL_SPI_STATE_BUSY_TX)
2369:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
ARM GAS  /tmp/ccNgnWxc.s 			page 43


2370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_OVR);
2371:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         __HAL_SPI_CLEAR_OVRFLAG(hspi);
2372:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2373:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
2374:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2375:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         __HAL_SPI_CLEAR_OVRFLAG(hspi);
2376:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         return;
2377:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2378:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2379:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2380:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* SPI Mode Fault error interrupt occurred -------------------------------*/
2381:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if ((itflag & SPI_FLAG_MODF) != RESET)
2382:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2383:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_MODF);
2384:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_CLEAR_MODFFLAG(hspi);
2385:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2386:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* SPI Frame error interrupt occurred ------------------------------------*/
2388:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if ((itflag & SPI_FLAG_FRE) != RESET)
2389:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2390:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FRE);
2391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_CLEAR_FREFLAG(hspi);
2392:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2393:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2394:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->ErrorCode != HAL_SPI_ERROR_NONE)
2395:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2396:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Disable all interrupts */
2397:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_DISABLE_IT(hspi, SPI_IT_RXNE | SPI_IT_TXE | SPI_IT_ERR);
2398:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2399:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->State = HAL_SPI_STATE_READY;
2400:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Disable the SPI DMA requests if enabled */
2401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if ((HAL_IS_BIT_SET(itsource, SPI_CR2_TXDMAEN)) || (HAL_IS_BIT_SET(itsource, SPI_CR2_RXDMAEN)
2402:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2403:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         CLEAR_BIT(hspi->Instance->CR2, (SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN));
2404:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2405:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Abort the SPI DMA Rx channel */
2406:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if (hspi->hdmarx != NULL)
2407:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
2408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           /* Set the SPI DMA Abort callback :
2409:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           will lead to call HAL_SPI_ErrorCallback() at end of DMA abort procedure */
2410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->hdmarx->XferAbortCallback = SPI_DMAAbortOnError;
2411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           HAL_DMA_Abort_IT(hspi->hdmarx);
2412:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
2413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Abort the SPI DMA Tx channel */
2414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if (hspi->hdmatx != NULL)
2415:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
2416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           /* Set the SPI DMA Abort callback :
2417:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           will lead to call HAL_SPI_ErrorCallback() at end of DMA abort procedure */
2418:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->hdmatx->XferAbortCallback = SPI_DMAAbortOnError;
2419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           HAL_DMA_Abort_IT(hspi->hdmatx);
2420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
2421:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
2423:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2424:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Call user error callback */
2425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         HAL_SPI_ErrorCallback(hspi);
2426:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
ARM GAS  /tmp/ccNgnWxc.s 			page 44


2427:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2428:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return;
2429:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2430:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2431:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2432:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2433:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief Tx Transfer completed callback.
2434:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2435:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
2436:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2437:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2438:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** __weak void HAL_SPI_TxCpltCallback(SPI_HandleTypeDef *hspi)
2439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2440:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2441:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(hspi);
2442:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2443:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2444:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             the HAL_SPI_TxCpltCallback should be implemented in the user file
2445:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****    */
2446:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2447:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2448:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2449:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief Rx Transfer completed callback.
2450:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2451:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
2452:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2453:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2454:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** __weak void HAL_SPI_RxCpltCallback(SPI_HandleTypeDef *hspi)
2455:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2456:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2457:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(hspi);
2458:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2459:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2460:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             the HAL_SPI_RxCpltCallback should be implemented in the user file
2461:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****    */
2462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2463:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2464:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2465:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief Tx and Rx Transfer completed callback.
2466:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2467:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
2468:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2469:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2470:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** __weak void HAL_SPI_TxRxCpltCallback(SPI_HandleTypeDef *hspi)
2471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2472:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2473:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(hspi);
2474:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2475:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2476:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             the HAL_SPI_TxRxCpltCallback should be implemented in the user file
2477:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****    */
2478:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2479:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2480:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2481:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief Tx Half Transfer completed callback.
2482:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2483:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
ARM GAS  /tmp/ccNgnWxc.s 			page 45


2484:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2485:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2486:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** __weak void HAL_SPI_TxHalfCpltCallback(SPI_HandleTypeDef *hspi)
2487:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2488:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2489:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(hspi);
2490:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2491:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2492:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             the HAL_SPI_TxHalfCpltCallback should be implemented in the user file
2493:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****    */
2494:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2495:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2496:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2497:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief Rx Half Transfer completed callback.
2498:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2499:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
2500:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2501:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2502:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** __weak void HAL_SPI_RxHalfCpltCallback(SPI_HandleTypeDef *hspi)
2503:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2504:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2505:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(hspi);
2506:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2507:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2508:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             the HAL_SPI_RxHalfCpltCallback() should be implemented in the user file
2509:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****    */
2510:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2511:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2512:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2513:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief Tx and Rx Half Transfer callback.
2514:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
2516:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2518:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** __weak void HAL_SPI_TxRxHalfCpltCallback(SPI_HandleTypeDef *hspi)
2519:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2520:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2521:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(hspi);
2522:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2523:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2524:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             the HAL_SPI_TxRxHalfCpltCallback() should be implemented in the user file
2525:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****    */
2526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2527:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2528:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2529:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief SPI error callback.
2530:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2531:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
2532:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2533:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2534:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** __weak void HAL_SPI_ErrorCallback(SPI_HandleTypeDef *hspi)
2535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2536:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2537:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(hspi);
2538:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2539:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2540:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             the HAL_SPI_ErrorCallback should be implemented in the user file
ARM GAS  /tmp/ccNgnWxc.s 			page 46


2541:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****    */
2542:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* NOTE : The ErrorCode parameter in the hspi handle is updated by the SPI processes
2543:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             and user can use HAL_SPI_GetError() API to check the latest error occurred
2544:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****    */
2545:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2546:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2547:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2548:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  SPI Abort Complete callback.
2549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi SPI handle.
2550:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2551:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2552:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** __weak void HAL_SPI_AbortCpltCallback(SPI_HandleTypeDef *hspi)
2553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2554:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2555:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(hspi);
2556:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2557:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2558:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             the HAL_SPI_AbortCpltCallback can be implemented in the user file.
2559:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****    */
2560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2561:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2562:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @}
2564:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2565:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2566:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /** @defgroup SPI_Exported_Functions_Group3 Peripheral State and Errors functions
2567:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief   SPI control functions
2568:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *
2569:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** @verbatim
2570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****  ===============================================================================
2571:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                       ##### Peripheral State and Errors functions #####
2572:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****  ===============================================================================
2573:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     [..]
2574:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     This subsection provides a set of functions allowing to control the SPI.
2575:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****      (+) HAL_SPI_GetState() API can be helpful to check in run-time the state of the SPI peripheral
2576:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****      (+) HAL_SPI_GetError() check in run-time Errors occurring during communication
2577:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** @endverbatim
2578:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @{
2579:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2580:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2581:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2582:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Return the SPI handle state.
2583:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2584:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
2585:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval SPI state
2586:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2587:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** HAL_SPI_StateTypeDef HAL_SPI_GetState(SPI_HandleTypeDef *hspi)
2588:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Return SPI handle state */
2590:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return hspi->State;
2591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2592:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2593:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2594:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Return the SPI error code.
2595:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2596:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
2597:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval SPI error code in bitmap format
ARM GAS  /tmp/ccNgnWxc.s 			page 47


2598:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2599:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** uint32_t HAL_SPI_GetError(SPI_HandleTypeDef *hspi)
2600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2601:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Return SPI ErrorCode */
2602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return hspi->ErrorCode;
2603:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2604:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2605:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2606:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @}
2607:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2608:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2609:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2610:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @}
2611:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2613:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /** @addtogroup SPI_Private_Functions
2614:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief   Private functions
2615:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @{
2616:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2617:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2618:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2619:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief DMA SPI transmit process complete callback.
2620:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2621:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
2622:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2623:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2624:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMATransmitCplt(DMA_HandleTypeDef *hdma)
2625:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2626:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
2627:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
2628:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Init tickstart for timeout managment*/
2630:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tickstart = HAL_GetTick();
2631:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2632:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* DMA Normal Mode */
2633:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hdma->Instance->CCR & DMA_CCR_CIRC) != DMA_CCR_CIRC)
2634:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2635:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Disable ERR interrupt */
2636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_DISABLE_IT(hspi, SPI_IT_ERR);
2637:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Disable Tx DMA Request */
2639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN);
2640:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2641:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Check the end of the transaction */
2642:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (SPI_EndRxTxTransaction(hspi, SPI_DEFAULT_TIMEOUT, tickstart) != HAL_OK)
2643:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2644:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
2645:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2646:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2647:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Clear overrun flag in 2 Lines communication mode because received data is not read */
2648:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.Direction == SPI_DIRECTION_2LINES)
2649:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2650:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_CLEAR_OVRFLAG(hspi);
2651:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2652:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2653:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxXferCount = 0U;
2654:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
ARM GAS  /tmp/ccNgnWxc.s 			page 48


2655:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2656:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->ErrorCode != HAL_SPI_ERROR_NONE)
2657:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2658:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       HAL_SPI_ErrorCallback(hspi);
2659:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
2660:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2661:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_SPI_TxCpltCallback(hspi);
2663:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2664:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2665:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2666:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief DMA SPI receive process complete callback.
2667:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2668:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
2669:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2670:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2671:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMAReceiveCplt(DMA_HandleTypeDef *hdma)
2672:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2673:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
2674:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
2675:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2676:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint16_t tmpreg = 0U;
2677:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2678:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2679:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Init tickstart for timeout management*/
2680:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tickstart = HAL_GetTick();
2681:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2682:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* DMA Normal Mode */
2683:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hdma->Instance->CCR & DMA_CCR_CIRC) != DMA_CCR_CIRC)
2684:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2685:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Disable ERR interrupt */
2686:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_DISABLE_IT(hspi, SPI_IT_ERR);
2687:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2688:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2689:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* CRC handling */
2690:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
2691:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2692:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Wait until RXNE flag */
2693:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_RXNE, SPI_FLAG_RXNE, SPI_DEFAULT_TIMEOUT, ti
2694:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2695:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Error on the CRC reception */
2696:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
2697:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2698:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Read CRC */
2699:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (hspi->Init.DataSize > SPI_DATASIZE_8BIT)
2700:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2701:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         tmpreg = hspi->Instance->DR;
2702:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* To avoid GCC warning */
2703:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         UNUSED(tmpreg);
2704:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2705:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
2706:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2707:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         tmpreg = *(__IO uint8_t *)&hspi->Instance->DR;
2708:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* To avoid GCC warning */
2709:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         UNUSED(tmpreg);
2710:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2711:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if (hspi->Init.CRCLength == SPI_CRC_LENGTH_16BIT)
ARM GAS  /tmp/ccNgnWxc.s 			page 49


2712:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
2713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           if (SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_RXNE, SPI_FLAG_RXNE, SPI_DEFAULT_TIMEOUT
2714:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           {
2715:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             /* Error on the CRC reception */
2716:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****             SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
2717:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           }
2718:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           tmpreg = *(__IO uint8_t *)&hspi->Instance->DR;
2719:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           /* To avoid GCC warning */
2720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           UNUSED(tmpreg);
2721:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
2722:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2723:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2724:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2725:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2726:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Disable Rx/Tx DMA Request (done by default to handle the case master rx direction 2 lines) *
2727:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN);
2728:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2729:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Check the end of the transaction */
2730:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (SPI_EndRxTransaction(hspi, SPI_DEFAULT_TIMEOUT, tickstart) != HAL_OK)
2731:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2732:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->ErrorCode = HAL_SPI_ERROR_FLAG;
2733:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2734:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2735:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxXferCount = 0U;
2736:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
2737:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2738:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2739:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Check if CRC error occurred */
2740:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_CRCERR))
2741:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2742:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
2743:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
2744:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2745:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2746:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2747:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->ErrorCode != HAL_SPI_ERROR_NONE)
2748:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2749:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       HAL_SPI_ErrorCallback(hspi);
2750:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
2751:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2752:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2753:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_SPI_RxCpltCallback(hspi);
2754:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2755:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2756:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2757:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  DMA SPI transmit receive process complete callback.
2758:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2759:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
2760:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2761:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2762:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMATransmitReceiveCplt(DMA_HandleTypeDef *hdma)
2763:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2764:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
2765:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
2766:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2767:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO int16_t tmpreg = 0U;
2768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
ARM GAS  /tmp/ccNgnWxc.s 			page 50


2769:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Init tickstart for timeout management*/
2770:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tickstart = HAL_GetTick();
2771:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2772:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* DMA Normal Mode */
2773:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hdma->Instance->CCR & DMA_CCR_CIRC) != DMA_CCR_CIRC)
2774:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Disable ERR interrupt */
2776:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_DISABLE_IT(hspi, SPI_IT_ERR);
2777:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2778:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2779:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* CRC handling */
2780:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
2781:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2782:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if ((hspi->Init.DataSize == SPI_DATASIZE_8BIT) && (hspi->Init.CRCLength == SPI_CRC_LENGTH_8BI
2783:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2784:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if (SPI_WaitFifoStateUntilTimeout(hspi, SPI_FLAG_FRLVL, SPI_FRLVL_QUARTER_FULL, SPI_DEFAULT
2785:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                           tickstart) != HAL_OK)
2786:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
2787:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           /* Error on the CRC reception */
2788:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
2789:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
2790:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Read CRC to Flush DR and RXNE flag */
2791:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         tmpreg = *(__IO uint8_t *)&hspi->Instance->DR;
2792:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* To avoid GCC warning */
2793:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         UNUSED(tmpreg);
2794:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2795:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
2796:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
2797:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if (SPI_WaitFifoStateUntilTimeout(hspi, SPI_FLAG_FRLVL, SPI_FRLVL_HALF_FULL, SPI_DEFAULT_TI
2798:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
2799:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           /* Error on the CRC reception */
2800:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
2801:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
2802:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Read CRC to Flush DR and RXNE flag */
2803:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         tmpreg = hspi->Instance->DR;
2804:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* To avoid GCC warning */
2805:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         UNUSED(tmpreg);
2806:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
2807:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2809:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Check the end of the transaction */
2811:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (SPI_EndRxTxTransaction(hspi, SPI_DEFAULT_TIMEOUT, tickstart) != HAL_OK)
2812:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2813:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
2814:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2815:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2816:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Disable Rx/Tx DMA Request */
2817:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN);
2818:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2819:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxXferCount = 0U;
2820:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxXferCount = 0U;
2821:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
2822:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2823:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2824:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Check if CRC error occurred */
2825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_CRCERR))
ARM GAS  /tmp/ccNgnWxc.s 			page 51


2826:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2827:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
2828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
2829:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2830:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2831:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2832:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->ErrorCode != HAL_SPI_ERROR_NONE)
2833:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2834:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       HAL_SPI_ErrorCallback(hspi);
2835:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
2836:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2837:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2838:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_SPI_TxRxCpltCallback(hspi);
2839:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2840:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2841:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2842:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  DMA SPI half transmit process complete callback.
2843:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2844:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
2845:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2846:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2847:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMAHalfTransmitCplt(DMA_HandleTypeDef *hdma)
2848:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2849:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
2850:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2851:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_SPI_TxHalfCpltCallback(hspi);
2852:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2853:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2854:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2855:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  DMA SPI half receive process complete callback
2856:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2857:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
2858:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2859:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2860:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMAHalfReceiveCplt(DMA_HandleTypeDef *hdma)
2861:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2862:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
2863:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2864:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_SPI_RxHalfCpltCallback(hspi);
2865:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2866:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2867:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2868:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  DMA SPI half transmit receive process complete callback.
2869:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2870:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
2871:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2872:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2873:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMAHalfTransmitReceiveCplt(DMA_HandleTypeDef *hdma)
2874:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2875:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
2876:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2877:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_SPI_TxRxHalfCpltCallback(hspi);
2878:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2879:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2880:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2881:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  DMA SPI communication error callback.
2882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
ARM GAS  /tmp/ccNgnWxc.s 			page 52


2883:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
2884:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2885:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2886:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMAError(DMA_HandleTypeDef *hdma)
2887:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2888:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
2889:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2890:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Stop the disable DMA transfer on SPI side */
2891:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN);
2892:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2893:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_DMA);
2894:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
2895:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_SPI_ErrorCallback(hspi);
2896:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2897:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2898:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2899:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  DMA SPI communication abort callback, when initiated by HAL services on Error
2900:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *         (To be called at end of DMA Abort procedure following error occurrence).
2901:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hdma DMA handle.
2902:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2904:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMAAbortOnError(DMA_HandleTypeDef *hdma)
2905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2906:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
2907:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = 0U;
2908:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
2909:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2910:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_SPI_ErrorCallback(hspi);
2911:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2912:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2913:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2914:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  DMA SPI Tx communication abort callback, when initiated by user
2915:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *         (To be called at end of DMA Tx Abort procedure following user abort request).
2916:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @note   When this callback is executed, User Abort complete call back is called only if no
2917:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *         Abort still ongoing for Rx DMA Handle.
2918:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hdma DMA handle.
2919:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2920:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2921:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMATxAbortCallback(DMA_HandleTypeDef *hdma)
2922:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2923:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
2924:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2925:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmatx->XferAbortCallback = NULL;
2926:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2927:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable Tx DMA Request */
2928:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN);
2929:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2930:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_EndRxTxTransaction(hspi, SPI_DEFAULT_TIMEOUT, HAL_GetTick()) != HAL_OK)
2931:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2932:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
2933:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2934:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2935:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable SPI Peripheral */
2936:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_DISABLE(hspi);
2937:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2938:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Empty the FRLVL fifo */
2939:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_WaitFifoStateUntilTimeout(hspi, SPI_FLAG_FRLVL, SPI_FRLVL_EMPTY, SPI_DEFAULT_TIMEOUT, HAL
ARM GAS  /tmp/ccNgnWxc.s 			page 53


2940:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2941:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
2942:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2943:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2944:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if an Abort process is still ongoing */
2945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->hdmarx != NULL)
2946:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2947:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->hdmarx->XferAbortCallback != NULL)
2948:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
2949:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
2950:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
2951:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2952:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2953:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* No Abort process still ongoing : All DMA Stream/Channel are aborted, call user Abort Complete 
2954:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = 0U;
2955:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
2956:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2957:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check no error during Abort procedure */
2958:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->ErrorCode != HAL_SPI_ERROR_ABORT)
2959:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2960:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Reset errorCode */
2961:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_NONE;
2962:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
2963:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2964:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Clear the Error flags in the SR register */
2965:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_CLEAR_OVRFLAG(hspi);
2966:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_CLEAR_FREFLAG(hspi);
2967:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2968:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Restore hspi->State to Ready */
2969:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State  = HAL_SPI_STATE_READY;
2970:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2971:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Call user Abort complete callback */
2972:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_SPI_AbortCpltCallback(hspi);
2973:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
2974:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2975:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
2976:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  DMA SPI Rx communication abort callback, when initiated by user
2977:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *         (To be called at end of DMA Rx Abort procedure following user abort request).
2978:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @note   When this callback is executed, User Abort complete call back is called only if no
2979:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *         Abort still ongoing for Tx DMA Handle.
2980:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hdma DMA handle.
2981:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
2982:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
2983:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_DMARxAbortCallback(DMA_HandleTypeDef *hdma)
2984:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
2985:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
2986:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2987:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable SPI Peripheral */
2988:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_DISABLE(hspi);
2989:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2990:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmarx->XferAbortCallback = NULL;
2991:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable Rx DMA Request */
2993:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_RXDMAEN);
2994:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
2995:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Control the BSY flag */
2996:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_BSY, RESET, SPI_DEFAULT_TIMEOUT, HAL_GetTick()) 
ARM GAS  /tmp/ccNgnWxc.s 			page 54


2997:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
2998:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
2999:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3000:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3001:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Empty the FRLVL fifo */
3002:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_WaitFifoStateUntilTimeout(hspi, SPI_FLAG_FRLVL, SPI_FRLVL_EMPTY, SPI_DEFAULT_TIMEOUT, HAL
3003:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3004:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
3005:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3006:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3007:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if an Abort process is still ongoing */
3008:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->hdmatx != NULL)
3009:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3010:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->hdmatx->XferAbortCallback != NULL)
3011:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3012:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
3013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3014:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3015:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3016:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* No Abort process still ongoing : All DMA Stream/Channel are aborted, call user Abort Complete 
3017:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = 0U;
3018:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
3019:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3020:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check no error during Abort procedure */
3021:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->ErrorCode != HAL_SPI_ERROR_ABORT)
3022:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3023:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Reset errorCode */
3024:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_NONE;
3025:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3026:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3027:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Clear the Error flags in the SR register */
3028:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_CLEAR_OVRFLAG(hspi);
3029:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_CLEAR_FREFLAG(hspi);
3030:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3031:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Restore hspi->State to Ready */
3032:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State  = HAL_SPI_STATE_READY;
3033:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3034:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Call user Abort complete callback */
3035:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_SPI_AbortCpltCallback(hspi);
3036:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3037:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3038:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3039:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Rx 8-bit handler for Transmit and Receive in Interrupt mode.
3040:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3041:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3042:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3043:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3044:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_2linesRxISR_8BIT(struct __SPI_HandleTypeDef *hspi)
3045:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3046:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Receive data in packing mode */
3047:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->RxXferCount > 1U)
3048:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3049:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     *((uint16_t *)hspi->pRxBuffPtr) = hspi->Instance->DR;
3050:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->pRxBuffPtr += sizeof(uint16_t);
3051:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxXferCount -= 2U;
3052:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->RxXferCount == 1U)
3053:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
ARM GAS  /tmp/ccNgnWxc.s 			page 55


3054:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* set fiforxthresold according the reception data length: 8bit */
3055:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
3056:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3057:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3058:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Receive data in 8 Bit mode */
3059:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
3060:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3061:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     *hspi->pRxBuffPtr++ = *((__IO uint8_t *)&hspi->Instance->DR);
3062:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxXferCount--;
3063:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3064:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3065:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* check end of the reception */
3066:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->RxXferCount == 0U)
3067:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3068:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3069:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
3070:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3071:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->Instance->CR2, SPI_RXFIFO_THRESHOLD);
3072:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->RxISR =  SPI_2linesRxISR_8BITCRC;
3073:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
3074:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3075:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3076:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3077:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Disable RXNE  and ERR interrupt */
3078:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_DISABLE_IT(hspi, (SPI_IT_RXNE | SPI_IT_ERR));
3079:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3080:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->TxXferCount == 0U)
3081:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3082:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SPI_CloseRxTx_ISR(hspi);
3083:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3084:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3085:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3086:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3087:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3088:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Rx 8-bit handler for Transmit and Receive in Interrupt mode.
3090:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3091:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3092:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3093:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3094:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_2linesRxISR_8BITCRC(struct __SPI_HandleTypeDef *hspi)
3095:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3096:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint8_t tmpreg = 0U;
3097:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3098:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Read data register to flush CRC */
3099:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tmpreg = *((__IO uint8_t *)&hspi->Instance->DR);
3100:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3101:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* To avoid GCC warning */
3102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(tmpreg);
3103:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->CRCSize--;
3105:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* check end of the reception */
3107:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->CRCSize == 0U)
3108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3109:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Disable RXNE and ERR interrupt */
3110:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_DISABLE_IT(hspi, (SPI_IT_RXNE | SPI_IT_ERR));
ARM GAS  /tmp/ccNgnWxc.s 			page 56


3111:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->TxXferCount == 0U)
3113:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3114:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SPI_CloseRxTx_ISR(hspi);
3115:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3116:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3118:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3119:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3120:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Tx 8-bit handler for Transmit and Receive in Interrupt mode.
3122:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3124:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3126:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_2linesTxISR_8BIT(struct __SPI_HandleTypeDef *hspi)
3127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3128:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Transmit data in packing Bit mode */
3129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->TxXferCount >= 2U)
3130:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3131:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->Instance->DR = *((uint16_t *)hspi->pTxBuffPtr);
3132:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->pTxBuffPtr += sizeof(uint16_t);
3133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxXferCount -= 2U;
3134:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3135:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Transmit data in 8 Bit mode */
3136:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
3137:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     *(__IO uint8_t *)&hspi->Instance->DR = (*hspi->pTxBuffPtr++);
3139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxXferCount--;
3140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3141:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3142:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* check the end of the transmission */
3143:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->TxXferCount == 0U)
3144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3145:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
3147:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Set CRC Next Bit to send CRC */
3149:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
3150:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Disable TXE interrupt */
3151:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_DISABLE_IT(hspi, SPI_IT_TXE);
3152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
3153:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3155:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3156:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Disable TXE interrupt */
3157:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_DISABLE_IT(hspi, SPI_IT_TXE);
3158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3159:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->RxXferCount == 0U)
3160:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SPI_CloseRxTx_ISR(hspi);
3162:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3164:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3165:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3166:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3167:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Rx 16-bit handler for Transmit and Receive in Interrupt mode.
ARM GAS  /tmp/ccNgnWxc.s 			page 57


3168:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3169:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3170:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3171:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3172:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_2linesRxISR_16BIT(struct __SPI_HandleTypeDef *hspi)
3173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3174:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Receive data in 16 Bit mode */
3175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *((uint16_t *)hspi->pRxBuffPtr) = hspi->Instance->DR;
3176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr += sizeof(uint16_t);
3177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount--;
3178:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->RxXferCount == 0U)
3180:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3181:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3182:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
3183:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->RxISR =  SPI_2linesRxISR_16BITCRC;
3185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
3186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3187:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3188:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3189:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Disable RXNE interrupt */
3190:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_DISABLE_IT(hspi, SPI_IT_RXNE);
3191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3192:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->TxXferCount == 0U)
3193:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3194:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SPI_CloseRxTx_ISR(hspi);
3195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3196:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3198:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3199:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3200:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3201:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Manage the CRC 16-bit receive for Transmit and Receive in Interrupt mode.
3202:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3203:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3204:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3205:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3206:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_2linesRxISR_16BITCRC(struct __SPI_HandleTypeDef *hspi)
3207:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3208:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Receive data in 16 Bit mode */
3209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint16_t tmpreg = 0U;
3210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3211:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Read data register to flush CRC */
3212:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tmpreg = hspi->Instance->DR;
3213:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3214:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* To avoid GCC warning */
3215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(tmpreg);
3216:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable RXNE interrupt */
3218:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_DISABLE_IT(hspi, SPI_IT_RXNE);
3219:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3220:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_CloseRxTx_ISR(hspi);
3221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3222:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3223:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3224:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
ARM GAS  /tmp/ccNgnWxc.s 			page 58


3225:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Tx 16-bit handler for Transmit and Receive in Interrupt mode.
3226:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3227:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3228:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3229:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3230:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_2linesTxISR_16BIT(struct __SPI_HandleTypeDef *hspi)
3231:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3232:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Transmit data in 16 Bit mode */
3233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->Instance->DR = *((uint16_t *)hspi->pTxBuffPtr);
3234:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr += sizeof(uint16_t);
3235:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount--;
3236:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3237:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable CRC Transmission */
3238:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->TxXferCount == 0U)
3239:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3240:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3241:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
3242:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3243:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Set CRC Next Bit to send CRC */
3244:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
3245:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Disable TXE interrupt */
3246:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_DISABLE_IT(hspi, SPI_IT_TXE);
3247:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
3248:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3249:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3250:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3251:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Disable TXE interrupt */
3252:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_DISABLE_IT(hspi, SPI_IT_TXE);
3253:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3254:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->RxXferCount == 0U)
3255:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3256:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SPI_CloseRxTx_ISR(hspi);
3257:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3258:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3259:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3260:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3261:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3262:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3263:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Manage the CRC 8-bit receive in Interrupt context.
3264:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3265:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3266:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3267:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3268:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_RxISR_8BITCRC(struct __SPI_HandleTypeDef *hspi)
3269:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3270:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint8_t tmpreg = 0U;
3271:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3272:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Read data register to flush CRC */
3273:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tmpreg = *((__IO uint8_t *)&hspi->Instance->DR);
3274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3275:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* To avoid GCC warning */
3276:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(tmpreg);
3277:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3278:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->CRCSize--;
3279:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->CRCSize == 0U)
3281:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
ARM GAS  /tmp/ccNgnWxc.s 			page 59


3282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_CloseRx_ISR(hspi);
3283:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3284:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3285:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3286:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3287:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3288:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Manage the receive 8-bit in Interrupt context.
3289:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3290:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3291:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3292:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3293:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_RxISR_8BIT(struct __SPI_HandleTypeDef *hspi)
3294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3295:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *hspi->pRxBuffPtr++ = (*(__IO uint8_t *)&hspi->Instance->DR);
3296:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount--;
3297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3298:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3299:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable CRC Transmission */
3300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->RxXferCount == 1U) && (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE))
3301:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3302:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
3303:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3304:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3306:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->RxXferCount == 0U)
3307:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3308:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3309:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
3310:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3311:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->RxISR =  SPI_RxISR_8BITCRC;
3312:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
3313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3314:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3315:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_CloseRx_ISR(hspi);
3316:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3317:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3318:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3319:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3320:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3321:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Manage the CRC 16-bit receive in Interrupt context.
3322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3323:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3324:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3325:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3326:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_RxISR_16BITCRC(struct __SPI_HandleTypeDef *hspi)
3327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3328:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint16_t tmpreg = 0U;
3329:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3330:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Read data register to flush CRC */
3331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tmpreg = hspi->Instance->DR;
3332:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3333:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* To avoid GCC warning */
3334:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   UNUSED(tmpreg);
3335:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3336:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable RXNE and ERR interrupt */
3337:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_DISABLE_IT(hspi, (SPI_IT_RXNE | SPI_IT_ERR));
3338:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
ARM GAS  /tmp/ccNgnWxc.s 			page 60


3339:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_CloseRx_ISR(hspi);
3340:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3341:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3342:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3343:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3344:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Manage the 16-bit receive in Interrupt context.
3345:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3346:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3347:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3348:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3349:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_RxISR_16BIT(struct __SPI_HandleTypeDef *hspi)
3350:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *((uint16_t *)hspi->pRxBuffPtr) = hspi->Instance->DR;
3352:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr += sizeof(uint16_t);
3353:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount--;
3354:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3355:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Enable CRC Transmission */
3357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->RxXferCount == 1U) && (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE))
3358:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3359:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
3360:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3361:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3362:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->RxXferCount == 0U)
3364:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3365:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3366:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
3367:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3368:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->RxISR = SPI_RxISR_16BITCRC;
3369:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
3370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3371:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3372:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_CloseRx_ISR(hspi);
3373:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3374:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3375:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3376:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3377:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Handle the data 8-bit transmit in Interrupt mode.
3378:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3379:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3380:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3381:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3382:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_TxISR_8BIT(struct __SPI_HandleTypeDef *hspi)
3383:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3384:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *(__IO uint8_t *)&hspi->Instance->DR = (*hspi->pTxBuffPtr++);
3385:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount--;
3386:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->TxXferCount == 0U)
3388:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3389:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3390:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
3391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3392:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Enable CRC Transmission */
3393:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
3394:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3395:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
ARM GAS  /tmp/ccNgnWxc.s 			page 61


3396:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_CloseTx_ISR(hspi);
3397:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3398:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3399:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3400:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Handle the data 16-bit transmit in Interrupt mode.
3402:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3403:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3404:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3405:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3406:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_TxISR_16BIT(struct __SPI_HandleTypeDef *hspi)
3407:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Transmit data in 16 Bit mode */
3409:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->Instance->DR = *((uint16_t *)hspi->pTxBuffPtr);
3410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr += sizeof(uint16_t);
3411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount--;
3412:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->TxXferCount == 0U)
3414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3415:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
3417:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3418:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Enable CRC Transmission */
3419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
3420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3421:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SPI_CloseTx_ISR(hspi);
3423:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3424:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3426:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3427:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief Handle SPI Communication Timeout.
3428:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param hspi: pointer to a SPI_HandleTypeDef structure that contains
3429:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *              the configuration information for SPI module.
3430:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param Flag: SPI flag to check
3431:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param State: flag state to check
3432:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param Timeout: Timeout duration
3433:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param Tickstart: tick start value
3434:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
3435:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3436:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static HAL_StatusTypeDef SPI_WaitFlagStateUntilTimeout(SPI_HandleTypeDef *hspi, uint32_t Flag, uint
3437:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                        uint32_t Timeout, uint32_t Tickstart)
3438:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
  27              		.loc 1 3438 0
  28              		.cfi_startproc
  29              		@ args = 4, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 24
  35              		.cfi_offset 3, -24
  36              		.cfi_offset 4, -20
  37              		.cfi_offset 5, -16
  38              		.cfi_offset 6, -12
  39              		.cfi_offset 7, -8
  40              		.cfi_offset 14, -4
ARM GAS  /tmp/ccNgnWxc.s 			page 62


  41 0002 0546     		mov	r5, r0
  42 0004 0F46     		mov	r7, r1
  43 0006 1646     		mov	r6, r2
  44 0008 1C46     		mov	r4, r3
3439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   while ((__HAL_SPI_GET_FLAG(hspi, Flag) ? SET : RESET) != State)
  45              		.loc 1 3439 0
  46 000a 39E0     		b	.L3
  47              	.LVL1:
  48              	.L16:
3440:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3441:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (Timeout != HAL_MAX_DELAY)
3442:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3443:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if ((Timeout == 0U) || ((HAL_GetTick() - Tickstart) >= Timeout))
  49              		.loc 1 3443 0
  50 000c 2CB1     		cbz	r4, .L4
  51              		.loc 1 3443 0 is_stmt 0 discriminator 1
  52 000e FFF7FEFF 		bl	HAL_GetTick
  53              	.LVL2:
  54 0012 069B     		ldr	r3, [sp, #24]
  55 0014 C01A     		subs	r0, r0, r3
  56 0016 A042     		cmp	r0, r4
  57 0018 32D3     		bcc	.L3
  58              	.L4:
3444:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
3445:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Disable the SPI and reset the CRC: the CRC value should be cleared
3446:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         on both master and slave sides in order to resynchronize the master
3447:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         and slave for their respective CRC calculation */
3448:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3449:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Disable TXE, RXNE and ERR interrupts for the interrupt process */
3450:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         __HAL_SPI_DISABLE_IT(hspi, (SPI_IT_TXE | SPI_IT_RXNE | SPI_IT_ERR));
  59              		.loc 1 3450 0 is_stmt 1
  60 001a 2A68     		ldr	r2, [r5]
  61 001c 5368     		ldr	r3, [r2, #4]
  62 001e 23F0E003 		bic	r3, r3, #224
  63 0022 5360     		str	r3, [r2, #4]
3451:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3452:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if ((hspi->Init.Mode == SPI_MODE_MASTER) && ((hspi->Init.Direction == SPI_DIRECTION_1LINE)
  64              		.loc 1 3452 0
  65 0024 6B68     		ldr	r3, [r5, #4]
  66 0026 B3F5827F 		cmp	r3, #260
  67 002a 0BD0     		beq	.L13
  68              	.L5:
3453:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                      || (hspi->Init.Direction == SPI_DIRECTION_2LIN
3454:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
3455:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           /* Disable SPI peripheral */
3456:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           __HAL_SPI_DISABLE(hspi);
3457:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
3458:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3459:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Reset CRC Calculation */
3460:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
  69              		.loc 1 3460 0
  70 002c AB6A     		ldr	r3, [r5, #40]
  71 002e B3F5005F 		cmp	r3, #8192
  72 0032 14D0     		beq	.L14
  73              	.L7:
3461:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
3462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           SPI_RESET_CRC(hspi);
ARM GAS  /tmp/ccNgnWxc.s 			page 63


3463:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
3464:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3465:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->State = HAL_SPI_STATE_READY;
  74              		.loc 1 3465 0
  75 0034 0123     		movs	r3, #1
  76 0036 85F85D30 		strb	r3, [r5, #93]
3466:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3467:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Process Unlocked */
3468:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         __HAL_UNLOCK(hspi);
  77              		.loc 1 3468 0
  78 003a 0023     		movs	r3, #0
  79 003c 85F85C30 		strb	r3, [r5, #92]
3469:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3470:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         return HAL_TIMEOUT;
  80              		.loc 1 3470 0
  81 0040 0320     		movs	r0, #3
  82 0042 25E0     		b	.L8
  83              	.L13:
3452:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                      || (hspi->Init.Direction == SPI_DIRECTION_2LIN
  84              		.loc 1 3452 0 discriminator 1
  85 0044 AB68     		ldr	r3, [r5, #8]
  86 0046 B3F5004F 		cmp	r3, #32768
  87 004a 02D0     		beq	.L6
3453:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
  88              		.loc 1 3453 0
  89 004c B3F5806F 		cmp	r3, #1024
  90 0050 ECD1     		bne	.L5
  91              	.L6:
3456:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
  92              		.loc 1 3456 0
  93 0052 2A68     		ldr	r2, [r5]
  94 0054 1368     		ldr	r3, [r2]
  95 0056 23F04003 		bic	r3, r3, #64
  96 005a 1360     		str	r3, [r2]
  97 005c E6E7     		b	.L5
  98              	.L14:
3462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
  99              		.loc 1 3462 0
 100 005e 2A68     		ldr	r2, [r5]
 101 0060 1368     		ldr	r3, [r2]
 102 0062 23F40053 		bic	r3, r3, #8192
 103 0066 1360     		str	r3, [r2]
 104 0068 2A68     		ldr	r2, [r5]
 105 006a 1368     		ldr	r3, [r2]
 106 006c 43F40053 		orr	r3, r3, #8192
 107 0070 1360     		str	r3, [r2]
 108 0072 DFE7     		b	.L7
 109              	.L17:
3439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 110              		.loc 1 3439 0
 111 0074 0123     		movs	r3, #1
 112              	.L9:
3439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 113              		.loc 1 3439 0 is_stmt 0 discriminator 4
 114 0076 B342     		cmp	r3, r6
 115 0078 09D0     		beq	.L15
3441:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
ARM GAS  /tmp/ccNgnWxc.s 			page 64


 116              		.loc 1 3441 0 is_stmt 1
 117 007a B4F1FF3F 		cmp	r4, #-1
 118 007e C5D1     		bne	.L16
 119              	.L3:
3439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 120              		.loc 1 3439 0
 121 0080 2B68     		ldr	r3, [r5]
 122 0082 9B68     		ldr	r3, [r3, #8]
 123 0084 37EA0303 		bics	r3, r7, r3
 124 0088 F4D0     		beq	.L17
 125 008a 0023     		movs	r3, #0
 126 008c F3E7     		b	.L9
 127              	.L15:
3471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
3472:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3473:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3474:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3475:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return HAL_OK;
 128              		.loc 1 3475 0
 129 008e 0020     		movs	r0, #0
 130              	.L8:
3476:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 131              		.loc 1 3476 0
 132 0090 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 133              		.cfi_endproc
 134              	.LFE179:
 136              		.section	.text.SPI_WaitFifoStateUntilTimeout,"ax",%progbits
 137              		.align	1
 138              		.syntax unified
 139              		.thumb
 140              		.thumb_func
 141              		.fpu fpv4-sp-d16
 143              	SPI_WaitFifoStateUntilTimeout:
 144              	.LFB180:
3477:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3478:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3479:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief Handle SPI FIFO Communication Timeout.
3480:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param hspi: pointer to a SPI_HandleTypeDef structure that contains
3481:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *              the configuration information for SPI module.
3482:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param Fifo: Fifo to check
3483:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param State: Fifo state to check
3484:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param Timeout: Timeout duration
3485:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param Tickstart: tick start value
3486:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
3487:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3488:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static HAL_StatusTypeDef SPI_WaitFifoStateUntilTimeout(SPI_HandleTypeDef *hspi, uint32_t Fifo, uint
3489:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                        uint32_t Timeout, uint32_t Tickstart)
3490:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
 145              		.loc 1 3490 0
 146              		.cfi_startproc
 147              		@ args = 4, pretend = 0, frame = 8
 148              		@ frame_needed = 0, uses_anonymous_args = 0
 149              	.LVL3:
 150 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 151              	.LCFI1:
 152              		.cfi_def_cfa_offset 20
 153              		.cfi_offset 4, -20
ARM GAS  /tmp/ccNgnWxc.s 			page 65


 154              		.cfi_offset 5, -16
 155              		.cfi_offset 6, -12
 156              		.cfi_offset 7, -8
 157              		.cfi_offset 14, -4
 158 0002 83B0     		sub	sp, sp, #12
 159              	.LCFI2:
 160              		.cfi_def_cfa_offset 32
 161 0004 0746     		mov	r7, r0
 162 0006 0C46     		mov	r4, r1
 163 0008 1546     		mov	r5, r2
 164 000a 1E46     		mov	r6, r3
3491:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint8_t tmpreg;
3492:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3493:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   while ((hspi->Instance->SR & Fifo) != State)
 165              		.loc 1 3493 0
 166 000c 02E0     		b	.L21
 167              	.LVL4:
 168              	.L20:
3494:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3495:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if ((Fifo == SPI_SR_FRLVL) && (State == SPI_FRLVL_EMPTY))
3496:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3497:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       tmpreg = *((__IO uint8_t *)&hspi->Instance->DR);
3498:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* To avoid GCC warning */
3499:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       UNUSED(tmpreg);
3500:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3501:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3502:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (Timeout != HAL_MAX_DELAY)
 169              		.loc 1 3502 0
 170 000e B6F1FF3F 		cmp	r6, #-1
 171 0012 10D1     		bne	.L29
 172              	.L21:
3493:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 173              		.loc 1 3493 0
 174 0014 3A68     		ldr	r2, [r7]
 175 0016 9368     		ldr	r3, [r2, #8]
 176 0018 2340     		ands	r3, r3, r4
 177 001a AB42     		cmp	r3, r5
 178 001c 3FD0     		beq	.L30
3495:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 179              		.loc 1 3495 0
 180 001e B4F5C06F 		cmp	r4, #1536
 181 0022 F4D1     		bne	.L20
3495:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 182              		.loc 1 3495 0 is_stmt 0 discriminator 1
 183 0024 002D     		cmp	r5, #0
 184 0026 F2D1     		bne	.L20
3497:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* To avoid GCC warning */
 185              		.loc 1 3497 0 is_stmt 1
 186 0028 137B     		ldrb	r3, [r2, #12]	@ zero_extendqisi2
 187 002a DBB2     		uxtb	r3, r3
 188 002c 8DF80730 		strb	r3, [sp, #7]
3499:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 189              		.loc 1 3499 0
 190 0030 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 191 0034 EBE7     		b	.L20
 192              	.L29:
3503:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
ARM GAS  /tmp/ccNgnWxc.s 			page 66


3504:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if ((Timeout == 0U) || ((HAL_GetTick() - Tickstart) >= Timeout))
 193              		.loc 1 3504 0
 194 0036 2EB1     		cbz	r6, .L22
 195              		.loc 1 3504 0 is_stmt 0 discriminator 1
 196 0038 FFF7FEFF 		bl	HAL_GetTick
 197              	.LVL5:
 198 003c 089B     		ldr	r3, [sp, #32]
 199 003e C01A     		subs	r0, r0, r3
 200 0040 B042     		cmp	r0, r6
 201 0042 E7D3     		bcc	.L21
 202              	.L22:
3505:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
3506:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Disable the SPI and reset the CRC: the CRC value should be cleared
3507:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****            on both master and slave sides in order to resynchronize the master
3508:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****            and slave for their respective CRC calculation */
3509:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3510:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Disable TXE, RXNE and ERR interrupts for the interrupt process */
3511:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         __HAL_SPI_DISABLE_IT(hspi, (SPI_IT_TXE | SPI_IT_RXNE | SPI_IT_ERR));
 203              		.loc 1 3511 0 is_stmt 1
 204 0044 3A68     		ldr	r2, [r7]
 205 0046 5368     		ldr	r3, [r2, #4]
 206 0048 23F0E003 		bic	r3, r3, #224
 207 004c 5360     		str	r3, [r2, #4]
3512:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3513:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if ((hspi->Init.Mode == SPI_MODE_MASTER) && ((hspi->Init.Direction == SPI_DIRECTION_1LINE)
 208              		.loc 1 3513 0
 209 004e 7B68     		ldr	r3, [r7, #4]
 210 0050 B3F5827F 		cmp	r3, #260
 211 0054 0BD0     		beq	.L31
 212              	.L23:
3514:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                      || (hspi->Init.Direction == SPI_DIRECTION_2LIN
3515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
3516:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           /* Disable SPI peripheral */
3517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           __HAL_SPI_DISABLE(hspi);
3518:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
3519:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3520:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Reset CRC Calculation */
3521:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         if (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 213              		.loc 1 3521 0
 214 0056 BB6A     		ldr	r3, [r7, #40]
 215 0058 B3F5005F 		cmp	r3, #8192
 216 005c 14D0     		beq	.L32
 217              	.L25:
3522:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
3523:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           SPI_RESET_CRC(hspi);
3524:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
3525:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->State = HAL_SPI_STATE_READY;
 218              		.loc 1 3526 0
 219 005e 0123     		movs	r3, #1
 220 0060 87F85D30 		strb	r3, [r7, #93]
3527:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3528:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Process Unlocked */
3529:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         __HAL_UNLOCK(hspi);
 221              		.loc 1 3529 0
 222 0064 0023     		movs	r3, #0
 223 0066 87F85C30 		strb	r3, [r7, #92]
ARM GAS  /tmp/ccNgnWxc.s 			page 67


3530:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3531:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         return HAL_TIMEOUT;
 224              		.loc 1 3531 0
 225 006a 0320     		movs	r0, #3
 226 006c 18E0     		b	.L26
 227              	.L31:
3513:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                      || (hspi->Init.Direction == SPI_DIRECTION_2LIN
 228              		.loc 1 3513 0 discriminator 1
 229 006e BB68     		ldr	r3, [r7, #8]
 230 0070 B3F5004F 		cmp	r3, #32768
 231 0074 02D0     		beq	.L24
3514:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 232              		.loc 1 3514 0
 233 0076 B3F5806F 		cmp	r3, #1024
 234 007a ECD1     		bne	.L23
 235              	.L24:
3517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 236              		.loc 1 3517 0
 237 007c 3A68     		ldr	r2, [r7]
 238 007e 1368     		ldr	r3, [r2]
 239 0080 23F04003 		bic	r3, r3, #64
 240 0084 1360     		str	r3, [r2]
 241 0086 E6E7     		b	.L23
 242              	.L32:
3523:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 243              		.loc 1 3523 0
 244 0088 3A68     		ldr	r2, [r7]
 245 008a 1368     		ldr	r3, [r2]
 246 008c 23F40053 		bic	r3, r3, #8192
 247 0090 1360     		str	r3, [r2]
 248 0092 3A68     		ldr	r2, [r7]
 249 0094 1368     		ldr	r3, [r2]
 250 0096 43F40053 		orr	r3, r3, #8192
 251 009a 1360     		str	r3, [r2]
 252 009c DFE7     		b	.L25
 253              	.L30:
3532:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
3533:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3534:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3536:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return HAL_OK;
 254              		.loc 1 3536 0
 255 009e 0020     		movs	r0, #0
 256              	.L26:
3537:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 257              		.loc 1 3537 0
 258 00a0 03B0     		add	sp, sp, #12
 259              	.LCFI3:
 260              		.cfi_def_cfa_offset 20
 261              		@ sp needed
 262 00a2 F0BD     		pop	{r4, r5, r6, r7, pc}
 263              		.cfi_endproc
 264              	.LFE180:
 266              		.section	.text.SPI_EndRxTxTransaction,"ax",%progbits
 267              		.align	1
 268              		.syntax unified
 269              		.thumb
ARM GAS  /tmp/ccNgnWxc.s 			page 68


 270              		.thumb_func
 271              		.fpu fpv4-sp-d16
 273              	SPI_EndRxTxTransaction:
 274              	.LFB182:
3538:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3539:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3540:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Handle the check of the RX transaction complete.
3541:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3542:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3543:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Timeout: Timeout duration
3544:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Tickstart: tick start value
3545:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
3546:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3547:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static HAL_StatusTypeDef SPI_EndRxTransaction(SPI_HandleTypeDef *hspi,  uint32_t Timeout, uint32_t 
3548:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Init.Mode == SPI_MODE_MASTER) && ((hspi->Init.Direction == SPI_DIRECTION_1LINE)
3550:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                || (hspi->Init.Direction == SPI_DIRECTION_2LINES_RXO
3551:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3552:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Disable SPI peripheral */
3553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_DISABLE(hspi);
3554:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3555:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3556:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Control the BSY flag */
3557:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_BSY, RESET, Timeout, Tickstart) != HAL_OK)
3558:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3559:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
3560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return HAL_TIMEOUT;
3561:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3562:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Init.Mode == SPI_MODE_MASTER) && ((hspi->Init.Direction == SPI_DIRECTION_1LINE)
3564:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                || (hspi->Init.Direction == SPI_DIRECTION_2LINES_RXO
3565:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3566:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Empty the FRLVL fifo */
3567:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (SPI_WaitFifoStateUntilTimeout(hspi, SPI_FLAG_FRLVL, SPI_FRLVL_EMPTY, Timeout, Tickstart) !=
3568:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3569:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
3570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return HAL_TIMEOUT;
3571:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3572:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3573:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return HAL_OK;
3574:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3575:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3576:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3577:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Handle the check of the RXTX or TX transaction complete.
3578:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: SPI handle
3579:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Timeout: Timeout duration
3580:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  Tickstart: tick start value
3581:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval HAL status
3582:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3583:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static HAL_StatusTypeDef SPI_EndRxTxTransaction(SPI_HandleTypeDef *hspi, uint32_t Timeout, uint32_t
3584:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
 275              		.loc 1 3584 0
 276              		.cfi_startproc
 277              		@ args = 0, pretend = 0, frame = 0
 278              		@ frame_needed = 0, uses_anonymous_args = 0
 279              	.LVL6:
 280 0000 70B5     		push	{r4, r5, r6, lr}
ARM GAS  /tmp/ccNgnWxc.s 			page 69


 281              	.LCFI4:
 282              		.cfi_def_cfa_offset 16
 283              		.cfi_offset 4, -16
 284              		.cfi_offset 5, -12
 285              		.cfi_offset 6, -8
 286              		.cfi_offset 14, -4
 287 0002 82B0     		sub	sp, sp, #8
 288              	.LCFI5:
 289              		.cfi_def_cfa_offset 24
 290 0004 0446     		mov	r4, r0
 291 0006 0D46     		mov	r5, r1
 292 0008 1646     		mov	r6, r2
3585:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Control if the TX fifo is empty */
3586:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_WaitFifoStateUntilTimeout(hspi, SPI_FLAG_FTLVL, SPI_FTLVL_EMPTY, Timeout, Tickstart) != H
 293              		.loc 1 3586 0
 294 000a 0092     		str	r2, [sp]
 295 000c 0B46     		mov	r3, r1
 296 000e 0022     		movs	r2, #0
 297              	.LVL7:
 298 0010 4FF4C051 		mov	r1, #6144
 299              	.LVL8:
 300 0014 FFF7FEFF 		bl	SPI_WaitFifoStateUntilTimeout
 301              	.LVL9:
 302 0018 B8B9     		cbnz	r0, .L38
3587:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3588:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
3589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return HAL_TIMEOUT;
3590:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Control the BSY flag */
3592:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_BSY, RESET, Timeout, Tickstart) != HAL_OK)
 303              		.loc 1 3592 0
 304 001a 0096     		str	r6, [sp]
 305 001c 2B46     		mov	r3, r5
 306 001e 0022     		movs	r2, #0
 307 0020 8021     		movs	r1, #128
 308 0022 2046     		mov	r0, r4
 309 0024 FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 310              	.LVL10:
 311 0028 B8B9     		cbnz	r0, .L39
3593:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3594:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
3595:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return HAL_TIMEOUT;
3596:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3597:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3598:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Control if the RX fifo is empty */
3599:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_WaitFifoStateUntilTimeout(hspi, SPI_FLAG_FRLVL, SPI_FRLVL_EMPTY, Timeout, Tickstart) != H
 312              		.loc 1 3599 0
 313 002a 0096     		str	r6, [sp]
 314 002c 2B46     		mov	r3, r5
 315 002e 0022     		movs	r2, #0
 316 0030 4FF4C061 		mov	r1, #1536
 317 0034 2046     		mov	r0, r4
 318 0036 FFF7FEFF 		bl	SPI_WaitFifoStateUntilTimeout
 319              	.LVL11:
 320 003a 0346     		mov	r3, r0
 321 003c 50B1     		cbz	r0, .L35
3600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
ARM GAS  /tmp/ccNgnWxc.s 			page 70


3601:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
 322              		.loc 1 3601 0
 323 003e 236E     		ldr	r3, [r4, #96]
 324 0040 43F02003 		orr	r3, r3, #32
 325 0044 2366     		str	r3, [r4, #96]
3602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return HAL_TIMEOUT;
 326              		.loc 1 3602 0
 327 0046 0323     		movs	r3, #3
 328 0048 04E0     		b	.L35
 329              	.L38:
3588:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return HAL_TIMEOUT;
 330              		.loc 1 3588 0
 331 004a 236E     		ldr	r3, [r4, #96]
 332 004c 43F02003 		orr	r3, r3, #32
 333 0050 2366     		str	r3, [r4, #96]
3589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 334              		.loc 1 3589 0
 335 0052 0323     		movs	r3, #3
 336              	.L35:
3603:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3604:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return HAL_OK;
3605:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 337              		.loc 1 3605 0
 338 0054 1846     		mov	r0, r3
 339 0056 02B0     		add	sp, sp, #8
 340              	.LCFI6:
 341              		.cfi_remember_state
 342              		.cfi_def_cfa_offset 16
 343              		@ sp needed
 344 0058 70BD     		pop	{r4, r5, r6, pc}
 345              	.LVL12:
 346              	.L39:
 347              	.LCFI7:
 348              		.cfi_restore_state
3594:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return HAL_TIMEOUT;
 349              		.loc 1 3594 0
 350 005a 236E     		ldr	r3, [r4, #96]
 351 005c 43F02003 		orr	r3, r3, #32
 352 0060 2366     		str	r3, [r4, #96]
3595:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 353              		.loc 1 3595 0
 354 0062 0323     		movs	r3, #3
 355 0064 F6E7     		b	.L35
 356              		.cfi_endproc
 357              	.LFE182:
 359              		.section	.text.SPI_EndRxTransaction,"ax",%progbits
 360              		.align	1
 361              		.syntax unified
 362              		.thumb
 363              		.thumb_func
 364              		.fpu fpv4-sp-d16
 366              	SPI_EndRxTransaction:
 367              	.LFB181:
3548:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if ((hspi->Init.Mode == SPI_MODE_MASTER) && ((hspi->Init.Direction == SPI_DIRECTION_1LINE)
 368              		.loc 1 3548 0
 369              		.cfi_startproc
 370              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccNgnWxc.s 			page 71


 371              		@ frame_needed = 0, uses_anonymous_args = 0
 372              	.LVL13:
 373 0000 70B5     		push	{r4, r5, r6, lr}
 374              	.LCFI8:
 375              		.cfi_def_cfa_offset 16
 376              		.cfi_offset 4, -16
 377              		.cfi_offset 5, -12
 378              		.cfi_offset 6, -8
 379              		.cfi_offset 14, -4
 380 0002 82B0     		sub	sp, sp, #8
 381              	.LCFI9:
 382              		.cfi_def_cfa_offset 24
 383 0004 0446     		mov	r4, r0
 384 0006 0D46     		mov	r5, r1
 385 0008 1646     		mov	r6, r2
3549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                || (hspi->Init.Direction == SPI_DIRECTION_2LINES_RXO
 386              		.loc 1 3549 0
 387 000a 4368     		ldr	r3, [r0, #4]
 388 000c B3F5827F 		cmp	r3, #260
 389 0010 0FD0     		beq	.L47
 390              	.LVL14:
 391              	.L41:
3557:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 392              		.loc 1 3557 0
 393 0012 0096     		str	r6, [sp]
 394 0014 2B46     		mov	r3, r5
 395 0016 0022     		movs	r2, #0
 396 0018 8021     		movs	r1, #128
 397              	.LVL15:
 398 001a 2046     		mov	r0, r4
 399              	.LVL16:
 400 001c FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 401              	.LVL17:
 402 0020 0346     		mov	r3, r0
 403 0022 98B9     		cbnz	r0, .L48
3563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                || (hspi->Init.Direction == SPI_DIRECTION_2LINES_RXO
 404              		.loc 1 3563 0
 405 0024 6268     		ldr	r2, [r4, #4]
 406 0026 B2F5827F 		cmp	r2, #260
 407 002a 15D0     		beq	.L49
 408              	.L44:
3574:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 409              		.loc 1 3574 0
 410 002c 1846     		mov	r0, r3
 411 002e 02B0     		add	sp, sp, #8
 412              	.LCFI10:
 413              		.cfi_remember_state
 414              		.cfi_def_cfa_offset 16
 415              		@ sp needed
 416 0030 70BD     		pop	{r4, r5, r6, pc}
 417              	.LVL18:
 418              	.L47:
 419              	.LCFI11:
 420              		.cfi_restore_state
3549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                || (hspi->Init.Direction == SPI_DIRECTION_2LINES_RXO
 421              		.loc 1 3549 0 discriminator 1
 422 0032 8368     		ldr	r3, [r0, #8]
ARM GAS  /tmp/ccNgnWxc.s 			page 72


 423 0034 B3F5004F 		cmp	r3, #32768
 424 0038 02D0     		beq	.L42
3550:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 425              		.loc 1 3550 0
 426 003a B3F5806F 		cmp	r3, #1024
 427 003e E8D1     		bne	.L41
 428              	.L42:
3553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 429              		.loc 1 3553 0
 430 0040 2268     		ldr	r2, [r4]
 431              	.LVL19:
 432 0042 1368     		ldr	r3, [r2]
 433 0044 23F04003 		bic	r3, r3, #64
 434 0048 1360     		str	r3, [r2]
 435 004a E2E7     		b	.L41
 436              	.LVL20:
 437              	.L48:
3559:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return HAL_TIMEOUT;
 438              		.loc 1 3559 0
 439 004c 236E     		ldr	r3, [r4, #96]
 440 004e 43F02003 		orr	r3, r3, #32
 441 0052 2366     		str	r3, [r4, #96]
3560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 442              		.loc 1 3560 0
 443 0054 0323     		movs	r3, #3
 444 0056 E9E7     		b	.L44
 445              	.L49:
3563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                                || (hspi->Init.Direction == SPI_DIRECTION_2LINES_RXO
 446              		.loc 1 3563 0 discriminator 1
 447 0058 A268     		ldr	r2, [r4, #8]
 448 005a B2F5004F 		cmp	r2, #32768
 449 005e 02D0     		beq	.L45
3564:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 450              		.loc 1 3564 0
 451 0060 B2F5806F 		cmp	r2, #1024
 452 0064 E2D1     		bne	.L44
 453              	.L45:
3567:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 454              		.loc 1 3567 0
 455 0066 0096     		str	r6, [sp]
 456 0068 2B46     		mov	r3, r5
 457 006a 0022     		movs	r2, #0
 458 006c 4FF4C061 		mov	r1, #1536
 459 0070 2046     		mov	r0, r4
 460 0072 FFF7FEFF 		bl	SPI_WaitFifoStateUntilTimeout
 461              	.LVL21:
 462 0076 0346     		mov	r3, r0
 463 0078 0028     		cmp	r0, #0
 464 007a D7D0     		beq	.L44
3569:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return HAL_TIMEOUT;
 465              		.loc 1 3569 0
 466 007c 236E     		ldr	r3, [r4, #96]
 467 007e 43F02003 		orr	r3, r3, #32
 468 0082 2366     		str	r3, [r4, #96]
3570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 469              		.loc 1 3570 0
 470 0084 0323     		movs	r3, #3
ARM GAS  /tmp/ccNgnWxc.s 			page 73


 471 0086 D1E7     		b	.L44
 472              		.cfi_endproc
 473              	.LFE181:
 475              		.section	.text.SPI_AbortRx_ISR,"ax",%progbits
 476              		.align	1
 477              		.syntax unified
 478              		.thumb
 479              		.thumb_func
 480              		.fpu fpv4-sp-d16
 482              	SPI_AbortRx_ISR:
 483              	.LFB186:
3606:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3607:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3608:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Handle the end of the RXTX transaction.
3609:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3610:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3611:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3613:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_CloseRxTx_ISR(SPI_HandleTypeDef *hspi)
3614:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3615:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
3616:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3617:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Init tickstart for timeout managment*/
3618:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tickstart = HAL_GetTick();
3619:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3620:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable ERR interrupt */
3621:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_DISABLE_IT(hspi, SPI_IT_ERR);
3622:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3623:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check the end of the transaction */
3624:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_EndRxTxTransaction(hspi, SPI_DEFAULT_TIMEOUT, tickstart) != HAL_OK)
3625:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3626:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
3627:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3628:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3630:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if CRC error occurred */
3631:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_CRCERR) != RESET)
3632:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3633:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
3634:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
3635:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
3636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     HAL_SPI_ErrorCallback(hspi);
3637:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
3639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3640:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3641:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->ErrorCode == HAL_SPI_ERROR_NONE)
3642:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3643:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       if (hspi->State == HAL_SPI_STATE_BUSY_RX)
3644:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
3645:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->State = HAL_SPI_STATE_READY;
3646:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         HAL_SPI_RxCpltCallback(hspi);
3647:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
3648:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       else
3649:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
3650:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->State = HAL_SPI_STATE_READY;
3651:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         HAL_SPI_TxRxCpltCallback(hspi);
ARM GAS  /tmp/ccNgnWxc.s 			page 74


3652:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
3653:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3654:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     else
3655:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3656:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->State = HAL_SPI_STATE_READY;
3657:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       HAL_SPI_ErrorCallback(hspi);
3658:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3659:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3660:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3661:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3663:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3664:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3665:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Handle the end of the RX transaction.
3666:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3667:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3668:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3669:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3670:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_CloseRx_ISR(SPI_HandleTypeDef *hspi)
3671:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3672:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable RXNE and ERR interrupt */
3673:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_DISABLE_IT(hspi, (SPI_IT_RXNE | SPI_IT_ERR));
3674:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3675:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check the end of the transaction */
3676:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_EndRxTransaction(hspi, SPI_DEFAULT_TIMEOUT, HAL_GetTick()) != HAL_OK)
3677:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3678:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
3679:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3680:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
3681:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3682:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3683:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check if CRC error occurred */
3684:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_CRCERR) != RESET)
3685:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3686:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
3687:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
3688:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     HAL_SPI_ErrorCallback(hspi);
3689:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3690:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
3691:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3692:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3693:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->ErrorCode == HAL_SPI_ERROR_NONE)
3694:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3695:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       HAL_SPI_RxCpltCallback(hspi);
3696:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3697:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     else
3698:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3699:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       HAL_SPI_ErrorCallback(hspi);
3700:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3701:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3702:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3703:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3704:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3705:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3706:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3707:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Handle the end of the TX transaction.
3708:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
ARM GAS  /tmp/ccNgnWxc.s 			page 75


3709:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3710:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3711:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3712:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_CloseTx_ISR(SPI_HandleTypeDef *hspi)
3713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
3714:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
3715:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3716:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Init tickstart for timeout management*/
3717:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tickstart = HAL_GetTick();
3718:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3719:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable TXE and ERR interrupt */
3720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_DISABLE_IT(hspi, (SPI_IT_TXE | SPI_IT_ERR));
3721:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3722:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check the end of the transaction */
3723:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_EndRxTxTransaction(hspi, SPI_DEFAULT_TIMEOUT, tickstart) != HAL_OK)
3724:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3725:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
3726:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3727:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3728:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Clear overrun flag in 2 Lines communication mode because received is not read */
3729:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.Direction == SPI_DIRECTION_2LINES)
3730:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3731:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_CLEAR_OVRFLAG(hspi);
3732:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3733:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3734:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
3735:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->ErrorCode != HAL_SPI_ERROR_NONE)
3736:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3737:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     HAL_SPI_ErrorCallback(hspi);
3738:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3739:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   else
3740:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3741:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     HAL_SPI_TxCpltCallback(hspi);
3742:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3743:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
3744:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3745:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3746:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Handle abort a Rx transaction.
3747:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3748:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3749:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3750:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3751:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_AbortRx_ISR(SPI_HandleTypeDef *hspi)
3752:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
 484              		.loc 1 3752 0
 485              		.cfi_startproc
 486              		@ args = 0, pretend = 0, frame = 8
 487              		@ frame_needed = 0, uses_anonymous_args = 0
 488              	.LVL22:
 489 0000 10B5     		push	{r4, lr}
 490              	.LCFI12:
 491              		.cfi_def_cfa_offset 8
 492              		.cfi_offset 4, -8
 493              		.cfi_offset 14, -4
 494 0002 84B0     		sub	sp, sp, #16
 495              	.LCFI13:
 496              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/ccNgnWxc.s 			page 76


 497 0004 0446     		mov	r4, r0
3753:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint32_t count;
3754:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
3755:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable SPI Peripheral */
3756:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_DISABLE(hspi);
 498              		.loc 1 3756 0
 499 0006 0268     		ldr	r2, [r0]
 500 0008 1368     		ldr	r3, [r2]
 501 000a 23F04003 		bic	r3, r3, #64
 502 000e 1360     		str	r3, [r2]
3757:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
3758:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   count = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
 503              		.loc 1 3758 0
 504 0010 1D4B     		ldr	r3, .L58
 505 0012 1B68     		ldr	r3, [r3]
 506 0014 1D4A     		ldr	r2, .L58+4
 507 0016 A2FB0323 		umull	r2, r3, r2, r3
 508 001a 5B0A     		lsrs	r3, r3, #9
 509 001c 6422     		movs	r2, #100
 510 001e 02FB03F3 		mul	r3, r2, r3
 511 0022 0393     		str	r3, [sp, #12]
3759:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3760:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable TXEIE, RXNEIE and ERRIE(mode fault event, overrun error, TI frame error) interrupts */
3761:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, (SPI_CR2_TXEIE | SPI_CR2_RXNEIE | SPI_CR2_ERRIE));
 512              		.loc 1 3761 0
 513 0024 0268     		ldr	r2, [r0]
 514 0026 5368     		ldr	r3, [r2, #4]
 515 0028 23F0E003 		bic	r3, r3, #224
 516 002c 5360     		str	r3, [r2, #4]
 517              	.L53:
3762:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
3763:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check RXNEIE is disabled */
3764:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   do
3765:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3766:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (count-- == 0U)
 518              		.loc 1 3766 0
 519 002e 039B     		ldr	r3, [sp, #12]
 520 0030 5A1E     		subs	r2, r3, #1
 521 0032 0392     		str	r2, [sp, #12]
 522 0034 2BB1     		cbz	r3, .L57
3767:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_ABORT);
3769:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       break;
3770:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3771:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3772:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   while (HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_RXNEIE));
 523              		.loc 1 3772 0
 524 0036 2368     		ldr	r3, [r4]
 525 0038 5B68     		ldr	r3, [r3, #4]
 526 003a 13F0400F 		tst	r3, #64
 527 003e F6D1     		bne	.L53
 528 0040 03E0     		b	.L52
 529              	.L57:
3768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       break;
 530              		.loc 1 3768 0
 531 0042 236E     		ldr	r3, [r4, #96]
 532 0044 43F04003 		orr	r3, r3, #64
ARM GAS  /tmp/ccNgnWxc.s 			page 77


 533 0048 2366     		str	r3, [r4, #96]
 534              	.L52:
3773:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3774:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Control the BSY flag */
3775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_BSY, RESET, SPI_DEFAULT_TIMEOUT, HAL_GetTick()) 
 535              		.loc 1 3775 0
 536 004a FFF7FEFF 		bl	HAL_GetTick
 537              	.LVL23:
 538 004e 0090     		str	r0, [sp]
 539 0050 6423     		movs	r3, #100
 540 0052 0022     		movs	r2, #0
 541 0054 8021     		movs	r1, #128
 542 0056 2046     		mov	r0, r4
 543 0058 FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 544              	.LVL24:
 545 005c 08B1     		cbz	r0, .L54
3776:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3777:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
 546              		.loc 1 3777 0
 547 005e 4023     		movs	r3, #64
 548 0060 2366     		str	r3, [r4, #96]
 549              	.L54:
3778:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3779:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3780:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Empty the FRLVL fifo */
3781:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_WaitFifoStateUntilTimeout(hspi, SPI_FLAG_FRLVL, SPI_FRLVL_EMPTY, SPI_DEFAULT_TIMEOUT, HAL
 550              		.loc 1 3781 0
 551 0062 FFF7FEFF 		bl	HAL_GetTick
 552              	.LVL25:
 553 0066 0090     		str	r0, [sp]
 554 0068 6423     		movs	r3, #100
 555 006a 0022     		movs	r2, #0
 556 006c 4FF4C061 		mov	r1, #1536
 557 0070 2046     		mov	r0, r4
 558 0072 FFF7FEFF 		bl	SPI_WaitFifoStateUntilTimeout
 559              	.LVL26:
 560 0076 08B1     		cbz	r0, .L55
3782:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3783:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
 561              		.loc 1 3783 0
 562 0078 4023     		movs	r3, #64
 563 007a 2366     		str	r3, [r4, #96]
 564              	.L55:
3784:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3785:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3786:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_ABORT;
 565              		.loc 1 3786 0
 566 007c 0723     		movs	r3, #7
 567 007e 84F85D30 		strb	r3, [r4, #93]
3787:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 568              		.loc 1 3787 0
 569 0082 04B0     		add	sp, sp, #16
 570              	.LCFI14:
 571              		.cfi_def_cfa_offset 8
 572              		@ sp needed
 573 0084 10BD     		pop	{r4, pc}
 574              	.LVL27:
ARM GAS  /tmp/ccNgnWxc.s 			page 78


 575              	.L59:
 576 0086 00BF     		.align	2
 577              	.L58:
 578 0088 00000000 		.word	SystemCoreClock
 579 008c F1197605 		.word	91625969
 580              		.cfi_endproc
 581              	.LFE186:
 583              		.section	.text.SPI_AbortTx_ISR,"ax",%progbits
 584              		.align	1
 585              		.syntax unified
 586              		.thumb
 587              		.thumb_func
 588              		.fpu fpv4-sp-d16
 590              	SPI_AbortTx_ISR:
 591              	.LFB187:
3788:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3789:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** /**
3790:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @brief  Handle abort a Tx or Rx/Tx transaction.
3791:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3792:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *               the configuration information for SPI module.
3793:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   * @retval None
3794:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   */
3795:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** static void SPI_AbortTx_ISR(SPI_HandleTypeDef *hspi)
3796:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** {
 592              		.loc 1 3796 0
 593              		.cfi_startproc
 594              		@ args = 0, pretend = 0, frame = 8
 595              		@ frame_needed = 0, uses_anonymous_args = 0
 596              	.LVL28:
 597 0000 10B5     		push	{r4, lr}
 598              	.LCFI15:
 599              		.cfi_def_cfa_offset 8
 600              		.cfi_offset 4, -8
 601              		.cfi_offset 14, -4
 602 0002 84B0     		sub	sp, sp, #16
 603              	.LCFI16:
 604              		.cfi_def_cfa_offset 24
 605 0004 0446     		mov	r4, r0
3797:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint32_t count;
3798:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
3799:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   count = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
 606              		.loc 1 3799 0
 607 0006 1F4B     		ldr	r3, .L68
 608 0008 1B68     		ldr	r3, [r3]
 609 000a 1F4A     		ldr	r2, .L68+4
 610 000c A2FB0323 		umull	r2, r3, r2, r3
 611 0010 5B0A     		lsrs	r3, r3, #9
 612 0012 6422     		movs	r2, #100
 613 0014 02FB03F3 		mul	r3, r2, r3
 614 0018 0393     		str	r3, [sp, #12]
3800:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
3801:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable TXEIE, RXNEIE and ERRIE(mode fault event, overrun error, TI frame error) interrupts */
3802:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, (SPI_CR2_TXEIE | SPI_CR2_RXNEIE | SPI_CR2_ERRIE));
 615              		.loc 1 3802 0
 616 001a 0268     		ldr	r2, [r0]
 617 001c 5368     		ldr	r3, [r2, #4]
 618 001e 23F0E003 		bic	r3, r3, #224
ARM GAS  /tmp/ccNgnWxc.s 			page 79


 619 0022 5360     		str	r3, [r2, #4]
 620              	.L63:
3803:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
3804:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check TXEIE is disabled */
3805:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   do
3806:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3807:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (count-- == 0U)
 621              		.loc 1 3807 0
 622 0024 039B     		ldr	r3, [sp, #12]
 623 0026 5A1E     		subs	r2, r3, #1
 624 0028 0392     		str	r2, [sp, #12]
 625 002a 2BB1     		cbz	r3, .L67
3808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
3809:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_ABORT);
3810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       break;
3811:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
3812:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3813:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   while (HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_TXEIE));
 626              		.loc 1 3813 0
 627 002c 2368     		ldr	r3, [r4]
 628 002e 5B68     		ldr	r3, [r3, #4]
 629 0030 13F0800F 		tst	r3, #128
 630 0034 F6D1     		bne	.L63
 631 0036 03E0     		b	.L62
 632              	.L67:
3809:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       break;
 633              		.loc 1 3809 0
 634 0038 236E     		ldr	r3, [r4, #96]
 635 003a 43F04003 		orr	r3, r3, #64
 636 003e 2366     		str	r3, [r4, #96]
 637              	.L62:
3814:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3815:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_EndRxTxTransaction(hspi, SPI_DEFAULT_TIMEOUT, HAL_GetTick()) != HAL_OK)
 638              		.loc 1 3815 0
 639 0040 FFF7FEFF 		bl	HAL_GetTick
 640              	.LVL29:
 641 0044 0246     		mov	r2, r0
 642 0046 6421     		movs	r1, #100
 643 0048 2046     		mov	r0, r4
 644 004a FFF7FEFF 		bl	SPI_EndRxTxTransaction
 645              	.LVL30:
 646 004e 08B1     		cbz	r0, .L64
3816:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3817:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
 647              		.loc 1 3817 0
 648 0050 4023     		movs	r3, #64
 649 0052 2366     		str	r3, [r4, #96]
 650              	.L64:
3818:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3819:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3820:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable SPI Peripheral */
3821:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_DISABLE(hspi);
 651              		.loc 1 3821 0
 652 0054 2268     		ldr	r2, [r4]
 653 0056 1368     		ldr	r3, [r2]
 654 0058 23F04003 		bic	r3, r3, #64
 655 005c 1360     		str	r3, [r2]
ARM GAS  /tmp/ccNgnWxc.s 			page 80


3822:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3823:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Empty the FRLVL fifo */
3824:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (SPI_WaitFifoStateUntilTimeout(hspi, SPI_FLAG_FRLVL, SPI_FRLVL_EMPTY, SPI_DEFAULT_TIMEOUT, HAL
 656              		.loc 1 3824 0
 657 005e FFF7FEFF 		bl	HAL_GetTick
 658              	.LVL31:
 659 0062 0090     		str	r0, [sp]
 660 0064 6423     		movs	r3, #100
 661 0066 0022     		movs	r2, #0
 662 0068 4FF4C061 		mov	r1, #1536
 663 006c 2046     		mov	r0, r4
 664 006e FFF7FEFF 		bl	SPI_WaitFifoStateUntilTimeout
 665              	.LVL32:
 666 0072 08B1     		cbz	r0, .L65
3825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
3826:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
 667              		.loc 1 3826 0
 668 0074 4023     		movs	r3, #64
 669 0076 2366     		str	r3, [r4, #96]
 670              	.L65:
3827:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
3828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
3829:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_ABORT;
 671              		.loc 1 3829 0
 672 0078 0723     		movs	r3, #7
 673 007a 84F85D30 		strb	r3, [r4, #93]
3830:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 674              		.loc 1 3830 0
 675 007e 04B0     		add	sp, sp, #16
 676              	.LCFI17:
 677              		.cfi_def_cfa_offset 8
 678              		@ sp needed
 679 0080 10BD     		pop	{r4, pc}
 680              	.LVL33:
 681              	.L69:
 682 0082 00BF     		.align	2
 683              	.L68:
 684 0084 00000000 		.word	SystemCoreClock
 685 0088 F1197605 		.word	91625969
 686              		.cfi_endproc
 687              	.LFE187:
 689              		.section	.text.HAL_SPI_MspInit,"ax",%progbits
 690              		.align	1
 691              		.weak	HAL_SPI_MspInit
 692              		.syntax unified
 693              		.thumb
 694              		.thumb_func
 695              		.fpu fpv4-sp-d16
 697              	HAL_SPI_MspInit:
 698              	.LFB130:
 434:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 699              		.loc 1 434 0
 700              		.cfi_startproc
 701              		@ args = 0, pretend = 0, frame = 0
 702              		@ frame_needed = 0, uses_anonymous_args = 0
 703              		@ link register save eliminated.
 704              	.LVL34:
ARM GAS  /tmp/ccNgnWxc.s 			page 81


 441:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 705              		.loc 1 441 0
 706 0000 7047     		bx	lr
 707              		.cfi_endproc
 708              	.LFE130:
 710              		.section	.text.HAL_SPI_Init,"ax",%progbits
 711              		.align	1
 712              		.global	HAL_SPI_Init
 713              		.syntax unified
 714              		.thumb
 715              		.thumb_func
 716              		.fpu fpv4-sp-d16
 718              	HAL_SPI_Init:
 719              	.LFB128:
 275:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t frxth;
 720              		.loc 1 275 0
 721              		.cfi_startproc
 722              		@ args = 0, pretend = 0, frame = 0
 723              		@ frame_needed = 0, uses_anonymous_args = 0
 724              	.LVL35:
 279:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 725              		.loc 1 279 0
 726 0000 0028     		cmp	r0, #0
 727 0002 62D0     		beq	.L80
 275:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t frxth;
 728              		.loc 1 275 0
 729 0004 10B5     		push	{r4, lr}
 730              	.LCFI18:
 731              		.cfi_def_cfa_offset 8
 732              		.cfi_offset 4, -8
 733              		.cfi_offset 14, -4
 734 0006 0446     		mov	r4, r0
 310:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 735              		.loc 1 310 0
 736 0008 90F85D30 		ldrb	r3, [r0, #93]	@ zero_extendqisi2
 737 000c 002B     		cmp	r3, #0
 738 000e 47D0     		beq	.L86
 739              	.LVL36:
 740              	.L73:
 319:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 741              		.loc 1 319 0
 742 0010 0223     		movs	r3, #2
 743 0012 84F85D30 		strb	r3, [r4, #93]
 322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 744              		.loc 1 322 0
 745 0016 2268     		ldr	r2, [r4]
 746 0018 1368     		ldr	r3, [r2]
 747 001a 23F04003 		bic	r3, r3, #64
 748 001e 1360     		str	r3, [r2]
 325:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 749              		.loc 1 325 0
 750 0020 E368     		ldr	r3, [r4, #12]
 751 0022 B3F5E06F 		cmp	r3, #1792
 752 0026 40D9     		bls	.L81
 327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 753              		.loc 1 327 0
 754 0028 0022     		movs	r2, #0
ARM GAS  /tmp/ccNgnWxc.s 			page 82


 755              	.L74:
 756              	.LVL37:
 335:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 757              		.loc 1 335 0
 758 002a B3F5706F 		cmp	r3, #3840
 759 002e 04D0     		beq	.L75
 335:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 760              		.loc 1 335 0 is_stmt 0 discriminator 1
 761 0030 B3F5E06F 		cmp	r3, #1792
 762 0034 01D0     		beq	.L75
 338:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 763              		.loc 1 338 0 is_stmt 1
 764 0036 0021     		movs	r1, #0
 765 0038 A162     		str	r1, [r4, #40]
 766              	.L75:
 342:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 767              		.loc 1 342 0
 768 003a 216B     		ldr	r1, [r4, #48]
 769 003c 21B9     		cbnz	r1, .L76
 345:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 770              		.loc 1 345 0
 771 003e B3F5E06F 		cmp	r3, #1792
 772 0042 35D9     		bls	.L77
 347:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 773              		.loc 1 347 0
 774 0044 0223     		movs	r3, #2
 775 0046 2363     		str	r3, [r4, #48]
 776              	.L76:
 358:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                   hspi->Init.CLKPolarity | hspi->Init.CLKPhase | (hspi->Init.NSS & 
 777              		.loc 1 358 0
 778 0048 6368     		ldr	r3, [r4, #4]
 779 004a A168     		ldr	r1, [r4, #8]
 780 004c 0B43     		orrs	r3, r3, r1
 781 004e 2169     		ldr	r1, [r4, #16]
 782 0050 0B43     		orrs	r3, r3, r1
 783 0052 6169     		ldr	r1, [r4, #20]
 784 0054 0B43     		orrs	r3, r3, r1
 785 0056 A169     		ldr	r1, [r4, #24]
 786 0058 01F40071 		and	r1, r1, #512
 787 005c 0B43     		orrs	r3, r3, r1
 788 005e E169     		ldr	r1, [r4, #28]
 789 0060 0B43     		orrs	r3, r3, r1
 790 0062 216A     		ldr	r1, [r4, #32]
 791 0064 0B43     		orrs	r3, r3, r1
 792 0066 A06A     		ldr	r0, [r4, #40]
 793 0068 2168     		ldr	r1, [r4]
 794 006a 0343     		orrs	r3, r3, r0
 795 006c 0B60     		str	r3, [r1]
 363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 796              		.loc 1 363 0
 797 006e 236B     		ldr	r3, [r4, #48]
 798 0070 022B     		cmp	r3, #2
 799 0072 20D0     		beq	.L87
 800              	.L78:
 370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                   hspi->Init.NSSPMode | hspi->Init.DataSize) | frxth);
 801              		.loc 1 370 0
 802 0074 638B     		ldrh	r3, [r4, #26]
ARM GAS  /tmp/ccNgnWxc.s 			page 83


 803 0076 03F00403 		and	r3, r3, #4
 804 007a 616A     		ldr	r1, [r4, #36]
 805 007c 0B43     		orrs	r3, r3, r1
 806 007e 616B     		ldr	r1, [r4, #52]
 807 0080 0B43     		orrs	r3, r3, r1
 808 0082 E168     		ldr	r1, [r4, #12]
 809 0084 0B43     		orrs	r3, r3, r1
 810 0086 2168     		ldr	r1, [r4]
 811 0088 1343     		orrs	r3, r3, r2
 812 008a 4B60     		str	r3, [r1, #4]
 376:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 813              		.loc 1 376 0
 814 008c A36A     		ldr	r3, [r4, #40]
 815 008e B3F5005F 		cmp	r3, #8192
 816 0092 16D0     		beq	.L88
 817              	.LVL38:
 818              	.L79:
 387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State     = HAL_SPI_STATE_READY;
 819              		.loc 1 387 0
 820 0094 0020     		movs	r0, #0
 821 0096 2066     		str	r0, [r4, #96]
 388:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 822              		.loc 1 388 0
 823 0098 0123     		movs	r3, #1
 824 009a 84F85D30 		strb	r3, [r4, #93]
 391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 825              		.loc 1 391 0
 826 009e 10BD     		pop	{r4, pc}
 827              	.LVL39:
 828              	.L86:
 313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 829              		.loc 1 313 0
 830 00a0 80F85C30 		strb	r3, [r0, #92]
 316:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 831              		.loc 1 316 0
 832 00a4 FFF7FEFF 		bl	HAL_SPI_MspInit
 833              	.LVL40:
 834 00a8 B2E7     		b	.L73
 835              	.L81:
 331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 836              		.loc 1 331 0
 837 00aa 4FF48052 		mov	r2, #4096
 838 00ae BCE7     		b	.L74
 839              	.LVL41:
 840              	.L77:
 351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 841              		.loc 1 351 0
 842 00b0 0123     		movs	r3, #1
 843 00b2 2363     		str	r3, [r4, #48]
 844 00b4 C8E7     		b	.L76
 845              	.L87:
 365:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 846              		.loc 1 365 0
 847 00b6 2168     		ldr	r1, [r4]
 848 00b8 0B68     		ldr	r3, [r1]
 849 00ba 43F40063 		orr	r3, r3, #2048
 850 00be 0B60     		str	r3, [r1]
ARM GAS  /tmp/ccNgnWxc.s 			page 84


 851 00c0 D8E7     		b	.L78
 852              	.L88:
 378:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 853              		.loc 1 378 0
 854 00c2 2368     		ldr	r3, [r4]
 855 00c4 E26A     		ldr	r2, [r4, #44]
 856              	.LVL42:
 857 00c6 1A61     		str	r2, [r3, #16]
 858 00c8 E4E7     		b	.L79
 859              	.LVL43:
 860              	.L80:
 861              	.LCFI19:
 862              		.cfi_def_cfa_offset 0
 863              		.cfi_restore 4
 864              		.cfi_restore 14
 281:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 865              		.loc 1 281 0
 866 00ca 0120     		movs	r0, #1
 867              	.LVL44:
 391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 868              		.loc 1 391 0
 869 00cc 7047     		bx	lr
 870              		.cfi_endproc
 871              	.LFE128:
 873              		.section	.text.HAL_SPI_MspDeInit,"ax",%progbits
 874              		.align	1
 875              		.weak	HAL_SPI_MspDeInit
 876              		.syntax unified
 877              		.thumb
 878              		.thumb_func
 879              		.fpu fpv4-sp-d16
 881              	HAL_SPI_MspDeInit:
 882              	.LFB131:
 450:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 883              		.loc 1 450 0
 884              		.cfi_startproc
 885              		@ args = 0, pretend = 0, frame = 0
 886              		@ frame_needed = 0, uses_anonymous_args = 0
 887              		@ link register save eliminated.
 888              	.LVL45:
 457:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 889              		.loc 1 457 0
 890 0000 7047     		bx	lr
 891              		.cfi_endproc
 892              	.LFE131:
 894              		.section	.text.HAL_SPI_DeInit,"ax",%progbits
 895              		.align	1
 896              		.global	HAL_SPI_DeInit
 897              		.syntax unified
 898              		.thumb
 899              		.thumb_func
 900              		.fpu fpv4-sp-d16
 902              	HAL_SPI_DeInit:
 903              	.LFB129:
 400:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check the SPI handle allocation */
 904              		.loc 1 400 0
 905              		.cfi_startproc
ARM GAS  /tmp/ccNgnWxc.s 			page 85


 906              		@ args = 0, pretend = 0, frame = 0
 907              		@ frame_needed = 0, uses_anonymous_args = 0
 908              	.LVL46:
 402:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 909              		.loc 1 402 0
 910 0000 90B1     		cbz	r0, .L92
 400:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Check the SPI handle allocation */
 911              		.loc 1 400 0
 912 0002 10B5     		push	{r4, lr}
 913              	.LCFI20:
 914              		.cfi_def_cfa_offset 8
 915              		.cfi_offset 4, -8
 916              		.cfi_offset 14, -4
 917 0004 0446     		mov	r4, r0
 410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 918              		.loc 1 410 0
 919 0006 0223     		movs	r3, #2
 920 0008 80F85D30 		strb	r3, [r0, #93]
 413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 921              		.loc 1 413 0
 922 000c 0268     		ldr	r2, [r0]
 923 000e 1368     		ldr	r3, [r2]
 924 0010 23F04003 		bic	r3, r3, #64
 925 0014 1360     		str	r3, [r2]
 416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 926              		.loc 1 416 0
 927 0016 FFF7FEFF 		bl	HAL_SPI_MspDeInit
 928              	.LVL47:
 418:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_RESET;
 929              		.loc 1 418 0
 930 001a 0020     		movs	r0, #0
 931 001c 2066     		str	r0, [r4, #96]
 419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 932              		.loc 1 419 0
 933 001e 84F85D00 		strb	r0, [r4, #93]
 422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 934              		.loc 1 422 0
 935 0022 84F85C00 		strb	r0, [r4, #92]
 425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 936              		.loc 1 425 0
 937 0026 10BD     		pop	{r4, pc}
 938              	.LVL48:
 939              	.L92:
 940              	.LCFI21:
 941              		.cfi_def_cfa_offset 0
 942              		.cfi_restore 4
 943              		.cfi_restore 14
 404:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 944              		.loc 1 404 0
 945 0028 0120     		movs	r0, #1
 946              	.LVL49:
 425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 947              		.loc 1 425 0
 948 002a 7047     		bx	lr
 949              		.cfi_endproc
 950              	.LFE129:
 952              		.section	.text.HAL_SPI_Transmit,"ax",%progbits
ARM GAS  /tmp/ccNgnWxc.s 			page 86


 953              		.align	1
 954              		.global	HAL_SPI_Transmit
 955              		.syntax unified
 956              		.thumb
 957              		.thumb_func
 958              		.fpu fpv4-sp-d16
 960              	HAL_SPI_Transmit:
 961              	.LFB132:
 506:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
 962              		.loc 1 506 0
 963              		.cfi_startproc
 964              		@ args = 0, pretend = 0, frame = 8
 965              		@ frame_needed = 0, uses_anonymous_args = 0
 966              	.LVL50:
 967 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 968              	.LCFI22:
 969              		.cfi_def_cfa_offset 24
 970              		.cfi_offset 4, -24
 971              		.cfi_offset 5, -20
 972              		.cfi_offset 6, -16
 973              		.cfi_offset 7, -12
 974              		.cfi_offset 8, -8
 975              		.cfi_offset 14, -4
 976 0004 82B0     		sub	sp, sp, #8
 977              	.LCFI23:
 978              		.cfi_def_cfa_offset 32
 979 0006 1E46     		mov	r6, r3
 980              	.LVL51:
 515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 981              		.loc 1 515 0
 982 0008 90F85C30 		ldrb	r3, [r0, #92]	@ zero_extendqisi2
 983              	.LVL52:
 984 000c 012B     		cmp	r3, #1
 985 000e 00F0F080 		beq	.L122
 986 0012 0446     		mov	r4, r0
 987 0014 0D46     		mov	r5, r1
 988 0016 9046     		mov	r8, r2
 515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 989              		.loc 1 515 0 is_stmt 0 discriminator 2
 990 0018 0123     		movs	r3, #1
 991 001a 80F85C30 		strb	r3, [r0, #92]
 518:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 992              		.loc 1 518 0 is_stmt 1 discriminator 2
 993 001e FFF7FEFF 		bl	HAL_GetTick
 994              	.LVL53:
 995 0022 0746     		mov	r7, r0
 996              	.LVL54:
 520:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 997              		.loc 1 520 0 discriminator 2
 998 0024 94F85D30 		ldrb	r3, [r4, #93]	@ zero_extendqisi2
 999 0028 DBB2     		uxtb	r3, r3
 1000 002a 012B     		cmp	r3, #1
 1001 002c 09D0     		beq	.L132
 522:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 1002              		.loc 1 522 0
 1003 002e 0220     		movs	r0, #2
 1004              	.LVL55:
ARM GAS  /tmp/ccNgnWxc.s 			page 87


 1005              	.L99:
 670:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Unlocked */
 1006              		.loc 1 670 0
 1007 0030 0123     		movs	r3, #1
 1008 0032 84F85D30 		strb	r3, [r4, #93]
 672:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
 1009              		.loc 1 672 0
 1010 0036 0023     		movs	r3, #0
 1011 0038 84F85C30 		strb	r3, [r4, #92]
 1012              	.LVL56:
 1013              	.L98:
 674:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1014              		.loc 1 674 0
 1015 003c 02B0     		add	sp, sp, #8
 1016              	.LCFI24:
 1017              		.cfi_remember_state
 1018              		.cfi_def_cfa_offset 24
 1019              		@ sp needed
 1020 003e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1021              	.LVL57:
 1022              	.L132:
 1023              	.LCFI25:
 1024              		.cfi_restore_state
 526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1025              		.loc 1 526 0
 1026 0042 002D     		cmp	r5, #0
 1027 0044 00F0CB80 		beq	.L124
 526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1028              		.loc 1 526 0 is_stmt 0 discriminator 1
 1029 0048 B8F1000F 		cmp	r8, #0
 1030 004c 00F0C980 		beq	.L125
 533:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 1031              		.loc 1 533 0 is_stmt 1
 1032 0050 0323     		movs	r3, #3
 1033 0052 84F85D30 		strb	r3, [r4, #93]
 534:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
 1034              		.loc 1 534 0
 1035 0056 0023     		movs	r3, #0
 1036 0058 2366     		str	r3, [r4, #96]
 535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 1037              		.loc 1 535 0
 1038 005a A563     		str	r5, [r4, #56]
 536:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = Size;
 1039              		.loc 1 536 0
 1040 005c A4F83C80 		strh	r8, [r4, #60]	@ movhi
 537:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1041              		.loc 1 537 0
 1042 0060 A4F83E80 		strh	r8, [r4, #62]	@ movhi
 540:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = 0U;
 1043              		.loc 1 540 0
 1044 0064 2364     		str	r3, [r4, #64]
 541:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = 0U;
 1045              		.loc 1 541 0
 1046 0066 A4F84430 		strh	r3, [r4, #68]	@ movhi
 542:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
 1047              		.loc 1 542 0
 1048 006a A4F84630 		strh	r3, [r4, #70]	@ movhi
ARM GAS  /tmp/ccNgnWxc.s 			page 88


 543:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxISR       = NULL;
 1049              		.loc 1 543 0
 1050 006e 2365     		str	r3, [r4, #80]
 544:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1051              		.loc 1 544 0
 1052 0070 E364     		str	r3, [r4, #76]
 547:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1053              		.loc 1 547 0
 1054 0072 A368     		ldr	r3, [r4, #8]
 1055 0074 B3F5004F 		cmp	r3, #32768
 1056 0078 1FD0     		beq	.L133
 1057              	.L100:
 554:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1058              		.loc 1 554 0
 1059 007a A36A     		ldr	r3, [r4, #40]
 1060 007c B3F5005F 		cmp	r3, #8192
 1061 0080 21D0     		beq	.L134
 1062              	.L101:
 561:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1063              		.loc 1 561 0
 1064 0082 2368     		ldr	r3, [r4]
 1065 0084 1A68     		ldr	r2, [r3]
 1066 0086 12F0400F 		tst	r2, #64
 1067 008a 03D1     		bne	.L102
 564:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1068              		.loc 1 564 0
 1069 008c 1A68     		ldr	r2, [r3]
 1070 008e 42F04002 		orr	r2, r2, #64
 1071 0092 1A60     		str	r2, [r3]
 1072              	.L102:
 568:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1073              		.loc 1 568 0
 1074 0094 E368     		ldr	r3, [r4, #12]
 1075 0096 B3F5E06F 		cmp	r3, #1792
 1076 009a 3DD9     		bls	.L103
 570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1077              		.loc 1 570 0
 1078 009c 6368     		ldr	r3, [r4, #4]
 1079 009e 1BB1     		cbz	r3, .L104
 570:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1080              		.loc 1 570 0 is_stmt 0 discriminator 1
 1081 00a0 E38F     		ldrh	r3, [r4, #62]
 1082 00a2 9BB2     		uxth	r3, r3
 1083 00a4 012B     		cmp	r3, #1
 1084 00a6 1FD1     		bne	.L106
 1085              	.L104:
 572:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       pData += sizeof(uint16_t);
 1086              		.loc 1 572 0 is_stmt 1
 1087 00a8 2368     		ldr	r3, [r4]
 1088 00aa 35F8022B 		ldrh	r2, [r5], #2
 1089              	.LVL58:
 1090 00ae DA60     		str	r2, [r3, #12]
 1091              	.LVL59:
 574:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 1092              		.loc 1 574 0
 1093 00b0 E38F     		ldrh	r3, [r4, #62]
 1094 00b2 013B     		subs	r3, r3, #1
ARM GAS  /tmp/ccNgnWxc.s 			page 89


 1095 00b4 9BB2     		uxth	r3, r3
 1096 00b6 E387     		strh	r3, [r4, #62]	@ movhi
 1097 00b8 16E0     		b	.L106
 1098              	.L133:
 549:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1099              		.loc 1 549 0
 1100 00ba 2268     		ldr	r2, [r4]
 1101 00bc 1368     		ldr	r3, [r2]
 1102 00be 43F48043 		orr	r3, r3, #16384
 1103 00c2 1360     		str	r3, [r2]
 1104 00c4 D9E7     		b	.L100
 1105              	.L134:
 556:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1106              		.loc 1 556 0
 1107 00c6 2268     		ldr	r2, [r4]
 1108 00c8 1368     		ldr	r3, [r2]
 1109 00ca 23F40053 		bic	r3, r3, #8192
 1110 00ce 1360     		str	r3, [r2]
 1111 00d0 2268     		ldr	r2, [r4]
 1112 00d2 1368     		ldr	r3, [r2]
 1113 00d4 43F40053 		orr	r3, r3, #8192
 1114 00d8 1360     		str	r3, [r2]
 1115 00da D2E7     		b	.L101
 1116              	.LVL60:
 1117              	.L107:
 589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1118              		.loc 1 589 0
 1119 00dc 002E     		cmp	r6, #0
 1120 00de 00F08280 		beq	.L126
 589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1121              		.loc 1 589 0 is_stmt 0 discriminator 1
 1122 00e2 B6F1FF3F 		cmp	r6, #-1
 1123 00e6 10D1     		bne	.L135
 1124              	.L106:
 577:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1125              		.loc 1 577 0 is_stmt 1
 1126 00e8 E38F     		ldrh	r3, [r4, #62]
 1127 00ea 9BB2     		uxth	r3, r3
 1128 00ec 002B     		cmp	r3, #0
 1129 00ee 57D0     		beq	.L110
 580:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1130              		.loc 1 580 0
 1131 00f0 2368     		ldr	r3, [r4]
 1132 00f2 9A68     		ldr	r2, [r3, #8]
 1133 00f4 12F0020F 		tst	r2, #2
 1134 00f8 F0D0     		beq	.L107
 582:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pData += sizeof(uint16_t);
 1135              		.loc 1 582 0
 1136 00fa 35F8022B 		ldrh	r2, [r5], #2
 1137              	.LVL61:
 1138 00fe DA60     		str	r2, [r3, #12]
 1139              	.LVL62:
 584:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 1140              		.loc 1 584 0
 1141 0100 E38F     		ldrh	r3, [r4, #62]
 1142 0102 013B     		subs	r3, r3, #1
 1143 0104 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccNgnWxc.s 			page 90


 1144 0106 E387     		strh	r3, [r4, #62]	@ movhi
 1145 0108 EEE7     		b	.L106
 1146              	.L135:
 589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1147              		.loc 1 589 0 discriminator 2
 1148 010a FFF7FEFF 		bl	HAL_GetTick
 1149              	.LVL63:
 1150 010e C01B     		subs	r0, r0, r7
 1151 0110 B042     		cmp	r0, r6
 1152 0112 E9D3     		bcc	.L106
 591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 1153              		.loc 1 591 0
 1154 0114 0320     		movs	r0, #3
 1155 0116 8BE7     		b	.L99
 1156              	.LVL64:
 1157              	.L103:
 600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1158              		.loc 1 600 0
 1159 0118 6368     		ldr	r3, [r4, #4]
 1160 011a 1BB1     		cbz	r3, .L111
 600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1161              		.loc 1 600 0 is_stmt 0 discriminator 1
 1162 011c E38F     		ldrh	r3, [r4, #62]
 1163 011e 9BB2     		uxth	r3, r3
 1164 0120 012B     		cmp	r3, #1
 1165 0122 22D1     		bne	.L114
 1166              	.L111:
 602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1167              		.loc 1 602 0 is_stmt 1
 1168 0124 E38F     		ldrh	r3, [r4, #62]
 1169 0126 9BB2     		uxth	r3, r3
 1170 0128 012B     		cmp	r3, #1
 1171 012a 08D9     		bls	.L113
 605:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pData += sizeof(uint16_t);
 1172              		.loc 1 605 0
 1173 012c 2368     		ldr	r3, [r4]
 1174 012e 35F8022B 		ldrh	r2, [r5], #2
 1175              	.LVL65:
 1176 0132 DA60     		str	r2, [r3, #12]
 1177              	.LVL66:
 607:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 1178              		.loc 1 607 0
 1179 0134 E38F     		ldrh	r3, [r4, #62]
 1180 0136 023B     		subs	r3, r3, #2
 1181 0138 9BB2     		uxth	r3, r3
 1182 013a E387     		strh	r3, [r4, #62]	@ movhi
 1183 013c 15E0     		b	.L114
 1184              	.L113:
 1185              	.LVL67:
 611:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount--;
 1186              		.loc 1 611 0
 1187 013e 2368     		ldr	r3, [r4]
 1188 0140 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 1189 0142 1A73     		strb	r2, [r3, #12]
 612:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 1190              		.loc 1 612 0
 1191 0144 E38F     		ldrh	r3, [r4, #62]
ARM GAS  /tmp/ccNgnWxc.s 			page 91


 1192 0146 013B     		subs	r3, r3, #1
 1193 0148 9BB2     		uxth	r3, r3
 1194 014a E387     		strh	r3, [r4, #62]	@ movhi
 611:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount--;
 1195              		.loc 1 611 0
 1196 014c 0135     		adds	r5, r5, #1
 1197              	.LVL68:
 1198 014e 0CE0     		b	.L114
 1199              	.LVL69:
 1200              	.L116:
 629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->TxXferCount--;
 1201              		.loc 1 629 0
 1202 0150 2A78     		ldrb	r2, [r5]	@ zero_extendqisi2
 1203 0152 1A73     		strb	r2, [r3, #12]
 630:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 1204              		.loc 1 630 0
 1205 0154 E38F     		ldrh	r3, [r4, #62]
 1206 0156 013B     		subs	r3, r3, #1
 1207 0158 9BB2     		uxth	r3, r3
 1208 015a E387     		strh	r3, [r4, #62]	@ movhi
 629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->TxXferCount--;
 1209              		.loc 1 629 0
 1210 015c 0135     		adds	r5, r5, #1
 1211              	.LVL70:
 1212 015e 04E0     		b	.L114
 1213              	.L115:
 636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1214              		.loc 1 636 0
 1215 0160 002E     		cmp	r6, #0
 1216 0162 42D0     		beq	.L128
 636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1217              		.loc 1 636 0 is_stmt 0 discriminator 1
 1218 0164 B6F1FF3F 		cmp	r6, #-1
 1219 0168 13D1     		bne	.L136
 1220              	.L114:
 615:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1221              		.loc 1 615 0 is_stmt 1
 1222 016a E38F     		ldrh	r3, [r4, #62]
 1223 016c 9BB2     		uxth	r3, r3
 1224 016e BBB1     		cbz	r3, .L110
 618:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1225              		.loc 1 618 0
 1226 0170 2368     		ldr	r3, [r4]
 1227 0172 9A68     		ldr	r2, [r3, #8]
 1228 0174 12F0020F 		tst	r2, #2
 1229 0178 F2D0     		beq	.L115
 620:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1230              		.loc 1 620 0
 1231 017a E28F     		ldrh	r2, [r4, #62]
 1232 017c 92B2     		uxth	r2, r2
 1233 017e 012A     		cmp	r2, #1
 1234 0180 E6D9     		bls	.L116
 623:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           pData += sizeof(uint16_t);
 1235              		.loc 1 623 0
 1236 0182 35F8022B 		ldrh	r2, [r5], #2
 1237              	.LVL71:
 1238 0186 DA60     		str	r2, [r3, #12]
ARM GAS  /tmp/ccNgnWxc.s 			page 92


 1239              	.LVL72:
 625:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 1240              		.loc 1 625 0
 1241 0188 E38F     		ldrh	r3, [r4, #62]
 1242 018a 023B     		subs	r3, r3, #2
 1243 018c 9BB2     		uxth	r3, r3
 1244 018e E387     		strh	r3, [r4, #62]	@ movhi
 1245 0190 EBE7     		b	.L114
 1246              	.L136:
 636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1247              		.loc 1 636 0 discriminator 2
 1248 0192 FFF7FEFF 		bl	HAL_GetTick
 1249              	.LVL73:
 1250 0196 C01B     		subs	r0, r0, r7
 1251 0198 B042     		cmp	r0, r6
 1252 019a E6D3     		bcc	.L114
 638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 1253              		.loc 1 638 0
 1254 019c 0320     		movs	r0, #3
 1255 019e 47E7     		b	.L99
 1256              	.L110:
 646:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1257              		.loc 1 646 0
 1258 01a0 A36A     		ldr	r3, [r4, #40]
 1259 01a2 B3F5005F 		cmp	r3, #8192
 1260 01a6 14D0     		beq	.L137
 1261              	.L119:
 653:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1262              		.loc 1 653 0
 1263 01a8 3A46     		mov	r2, r7
 1264 01aa 3146     		mov	r1, r6
 1265 01ac 2046     		mov	r0, r4
 1266 01ae FFF7FEFF 		bl	SPI_EndRxTxTransaction
 1267              	.LVL74:
 1268 01b2 08B1     		cbz	r0, .L120
 655:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1269              		.loc 1 655 0
 1270 01b4 2023     		movs	r3, #32
 1271 01b6 2366     		str	r3, [r4, #96]
 1272              	.L120:
 659:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1273              		.loc 1 659 0
 1274 01b8 A368     		ldr	r3, [r4, #8]
 1275 01ba 33B9     		cbnz	r3, .L121
 1276              	.LBB2:
 661:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1277              		.loc 1 661 0
 1278 01bc 0193     		str	r3, [sp, #4]
 1279 01be 2368     		ldr	r3, [r4]
 1280 01c0 DA68     		ldr	r2, [r3, #12]
 1281 01c2 0192     		str	r2, [sp, #4]
 1282 01c4 9B68     		ldr	r3, [r3, #8]
 1283 01c6 0193     		str	r3, [sp, #4]
 1284 01c8 019B     		ldr	r3, [sp, #4]
 1285              	.L121:
 1286              	.LBE2:
 664:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
ARM GAS  /tmp/ccNgnWxc.s 			page 93


 1287              		.loc 1 664 0
 1288 01ca 236E     		ldr	r3, [r4, #96]
 1289 01cc 7BB9     		cbnz	r3, .L130
 508:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1290              		.loc 1 508 0
 1291 01ce 0020     		movs	r0, #0
 1292 01d0 2EE7     		b	.L99
 1293              	.L137:
 648:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1294              		.loc 1 648 0
 1295 01d2 2268     		ldr	r2, [r4]
 1296 01d4 1368     		ldr	r3, [r2]
 1297 01d6 43F48053 		orr	r3, r3, #4096
 1298 01da 1360     		str	r3, [r2]
 1299 01dc E4E7     		b	.L119
 1300              	.LVL75:
 1301              	.L124:
 528:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 1302              		.loc 1 528 0
 1303 01de 0120     		movs	r0, #1
 1304              	.LVL76:
 1305 01e0 26E7     		b	.L99
 1306              	.LVL77:
 1307              	.L125:
 1308 01e2 0120     		movs	r0, #1
 1309              	.LVL78:
 1310 01e4 24E7     		b	.L99
 1311              	.L126:
 591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 1312              		.loc 1 591 0
 1313 01e6 0320     		movs	r0, #3
 1314 01e8 22E7     		b	.L99
 1315              	.L128:
 638:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 1316              		.loc 1 638 0
 1317 01ea 0320     		movs	r0, #3
 1318 01ec 20E7     		b	.L99
 1319              	.L130:
 666:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1320              		.loc 1 666 0
 1321 01ee 0120     		movs	r0, #1
 1322 01f0 1EE7     		b	.L99
 1323              	.LVL79:
 1324              	.L122:
 515:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1325              		.loc 1 515 0
 1326 01f2 0220     		movs	r0, #2
 1327              	.LVL80:
 1328 01f4 22E7     		b	.L98
 1329              		.cfi_endproc
 1330              	.LFE132:
 1332              		.section	.text.HAL_SPI_TransmitReceive,"ax",%progbits
 1333              		.align	1
 1334              		.global	HAL_SPI_TransmitReceive
 1335              		.syntax unified
 1336              		.thumb
 1337              		.thumb_func
ARM GAS  /tmp/ccNgnWxc.s 			page 94


 1338              		.fpu fpv4-sp-d16
 1340              	HAL_SPI_TransmitReceive:
 1341              	.LFB134:
 919:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tmp = 0U, tmp1 = 0U;
 1342              		.loc 1 919 0
 1343              		.cfi_startproc
 1344              		@ args = 4, pretend = 0, frame = 8
 1345              		@ frame_needed = 0, uses_anonymous_args = 0
 1346              	.LVL81:
 1347 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1348              	.LCFI26:
 1349              		.cfi_def_cfa_offset 28
 1350              		.cfi_offset 4, -28
 1351              		.cfi_offset 5, -24
 1352              		.cfi_offset 6, -20
 1353              		.cfi_offset 7, -16
 1354              		.cfi_offset 8, -12
 1355              		.cfi_offset 9, -8
 1356              		.cfi_offset 14, -4
 1357 0004 85B0     		sub	sp, sp, #20
 1358              	.LCFI27:
 1359              		.cfi_def_cfa_offset 48
 1360 0006 9946     		mov	r9, r3
 1361 0008 0C9D     		ldr	r5, [sp, #48]
 1362              	.LVL82:
 922:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 1363              		.loc 1 922 0
 1364 000a 0023     		movs	r3, #0
 1365              	.LVL83:
 1366 000c ADF80E30 		strh	r3, [sp, #14]	@ movhi
 1367              	.LVL84:
 934:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1368              		.loc 1 934 0
 1369 0010 90F85C30 		ldrb	r3, [r0, #92]	@ zero_extendqisi2
 1370 0014 012B     		cmp	r3, #1
 1371 0016 00F0EA81 		beq	.L176
 1372 001a 0446     		mov	r4, r0
 1373 001c 0F46     		mov	r7, r1
 1374 001e 1646     		mov	r6, r2
 934:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1375              		.loc 1 934 0 is_stmt 0 discriminator 2
 1376 0020 0123     		movs	r3, #1
 1377 0022 80F85C30 		strb	r3, [r0, #92]
 937:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1378              		.loc 1 937 0 is_stmt 1 discriminator 2
 1379 0026 FFF7FEFF 		bl	HAL_GetTick
 1380              	.LVL85:
 1381 002a 8046     		mov	r8, r0
 1382              	.LVL86:
 939:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
 1383              		.loc 1 939 0 discriminator 2
 1384 002c 94F85D30 		ldrb	r3, [r4, #93]	@ zero_extendqisi2
 1385 0030 DBB2     		uxtb	r3, r3
 1386              	.LVL87:
 940:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1387              		.loc 1 940 0 discriminator 2
 1388 0032 6268     		ldr	r2, [r4, #4]
ARM GAS  /tmp/ccNgnWxc.s 			page 95


 1389              	.LVL88:
 942:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL
 1390              		.loc 1 942 0 discriminator 2
 1391 0034 012B     		cmp	r3, #1
 1392 0036 15D0     		beq	.L140
 942:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL
 1393              		.loc 1 942 0 is_stmt 0 discriminator 1
 1394 0038 B2F5827F 		cmp	r2, #260
 1395 003c 0AD0     		beq	.L193
 945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 1396              		.loc 1 945 0 is_stmt 1
 1397 003e 0226     		movs	r6, #2
 1398              	.LVL89:
 1399              	.L141:
1195:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
 1400              		.loc 1 1195 0
 1401 0040 0123     		movs	r3, #1
 1402 0042 84F85D30 		strb	r3, [r4, #93]
1196:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
 1403              		.loc 1 1196 0
 1404 0046 0023     		movs	r3, #0
 1405 0048 84F85C30 		strb	r3, [r4, #92]
 1406              	.LVL90:
 1407              	.L139:
1198:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1408              		.loc 1 1198 0
 1409 004c 3046     		mov	r0, r6
 1410 004e 05B0     		add	sp, sp, #20
 1411              	.LCFI28:
 1412              		.cfi_remember_state
 1413              		.cfi_def_cfa_offset 28
 1414              		@ sp needed
 1415 0050 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1416              	.LVL91:
 1417              	.L193:
 1418              	.LCFI29:
 1419              		.cfi_restore_state
 943:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1420              		.loc 1 943 0
 1421 0054 A268     		ldr	r2, [r4, #8]
 1422              	.LVL92:
 1423 0056 002A     		cmp	r2, #0
 1424 0058 40F0C181 		bne	.L178
 943:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1425              		.loc 1 943 0 is_stmt 0 discriminator 1
 1426 005c 042B     		cmp	r3, #4
 1427 005e 01D0     		beq	.L140
 945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 1428              		.loc 1 945 0 is_stmt 1
 1429 0060 0226     		movs	r6, #2
 1430              	.LVL93:
 1431 0062 EDE7     		b	.L141
 1432              	.LVL94:
 1433              	.L140:
 949:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1434              		.loc 1 949 0
 1435 0064 002F     		cmp	r7, #0
ARM GAS  /tmp/ccNgnWxc.s 			page 96


 1436 0066 00F0BC81 		beq	.L180
 949:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1437              		.loc 1 949 0 is_stmt 0 discriminator 1
 1438 006a 002E     		cmp	r6, #0
 1439 006c 00F0BB81 		beq	.L181
 949:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1440              		.loc 1 949 0 discriminator 2
 1441 0070 B9F1000F 		cmp	r9, #0
 1442 0074 00F0B981 		beq	.L182
 956:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1443              		.loc 1 956 0 is_stmt 1
 1444 0078 94F85D30 		ldrb	r3, [r4, #93]	@ zero_extendqisi2
 1445              	.LVL95:
 1446 007c DBB2     		uxtb	r3, r3
 1447 007e 042B     		cmp	r3, #4
 1448 0080 02D0     		beq	.L142
 958:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1449              		.loc 1 958 0
 1450 0082 0523     		movs	r3, #5
 1451 0084 84F85D30 		strb	r3, [r4, #93]
 1452              	.L142:
 962:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pRxData;
 1453              		.loc 1 962 0
 1454 0088 0023     		movs	r3, #0
 1455 008a 2366     		str	r3, [r4, #96]
 963:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = Size;
 1456              		.loc 1 963 0
 1457 008c 2664     		str	r6, [r4, #64]
 964:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 1458              		.loc 1 964 0
 1459 008e A4F84690 		strh	r9, [r4, #70]	@ movhi
 965:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pTxData;
 1460              		.loc 1 965 0
 1461 0092 A4F84490 		strh	r9, [r4, #68]	@ movhi
 966:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = Size;
 1462              		.loc 1 966 0
 1463 0096 A763     		str	r7, [r4, #56]
 967:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 1464              		.loc 1 967 0
 1465 0098 A4F83E90 		strh	r9, [r4, #62]	@ movhi
 968:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1466              		.loc 1 968 0
 1467 009c A4F83C90 		strh	r9, [r4, #60]	@ movhi
 971:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
 1468              		.loc 1 971 0
 1469 00a0 E364     		str	r3, [r4, #76]
 972:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1470              		.loc 1 972 0
 1471 00a2 2365     		str	r3, [r4, #80]
 976:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1472              		.loc 1 976 0
 1473 00a4 A36A     		ldr	r3, [r4, #40]
 1474 00a6 B3F5005F 		cmp	r3, #8192
 1475 00aa 2BD0     		beq	.L194
 1476              	.LVL96:
 1477              	.L143:
 983:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
ARM GAS  /tmp/ccNgnWxc.s 			page 97


 1478              		.loc 1 983 0
 1479 00ac E368     		ldr	r3, [r4, #12]
 1480 00ae B3F5E06F 		cmp	r3, #1792
 1481 00b2 04D8     		bhi	.L144
 983:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1482              		.loc 1 983 0 is_stmt 0 discriminator 1
 1483 00b4 B4F84630 		ldrh	r3, [r4, #70]
 1484 00b8 9BB2     		uxth	r3, r3
 1485 00ba 012B     		cmp	r3, #1
 1486 00bc 2DD9     		bls	.L145
 1487              	.L144:
 986:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1488              		.loc 1 986 0 is_stmt 1
 1489 00be 2268     		ldr	r2, [r4]
 1490 00c0 5368     		ldr	r3, [r2, #4]
 1491 00c2 23F48053 		bic	r3, r3, #4096
 1492 00c6 5360     		str	r3, [r2, #4]
 1493              	.L146:
 995:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1494              		.loc 1 995 0
 1495 00c8 2368     		ldr	r3, [r4]
 1496 00ca 1A68     		ldr	r2, [r3]
 1497 00cc 12F0400F 		tst	r2, #64
 1498 00d0 03D1     		bne	.L147
 998:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1499              		.loc 1 998 0
 1500 00d2 1A68     		ldr	r2, [r3]
 1501 00d4 42F04002 		orr	r2, r2, #64
 1502 00d8 1A60     		str	r2, [r3]
 1503              	.L147:
1002:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1504              		.loc 1 1002 0
 1505 00da E368     		ldr	r3, [r4, #12]
 1506 00dc B3F5E06F 		cmp	r3, #1792
 1507 00e0 7ED9     		bls	.L148
1004:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1508              		.loc 1 1004 0
 1509 00e2 6368     		ldr	r3, [r4, #4]
 1510 00e4 1BB1     		cbz	r3, .L149
1004:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1511              		.loc 1 1004 0 is_stmt 0 discriminator 1
 1512 00e6 E38F     		ldrh	r3, [r4, #62]
 1513 00e8 9BB2     		uxth	r3, r3
 1514 00ea 012B     		cmp	r3, #1
 1515 00ec 07D1     		bne	.L150
 1516              	.L149:
1006:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       pTxData += sizeof(uint16_t);
 1517              		.loc 1 1006 0 is_stmt 1
 1518 00ee 2368     		ldr	r3, [r4]
 1519 00f0 37F8022B 		ldrh	r2, [r7], #2
 1520              	.LVL97:
 1521 00f4 DA60     		str	r2, [r3, #12]
 1522              	.LVL98:
1008:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 1523              		.loc 1 1008 0
 1524 00f6 E38F     		ldrh	r3, [r4, #62]
 1525 00f8 013B     		subs	r3, r3, #1
ARM GAS  /tmp/ccNgnWxc.s 			page 98


 1526 00fa 9BB2     		uxth	r3, r3
 1527 00fc E387     		strh	r3, [r4, #62]	@ movhi
 1528              	.L150:
1042:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 1529              		.loc 1 1042 0
 1530 00fe 4FF00109 		mov	r9, #1
 1531 0102 3EE0     		b	.L151
 1532              	.LVL99:
 1533              	.L194:
 978:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1534              		.loc 1 978 0
 1535 0104 2268     		ldr	r2, [r4]
 1536 0106 1368     		ldr	r3, [r2]
 1537 0108 23F40053 		bic	r3, r3, #8192
 1538 010c 1360     		str	r3, [r2]
 1539              	.LVL100:
 1540 010e 2268     		ldr	r2, [r4]
 1541 0110 1368     		ldr	r3, [r2]
 1542 0112 43F40053 		orr	r3, r3, #8192
 1543 0116 1360     		str	r3, [r2]
 1544 0118 C8E7     		b	.L143
 1545              	.L145:
 991:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1546              		.loc 1 991 0
 1547 011a 2268     		ldr	r2, [r4]
 1548 011c 5368     		ldr	r3, [r2, #4]
 1549 011e 43F48053 		orr	r3, r3, #4096
 1550 0122 5360     		str	r3, [r2, #4]
 1551 0124 D0E7     		b	.L146
 1552              	.LVL101:
 1553              	.L196:
1026:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           {
 1554              		.loc 1 1026 0
 1555 0126 2368     		ldr	r3, [r4]
 1556 0128 1A68     		ldr	r2, [r3]
 1557 012a 12F0040F 		tst	r2, #4
 1558 012e 07D1     		bne	.L153
1026:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           {
 1559              		.loc 1 1026 0 is_stmt 0 discriminator 1
 1560 0130 5A68     		ldr	r2, [r3, #4]
 1561 0132 12F0080F 		tst	r2, #8
 1562 0136 03D0     		beq	.L153
1028:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           }
 1563              		.loc 1 1028 0 is_stmt 1
 1564 0138 1A68     		ldr	r2, [r3]
 1565 013a 42F40072 		orr	r2, r2, #512
 1566 013e 1A60     		str	r2, [r3]
 1567              	.L153:
1030:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 1568              		.loc 1 1030 0
 1569 0140 2268     		ldr	r2, [r4]
 1570 0142 1368     		ldr	r3, [r2]
 1571 0144 43F48053 		orr	r3, r3, #4096
 1572 0148 1360     		str	r3, [r2]
1019:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1573              		.loc 1 1019 0
 1574 014a 4FF00009 		mov	r9, #0
ARM GAS  /tmp/ccNgnWxc.s 			page 99


 1575 014e 01E0     		b	.L152
 1576              	.L183:
 1577 0150 4FF00009 		mov	r9, #0
 1578              	.LVL102:
 1579              	.L152:
1036:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1580              		.loc 1 1036 0
 1581 0154 B4F84630 		ldrh	r3, [r4, #70]
 1582 0158 9BB2     		uxth	r3, r3
 1583 015a 7BB1     		cbz	r3, .L154
1036:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1584              		.loc 1 1036 0 is_stmt 0 discriminator 1
 1585 015c 2368     		ldr	r3, [r4]
 1586 015e 9A68     		ldr	r2, [r3, #8]
 1587 0160 12F0010F 		tst	r2, #1
 1588 0164 0AD0     		beq	.L154
1038:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pRxData += sizeof(uint16_t);
 1589              		.loc 1 1038 0 is_stmt 1
 1590 0166 DB68     		ldr	r3, [r3, #12]
 1591 0168 26F8023B 		strh	r3, [r6], #2	@ movhi
 1592              	.LVL103:
1040:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Next Data is a Transmission (Tx). Tx is allowed */
 1593              		.loc 1 1040 0
 1594 016c B4F84630 		ldrh	r3, [r4, #70]
 1595 0170 013B     		subs	r3, r3, #1
 1596 0172 9BB2     		uxth	r3, r3
 1597 0174 A4F84630 		strh	r3, [r4, #70]	@ movhi
 1598              	.LVL104:
1042:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 1599              		.loc 1 1042 0
 1600 0178 4FF00109 		mov	r9, #1
 1601              	.LVL105:
 1602              	.L154:
1044:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1603              		.loc 1 1044 0
 1604 017c B5F1FF3F 		cmp	r5, #-1
 1605 0180 26D1     		bne	.L195
 1606              	.LVL106:
 1607              	.L151:
1010:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1608              		.loc 1 1010 0
 1609 0182 E38F     		ldrh	r3, [r4, #62]
 1610 0184 9BB2     		uxth	r3, r3
 1611 0186 2BB9     		cbnz	r3, .L156
1010:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1612              		.loc 1 1010 0 is_stmt 0 discriminator 1
 1613 0188 B4F84630 		ldrh	r3, [r4, #70]
 1614 018c 9BB2     		uxth	r3, r3
 1615 018e 002B     		cmp	r3, #0
 1616 0190 00F0CA80 		beq	.L157
 1617              	.L156:
1013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1618              		.loc 1 1013 0 is_stmt 1
 1619 0194 B9F1000F 		cmp	r9, #0
 1620 0198 DCD0     		beq	.L152
1013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1621              		.loc 1 1013 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccNgnWxc.s 			page 100


 1622 019a E38F     		ldrh	r3, [r4, #62]
 1623 019c 9BB2     		uxth	r3, r3
 1624 019e 002B     		cmp	r3, #0
 1625 01a0 D8D0     		beq	.L152
1013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1626              		.loc 1 1013 0 discriminator 2
 1627 01a2 2368     		ldr	r3, [r4]
 1628 01a4 9A68     		ldr	r2, [r3, #8]
 1629 01a6 12F0020F 		tst	r2, #2
 1630 01aa D3D0     		beq	.L152
1015:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pTxData += sizeof(uint16_t);
 1631              		.loc 1 1015 0 is_stmt 1
 1632 01ac 37F8022B 		ldrh	r2, [r7], #2
 1633              	.LVL107:
 1634 01b0 DA60     		str	r2, [r3, #12]
 1635              	.LVL108:
1017:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* Next Data is a reception (Rx). Tx not allowed */
 1636              		.loc 1 1017 0
 1637 01b2 E38F     		ldrh	r3, [r4, #62]
 1638 01b4 013B     		subs	r3, r3, #1
 1639 01b6 9BB2     		uxth	r3, r3
 1640 01b8 E387     		strh	r3, [r4, #62]	@ movhi
 1641              	.LVL109:
1023:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1642              		.loc 1 1023 0
 1643 01ba E38F     		ldrh	r3, [r4, #62]
 1644 01bc 9BB2     		uxth	r3, r3
 1645 01be 002B     		cmp	r3, #0
 1646 01c0 C6D1     		bne	.L183
1023:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1647              		.loc 1 1023 0 is_stmt 0 discriminator 1
 1648 01c2 A36A     		ldr	r3, [r4, #40]
 1649 01c4 B3F5005F 		cmp	r3, #8192
 1650 01c8 ADD0     		beq	.L196
1019:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1651              		.loc 1 1019 0 is_stmt 1
 1652 01ca 4FF00009 		mov	r9, #0
 1653 01ce C1E7     		b	.L152
 1654              	.LVL110:
 1655              	.L195:
1044:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1656              		.loc 1 1044 0 discriminator 1
 1657 01d0 FFF7FEFF 		bl	HAL_GetTick
 1658              	.LVL111:
 1659 01d4 A0EB0800 		sub	r0, r0, r8
 1660 01d8 A842     		cmp	r0, r5
 1661 01da D2D3     		bcc	.L151
1046:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         goto error;
 1662              		.loc 1 1046 0
 1663 01dc 0326     		movs	r6, #3
 1664              	.LVL112:
 1665 01de 2FE7     		b	.L141
 1666              	.LVL113:
 1667              	.L148:
1054:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1668              		.loc 1 1054 0
 1669 01e0 6368     		ldr	r3, [r4, #4]
ARM GAS  /tmp/ccNgnWxc.s 			page 101


 1670 01e2 1BB1     		cbz	r3, .L158
1054:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1671              		.loc 1 1054 0 is_stmt 0 discriminator 1
 1672 01e4 E38F     		ldrh	r3, [r4, #62]
 1673 01e6 9BB2     		uxth	r3, r3
 1674 01e8 012B     		cmp	r3, #1
 1675 01ea 0BD1     		bne	.L159
 1676              	.L158:
1056:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1677              		.loc 1 1056 0 is_stmt 1
 1678 01ec E38F     		ldrh	r3, [r4, #62]
 1679 01ee 9BB2     		uxth	r3, r3
 1680 01f0 012B     		cmp	r3, #1
 1681 01f2 0AD9     		bls	.L160
1058:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pTxData += sizeof(uint16_t);
 1682              		.loc 1 1058 0
 1683 01f4 2368     		ldr	r3, [r4]
 1684 01f6 37F8022B 		ldrh	r2, [r7], #2
 1685              	.LVL114:
 1686 01fa DA60     		str	r2, [r3, #12]
 1687              	.LVL115:
1060:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 1688              		.loc 1 1060 0
 1689 01fc E38F     		ldrh	r3, [r4, #62]
 1690 01fe 023B     		subs	r3, r3, #2
 1691 0200 9BB2     		uxth	r3, r3
 1692 0202 E387     		strh	r3, [r4, #62]	@ movhi
 1693              	.L159:
1121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 1694              		.loc 1 1121 0
 1695 0204 4FF00109 		mov	r9, #1
 1696 0208 48E0     		b	.L161
 1697              	.L160:
 1698              	.LVL116:
1064:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount--;
 1699              		.loc 1 1064 0
 1700 020a 2368     		ldr	r3, [r4]
 1701 020c 3A78     		ldrb	r2, [r7]	@ zero_extendqisi2
 1702 020e 1A73     		strb	r2, [r3, #12]
1065:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 1703              		.loc 1 1065 0
 1704 0210 E38F     		ldrh	r3, [r4, #62]
 1705 0212 013B     		subs	r3, r3, #1
 1706 0214 9BB2     		uxth	r3, r3
 1707 0216 E387     		strh	r3, [r4, #62]	@ movhi
1064:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount--;
 1708              		.loc 1 1064 0
 1709 0218 0137     		adds	r7, r7, #1
 1710              	.LVL117:
 1711 021a F3E7     		b	.L159
 1712              	.LVL118:
 1713              	.L163:
1081:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->TxXferCount--;
 1714              		.loc 1 1081 0
 1715 021c 3A78     		ldrb	r2, [r7]	@ zero_extendqisi2
 1716 021e 1A73     		strb	r2, [r3, #12]
1082:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
ARM GAS  /tmp/ccNgnWxc.s 			page 102


 1717              		.loc 1 1082 0
 1718 0220 E38F     		ldrh	r3, [r4, #62]
 1719 0222 013B     		subs	r3, r3, #1
 1720 0224 9BB2     		uxth	r3, r3
 1721 0226 E387     		strh	r3, [r4, #62]	@ movhi
1081:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->TxXferCount--;
 1722              		.loc 1 1081 0
 1723 0228 0137     		adds	r7, r7, #1
 1724              	.LVL119:
 1725 022a 56E0     		b	.L164
 1726              	.LVL120:
 1727              	.L199:
1092:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           {
 1728              		.loc 1 1092 0
 1729 022c 2368     		ldr	r3, [r4]
 1730 022e 1A68     		ldr	r2, [r3]
 1731 0230 12F0040F 		tst	r2, #4
 1732 0234 07D1     		bne	.L165
1092:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           {
 1733              		.loc 1 1092 0 is_stmt 0 discriminator 1
 1734 0236 5A68     		ldr	r2, [r3, #4]
 1735 0238 12F0080F 		tst	r2, #8
 1736 023c 03D0     		beq	.L165
1094:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           }
 1737              		.loc 1 1094 0 is_stmt 1
 1738 023e 1A68     		ldr	r2, [r3]
 1739 0240 42F40072 		orr	r2, r2, #512
 1740 0244 1A60     		str	r2, [r3]
 1741              	.L165:
1096:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 1742              		.loc 1 1096 0
 1743 0246 2268     		ldr	r2, [r4]
 1744 0248 1368     		ldr	r3, [r2]
 1745 024a 43F48053 		orr	r3, r3, #4096
 1746 024e 1360     		str	r3, [r2]
1085:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1747              		.loc 1 1085 0
 1748 0250 4FF00009 		mov	r9, #0
 1749 0254 01E0     		b	.L162
 1750              	.L186:
 1751 0256 4FF00009 		mov	r9, #0
 1752              	.LVL121:
 1753              	.L162:
1102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1754              		.loc 1 1102 0
 1755 025a B4F84630 		ldrh	r3, [r4, #70]
 1756 025e 9BB2     		uxth	r3, r3
 1757 0260 CBB1     		cbz	r3, .L166
1102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1758              		.loc 1 1102 0 is_stmt 0 discriminator 1
 1759 0262 2368     		ldr	r3, [r4]
 1760 0264 9A68     		ldr	r2, [r3, #8]
 1761 0266 12F0010F 		tst	r2, #1
 1762 026a 14D0     		beq	.L166
1104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1763              		.loc 1 1104 0 is_stmt 1
 1764 026c B4F84620 		ldrh	r2, [r4, #70]
ARM GAS  /tmp/ccNgnWxc.s 			page 103


 1765 0270 92B2     		uxth	r2, r2
 1766 0272 012A     		cmp	r2, #1
 1767 0274 44D9     		bls	.L167
1106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           pRxData += sizeof(uint16_t);
 1768              		.loc 1 1106 0
 1769 0276 DB68     		ldr	r3, [r3, #12]
 1770 0278 26F8023B 		strh	r3, [r6], #2	@ movhi
 1771              	.LVL122:
1108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           if (hspi->RxXferCount <= 1U)
 1772              		.loc 1 1108 0
 1773 027c B4F84630 		ldrh	r3, [r4, #70]
 1774 0280 023B     		subs	r3, r3, #2
 1775 0282 9BB2     		uxth	r3, r3
 1776 0284 A4F84630 		strh	r3, [r4, #70]	@ movhi
1109:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           {
 1777              		.loc 1 1109 0
 1778 0288 B4F84630 		ldrh	r3, [r4, #70]
 1779 028c 9BB2     		uxth	r3, r3
 1780 028e 012B     		cmp	r3, #1
 1781 0290 2ED9     		bls	.L197
1121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 1782              		.loc 1 1121 0
 1783 0292 4FF00109 		mov	r9, #1
 1784              	.LVL123:
 1785              	.L166:
1123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1786              		.loc 1 1123 0
 1787 0296 B5F1FF3F 		cmp	r5, #-1
 1788 029a 3DD1     		bne	.L198
 1789              	.LVL124:
 1790              	.L161:
1068:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1791              		.loc 1 1068 0
 1792 029c E38F     		ldrh	r3, [r4, #62]
 1793 029e 9BB2     		uxth	r3, r3
 1794 02a0 23B9     		cbnz	r3, .L169
1068:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1795              		.loc 1 1068 0 is_stmt 0 discriminator 1
 1796 02a2 B4F84630 		ldrh	r3, [r4, #70]
 1797 02a6 9BB2     		uxth	r3, r3
 1798 02a8 002B     		cmp	r3, #0
 1799 02aa 3DD0     		beq	.L157
 1800              	.L169:
1071:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1801              		.loc 1 1071 0 is_stmt 1
 1802 02ac B9F1000F 		cmp	r9, #0
 1803 02b0 D3D0     		beq	.L162
1071:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1804              		.loc 1 1071 0 is_stmt 0 discriminator 1
 1805 02b2 E38F     		ldrh	r3, [r4, #62]
 1806 02b4 9BB2     		uxth	r3, r3
 1807 02b6 002B     		cmp	r3, #0
 1808 02b8 CFD0     		beq	.L162
1071:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1809              		.loc 1 1071 0 discriminator 2
 1810 02ba 2368     		ldr	r3, [r4]
 1811 02bc 9A68     		ldr	r2, [r3, #8]
ARM GAS  /tmp/ccNgnWxc.s 			page 104


 1812 02be 12F0020F 		tst	r2, #2
 1813 02c2 CAD0     		beq	.L162
1073:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1814              		.loc 1 1073 0 is_stmt 1
 1815 02c4 E28F     		ldrh	r2, [r4, #62]
 1816 02c6 92B2     		uxth	r2, r2
 1817 02c8 012A     		cmp	r2, #1
 1818 02ca A7D9     		bls	.L163
1075:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           pTxData += sizeof(uint16_t);
 1819              		.loc 1 1075 0
 1820 02cc 37F8022B 		ldrh	r2, [r7], #2
 1821              	.LVL125:
 1822 02d0 DA60     		str	r2, [r3, #12]
 1823              	.LVL126:
1077:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 1824              		.loc 1 1077 0
 1825 02d2 E38F     		ldrh	r3, [r4, #62]
 1826 02d4 023B     		subs	r3, r3, #2
 1827 02d6 9BB2     		uxth	r3, r3
 1828 02d8 E387     		strh	r3, [r4, #62]	@ movhi
 1829              	.L164:
 1830              	.LVL127:
1089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1831              		.loc 1 1089 0
 1832 02da E38F     		ldrh	r3, [r4, #62]
 1833 02dc 9BB2     		uxth	r3, r3
 1834 02de 002B     		cmp	r3, #0
 1835 02e0 B9D1     		bne	.L186
1089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1836              		.loc 1 1089 0 is_stmt 0 discriminator 1
 1837 02e2 A36A     		ldr	r3, [r4, #40]
 1838 02e4 B3F5005F 		cmp	r3, #8192
 1839 02e8 A0D0     		beq	.L199
1085:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1840              		.loc 1 1085 0 is_stmt 1
 1841 02ea 4FF00009 		mov	r9, #0
 1842 02ee B4E7     		b	.L162
 1843              	.LVL128:
 1844              	.L197:
1112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           }
 1845              		.loc 1 1112 0
 1846 02f0 2268     		ldr	r2, [r4]
 1847 02f2 5368     		ldr	r3, [r2, #4]
 1848 02f4 43F48053 		orr	r3, r3, #4096
 1849 02f8 5360     		str	r3, [r2, #4]
1121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 1850              		.loc 1 1121 0
 1851 02fa 4FF00109 		mov	r9, #1
 1852              	.LVL129:
 1853 02fe CAE7     		b	.L166
 1854              	.LVL130:
 1855              	.L167:
1117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->RxXferCount--;
 1856              		.loc 1 1117 0
 1857 0300 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 1858 0302 3370     		strb	r3, [r6]
1118:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
ARM GAS  /tmp/ccNgnWxc.s 			page 105


 1859              		.loc 1 1118 0
 1860 0304 B4F84630 		ldrh	r3, [r4, #70]
 1861 0308 013B     		subs	r3, r3, #1
 1862 030a 9BB2     		uxth	r3, r3
 1863 030c A4F84630 		strh	r3, [r4, #70]	@ movhi
1117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           hspi->RxXferCount--;
 1864              		.loc 1 1117 0
 1865 0310 0136     		adds	r6, r6, #1
 1866              	.LVL131:
1121:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 1867              		.loc 1 1121 0
 1868 0312 4FF00109 		mov	r9, #1
 1869              	.LVL132:
 1870 0316 BEE7     		b	.L166
 1871              	.LVL133:
 1872              	.L198:
1123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1873              		.loc 1 1123 0 discriminator 1
 1874 0318 FFF7FEFF 		bl	HAL_GetTick
 1875              	.LVL134:
 1876 031c A0EB0800 		sub	r0, r0, r8
 1877 0320 A842     		cmp	r0, r5
 1878 0322 BBD3     		bcc	.L161
1125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         goto error;
 1879              		.loc 1 1125 0
 1880 0324 0326     		movs	r6, #3
 1881              	.LVL135:
 1882 0326 8BE6     		b	.L141
 1883              	.LVL136:
 1884              	.L157:
1133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1885              		.loc 1 1133 0
 1886 0328 A36A     		ldr	r3, [r4, #40]
 1887 032a B3F5005F 		cmp	r3, #8192
 1888 032e 1AD0     		beq	.L200
 1889              	.L170:
1173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1890              		.loc 1 1173 0
 1891 0330 2368     		ldr	r3, [r4]
 1892 0332 9A68     		ldr	r2, [r3, #8]
 1893 0334 12F0100F 		tst	r2, #16
 1894 0338 4FD0     		beq	.L190
1175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Clear CRC Flag */
 1895              		.loc 1 1175 0
 1896 033a 226E     		ldr	r2, [r4, #96]
 1897 033c 42F00202 		orr	r2, r2, #2
 1898 0340 2266     		str	r2, [r4, #96]
1177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1899              		.loc 1 1177 0
 1900 0342 4FF6EF72 		movw	r2, #65519
 1901 0346 9A60     		str	r2, [r3, #8]
 1902              	.LVL137:
1179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1903              		.loc 1 1179 0
 1904 0348 0126     		movs	r6, #1
 1905              	.LVL138:
 1906              	.L174:
ARM GAS  /tmp/ccNgnWxc.s 			page 106


1184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1907              		.loc 1 1184 0
 1908 034a 4246     		mov	r2, r8
 1909 034c 2946     		mov	r1, r5
 1910 034e 2046     		mov	r0, r4
 1911 0350 FFF7FEFF 		bl	SPI_EndRxTxTransaction
 1912              	.LVL139:
 1913 0354 08B1     		cbz	r0, .L175
1186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1914              		.loc 1 1186 0
 1915 0356 2023     		movs	r3, #32
 1916 0358 2366     		str	r3, [r4, #96]
 1917              	.L175:
1189:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 1918              		.loc 1 1189 0
 1919 035a 236E     		ldr	r3, [r4, #96]
 1920 035c 002B     		cmp	r3, #0
 1921 035e 3FF46FAE 		beq	.L141
1191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 1922              		.loc 1 1191 0
 1923 0362 0126     		movs	r6, #1
 1924              	.LVL140:
 1925 0364 6CE6     		b	.L141
 1926              	.LVL141:
 1927              	.L200:
1136:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1928              		.loc 1 1136 0
 1929 0366 CDF80080 		str	r8, [sp]
 1930 036a 2B46     		mov	r3, r5
 1931 036c 0122     		movs	r2, #1
 1932 036e 1146     		mov	r1, r2
 1933 0370 2046     		mov	r0, r4
 1934 0372 FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 1935              	.LVL142:
 1936 0376 28B1     		cbz	r0, .L171
1139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       errorcode = HAL_TIMEOUT;
 1937              		.loc 1 1139 0
 1938 0378 236E     		ldr	r3, [r4, #96]
 1939 037a 43F00203 		orr	r3, r3, #2
 1940 037e 2366     		str	r3, [r4, #96]
 1941              	.LVL143:
1140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       goto error;
 1942              		.loc 1 1140 0
 1943 0380 0326     		movs	r6, #3
 1944              	.LVL144:
1141:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 1945              		.loc 1 1141 0
 1946 0382 5DE6     		b	.L141
 1947              	.LVL145:
 1948              	.L171:
1144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 1949              		.loc 1 1144 0
 1950 0384 E368     		ldr	r3, [r4, #12]
 1951 0386 B3F5706F 		cmp	r3, #3840
 1952 038a 17D0     		beq	.L201
1152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* To avoid GCC warning */
 1953              		.loc 1 1152 0
ARM GAS  /tmp/ccNgnWxc.s 			page 107


 1954 038c 2368     		ldr	r3, [r4]
 1955 038e 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 1956 0390 ADF80E30 		strh	r3, [sp, #14]	@ movhi
1154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 1957              		.loc 1 1154 0
 1958 0394 BDF80E30 		ldrh	r3, [sp, #14]
1156:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 1959              		.loc 1 1156 0
 1960 0398 236B     		ldr	r3, [r4, #48]
 1961 039a 022B     		cmp	r3, #2
 1962 039c C8D1     		bne	.L170
1158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 1963              		.loc 1 1158 0
 1964 039e CDF80080 		str	r8, [sp]
 1965 03a2 2B46     		mov	r3, r5
 1966 03a4 0122     		movs	r2, #1
 1967 03a6 1146     		mov	r1, r2
 1968 03a8 2046     		mov	r0, r4
 1969 03aa FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 1970              	.LVL146:
 1971 03ae 68B1     		cbz	r0, .L173
1161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           errorcode = HAL_TIMEOUT;
 1972              		.loc 1 1161 0
 1973 03b0 236E     		ldr	r3, [r4, #96]
 1974 03b2 43F00203 		orr	r3, r3, #2
 1975 03b6 2366     		str	r3, [r4, #96]
 1976              	.LVL147:
1162:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 1977              		.loc 1 1162 0
 1978 03b8 0326     		movs	r6, #3
 1979              	.LVL148:
1163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 1980              		.loc 1 1163 0
 1981 03ba 41E6     		b	.L141
 1982              	.LVL149:
 1983              	.L201:
1146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* To avoid GCC warning */
 1984              		.loc 1 1146 0
 1985 03bc 2368     		ldr	r3, [r4]
 1986 03be DB68     		ldr	r3, [r3, #12]
 1987 03c0 9BB2     		uxth	r3, r3
 1988 03c2 ADF80E30 		strh	r3, [sp, #14]	@ movhi
1148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 1989              		.loc 1 1148 0
 1990 03c6 BDF80E30 		ldrh	r3, [sp, #14]
 1991 03ca B1E7     		b	.L170
 1992              	.L173:
1165:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* To avoid GCC warning */
 1993              		.loc 1 1165 0
 1994 03cc 2368     		ldr	r3, [r4]
 1995 03ce 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 1996 03d0 ADF80E30 		strh	r3, [sp, #14]	@ movhi
1167:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 1997              		.loc 1 1167 0
 1998 03d4 BDF80E30 		ldrh	r3, [sp, #14]
 1999 03d8 AAE7     		b	.L170
 2000              	.L190:
ARM GAS  /tmp/ccNgnWxc.s 			page 108


 927:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
 2001              		.loc 1 927 0
 2002 03da 0026     		movs	r6, #0
 2003              	.LVL150:
 2004 03dc B5E7     		b	.L174
 2005              	.LVL151:
 2006              	.L178:
 945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 2007              		.loc 1 945 0
 2008 03de 0226     		movs	r6, #2
 2009              	.LVL152:
 2010 03e0 2EE6     		b	.L141
 2011              	.LVL153:
 2012              	.L180:
 951:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 2013              		.loc 1 951 0
 2014 03e2 0126     		movs	r6, #1
 2015              	.LVL154:
 2016 03e4 2CE6     		b	.L141
 2017              	.LVL155:
 2018              	.L181:
 2019 03e6 0126     		movs	r6, #1
 2020              	.LVL156:
 2021 03e8 2AE6     		b	.L141
 2022              	.LVL157:
 2023              	.L182:
 2024 03ea 0126     		movs	r6, #1
 2025              	.LVL158:
 2026 03ec 28E6     		b	.L141
 2027              	.LVL159:
 2028              	.L176:
 934:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2029              		.loc 1 934 0
 2030 03ee 0226     		movs	r6, #2
 2031 03f0 2CE6     		b	.L139
 2032              		.cfi_endproc
 2033              	.LFE134:
 2035              		.section	.text.HAL_SPI_Receive,"ax",%progbits
 2036              		.align	1
 2037              		.global	HAL_SPI_Receive
 2038              		.syntax unified
 2039              		.thumb
 2040              		.thumb_func
 2041              		.fpu fpv4-sp-d16
 2043              	HAL_SPI_Receive:
 2044              	.LFB133:
 686:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 2045              		.loc 1 686 0
 2046              		.cfi_startproc
 2047              		@ args = 0, pretend = 0, frame = 8
 2048              		@ frame_needed = 0, uses_anonymous_args = 0
 2049              	.LVL160:
 2050 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2051              	.LCFI30:
 2052              		.cfi_def_cfa_offset 24
 2053              		.cfi_offset 4, -24
 2054              		.cfi_offset 5, -20
ARM GAS  /tmp/ccNgnWxc.s 			page 109


 2055              		.cfi_offset 6, -16
 2056              		.cfi_offset 7, -12
 2057              		.cfi_offset 8, -8
 2058              		.cfi_offset 14, -4
 2059 0004 84B0     		sub	sp, sp, #16
 2060              	.LCFI31:
 2061              		.cfi_def_cfa_offset 40
 2062 0006 0446     		mov	r4, r0
 2063 0008 0D46     		mov	r5, r1
 2064 000a 1746     		mov	r7, r2
 2065 000c 1E46     		mov	r6, r3
 688:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 2066              		.loc 1 688 0
 2067 000e 0023     		movs	r3, #0
 2068              	.LVL161:
 2069 0010 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 2070              	.LVL162:
 694:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2071              		.loc 1 694 0
 2072 0014 4368     		ldr	r3, [r0, #4]
 2073 0016 B3F5827F 		cmp	r3, #260
 2074 001a 19D0     		beq	.L239
 2075              	.L203:
 702:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2076              		.loc 1 702 0
 2077 001c 94F85C30 		ldrb	r3, [r4, #92]	@ zero_extendqisi2
 2078 0020 012B     		cmp	r3, #1
 2079 0022 00F03581 		beq	.L228
 702:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2080              		.loc 1 702 0 is_stmt 0 discriminator 2
 2081 0026 0123     		movs	r3, #1
 2082 0028 84F85C30 		strb	r3, [r4, #92]
 705:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2083              		.loc 1 705 0 is_stmt 1 discriminator 2
 2084 002c FFF7FEFF 		bl	HAL_GetTick
 2085              	.LVL163:
 2086 0030 8046     		mov	r8, r0
 2087              	.LVL164:
 707:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2088              		.loc 1 707 0 discriminator 2
 2089 0032 94F85D30 		ldrb	r3, [r4, #93]	@ zero_extendqisi2
 2090 0036 DBB2     		uxtb	r3, r3
 2091 0038 012B     		cmp	r3, #1
 2092 003a 15D0     		beq	.L240
 709:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 2093              		.loc 1 709 0
 2094 003c 0220     		movs	r0, #2
 2095              	.LVL165:
 2096              	.L205:
 902:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
 2097              		.loc 1 902 0
 2098 003e 0123     		movs	r3, #1
 2099 0040 84F85D30 		strb	r3, [r4, #93]
 903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
 2100              		.loc 1 903 0
 2101 0044 0023     		movs	r3, #0
 2102 0046 84F85C30 		strb	r3, [r4, #92]
ARM GAS  /tmp/ccNgnWxc.s 			page 110


 2103              	.LVL166:
 2104              	.L204:
 905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2105              		.loc 1 905 0
 2106 004a 04B0     		add	sp, sp, #16
 2107              	.LCFI32:
 2108              		.cfi_remember_state
 2109              		.cfi_def_cfa_offset 24
 2110              		@ sp needed
 2111 004c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2112              	.LVL167:
 2113              	.L239:
 2114              	.LCFI33:
 2115              		.cfi_restore_state
 694:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2116              		.loc 1 694 0 discriminator 1
 2117 0050 8368     		ldr	r3, [r0, #8]
 2118 0052 002B     		cmp	r3, #0
 2119 0054 E2D1     		bne	.L203
 696:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line 
 2120              		.loc 1 696 0
 2121 0056 0423     		movs	r3, #4
 2122 0058 80F85D30 		strb	r3, [r0, #93]
 698:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2123              		.loc 1 698 0
 2124 005c 0096     		str	r6, [sp]
 2125 005e 1346     		mov	r3, r2
 2126 0060 0A46     		mov	r2, r1
 2127              	.LVL168:
 2128 0062 FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 2129              	.LVL169:
 2130 0066 F0E7     		b	.L204
 2131              	.LVL170:
 2132              	.L240:
 713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2133              		.loc 1 713 0
 2134 0068 002D     		cmp	r5, #0
 2135 006a 00F00581 		beq	.L230
 713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2136              		.loc 1 713 0 is_stmt 0 discriminator 1
 2137 006e 002F     		cmp	r7, #0
 2138 0070 00F00481 		beq	.L231
 720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 2139              		.loc 1 720 0 is_stmt 1
 2140 0074 0423     		movs	r3, #4
 2141 0076 84F85D30 		strb	r3, [r4, #93]
 721:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
 2142              		.loc 1 721 0
 2143 007a 0023     		movs	r3, #0
 2144 007c 2366     		str	r3, [r4, #96]
 722:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 2145              		.loc 1 722 0
 2146 007e 2564     		str	r5, [r4, #64]
 723:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = Size;
 2147              		.loc 1 723 0
 2148 0080 A4F84470 		strh	r7, [r4, #68]	@ movhi
 724:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
ARM GAS  /tmp/ccNgnWxc.s 			page 111


 2149              		.loc 1 724 0
 2150 0084 A4F84670 		strh	r7, [r4, #70]	@ movhi
 727:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = 0U;
 2151              		.loc 1 727 0
 2152 0088 A363     		str	r3, [r4, #56]
 728:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 2153              		.loc 1 728 0
 2154 008a A387     		strh	r3, [r4, #60]	@ movhi
 729:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxISR       = NULL;
 2155              		.loc 1 729 0
 2156 008c E387     		strh	r3, [r4, #62]	@ movhi
 730:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
 2157              		.loc 1 730 0
 2158 008e E364     		str	r3, [r4, #76]
 731:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2159              		.loc 1 731 0
 2160 0090 2365     		str	r3, [r4, #80]
 735:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2161              		.loc 1 735 0
 2162 0092 A36A     		ldr	r3, [r4, #40]
 2163 0094 B3F5005F 		cmp	r3, #8192
 2164 0098 1AD0     		beq	.L241
 2165              	.L206:
 744:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2166              		.loc 1 744 0
 2167 009a E368     		ldr	r3, [r4, #12]
 2168 009c B3F5E06F 		cmp	r3, #1792
 2169 00a0 27D9     		bls	.L207
 747:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2170              		.loc 1 747 0
 2171 00a2 2268     		ldr	r2, [r4]
 2172 00a4 5368     		ldr	r3, [r2, #4]
 2173 00a6 23F48053 		bic	r3, r3, #4096
 2174 00aa 5360     		str	r3, [r2, #4]
 2175              	.L208:
 756:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2176              		.loc 1 756 0
 2177 00ac A368     		ldr	r3, [r4, #8]
 2178 00ae B3F5004F 		cmp	r3, #32768
 2179 00b2 24D0     		beq	.L242
 2180              	.L209:
 762:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2181              		.loc 1 762 0
 2182 00b4 2368     		ldr	r3, [r4]
 2183 00b6 1A68     		ldr	r2, [r3]
 2184 00b8 12F0400F 		tst	r2, #64
 2185 00bc 03D1     		bne	.L210
 765:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2186              		.loc 1 765 0
 2187 00be 1A68     		ldr	r2, [r3]
 2188 00c0 42F04002 		orr	r2, r2, #64
 2189 00c4 1A60     		str	r2, [r3]
 2190              	.L210:
 769:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2191              		.loc 1 769 0
 2192 00c6 E368     		ldr	r3, [r4, #12]
 2193 00c8 B3F5E06F 		cmp	r3, #1792
ARM GAS  /tmp/ccNgnWxc.s 			page 112


 2194 00cc 23D9     		bls	.L211
 2195 00ce 44E0     		b	.L212
 2196              	.L241:
 737:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* this is done to handle the CRCNEXT before the latest data */
 2197              		.loc 1 737 0
 2198 00d0 2268     		ldr	r2, [r4]
 2199 00d2 1368     		ldr	r3, [r2]
 2200 00d4 23F40053 		bic	r3, r3, #8192
 2201 00d8 1360     		str	r3, [r2]
 2202 00da 2268     		ldr	r2, [r4]
 2203 00dc 1368     		ldr	r3, [r2]
 2204 00de 43F40053 		orr	r3, r3, #8192
 2205 00e2 1360     		str	r3, [r2]
 739:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2206              		.loc 1 739 0
 2207 00e4 B4F84630 		ldrh	r3, [r4, #70]
 2208 00e8 013B     		subs	r3, r3, #1
 2209 00ea 9BB2     		uxth	r3, r3
 2210 00ec A4F84630 		strh	r3, [r4, #70]	@ movhi
 2211 00f0 D3E7     		b	.L206
 2212              	.L207:
 752:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2213              		.loc 1 752 0
 2214 00f2 2268     		ldr	r2, [r4]
 2215 00f4 5368     		ldr	r3, [r2, #4]
 2216 00f6 43F48053 		orr	r3, r3, #4096
 2217 00fa 5360     		str	r3, [r2, #4]
 2218 00fc D6E7     		b	.L208
 2219              	.L242:
 758:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2220              		.loc 1 758 0
 2221 00fe 2268     		ldr	r2, [r4]
 2222 0100 1368     		ldr	r3, [r2]
 2223 0102 23F48043 		bic	r3, r3, #16384
 2224 0106 1360     		str	r3, [r2]
 2225 0108 D4E7     		b	.L209
 2226              	.LVL171:
 2227              	.L213:
 785:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 2228              		.loc 1 785 0
 2229 010a 002E     		cmp	r6, #0
 2230 010c 00F0B880 		beq	.L232
 785:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 2231              		.loc 1 785 0 is_stmt 0 discriminator 1
 2232 0110 B6F1FF3F 		cmp	r6, #-1
 2233 0114 13D1     		bne	.L243
 2234              	.L211:
 772:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 2235              		.loc 1 772 0 is_stmt 1
 2236 0116 B4F84630 		ldrh	r3, [r4, #70]
 2237 011a 9BB2     		uxth	r3, r3
 2238 011c 002B     		cmp	r3, #0
 2239 011e 37D0     		beq	.L216
 775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 2240              		.loc 1 775 0
 2241 0120 2368     		ldr	r3, [r4]
 2242 0122 9A68     		ldr	r2, [r3, #8]
ARM GAS  /tmp/ccNgnWxc.s 			page 113


 2243 0124 12F0010F 		tst	r2, #1
 2244 0128 EFD0     		beq	.L213
 778:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pData += sizeof(uint8_t);
 2245              		.loc 1 778 0
 2246 012a 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 2247 012c 05F8013B 		strb	r3, [r5], #1
 2248              	.LVL172:
 780:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 2249              		.loc 1 780 0
 2250 0130 B4F84630 		ldrh	r3, [r4, #70]
 2251 0134 013B     		subs	r3, r3, #1
 2252 0136 9BB2     		uxth	r3, r3
 2253 0138 A4F84630 		strh	r3, [r4, #70]	@ movhi
 2254 013c EBE7     		b	.L211
 2255              	.L243:
 785:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 2256              		.loc 1 785 0 discriminator 2
 2257 013e FFF7FEFF 		bl	HAL_GetTick
 2258              	.LVL173:
 2259 0142 A0EB0800 		sub	r0, r0, r8
 2260 0146 B042     		cmp	r0, r6
 2261 0148 E5D3     		bcc	.L211
 787:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 2262              		.loc 1 787 0
 2263 014a 0320     		movs	r0, #3
 2264 014c 77E7     		b	.L205
 2265              	.L217:
 808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 2266              		.loc 1 808 0
 2267 014e 002E     		cmp	r6, #0
 2268 0150 00F09880 		beq	.L234
 808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 2269              		.loc 1 808 0 is_stmt 0 discriminator 1
 2270 0154 B6F1FF3F 		cmp	r6, #-1
 2271 0158 12D1     		bne	.L244
 2272              	.L212:
 796:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 2273              		.loc 1 796 0 is_stmt 1
 2274 015a B4F84630 		ldrh	r3, [r4, #70]
 2275 015e 9BB2     		uxth	r3, r3
 2276 0160 B3B1     		cbz	r3, .L216
 799:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 2277              		.loc 1 799 0
 2278 0162 2368     		ldr	r3, [r4]
 2279 0164 9A68     		ldr	r2, [r3, #8]
 2280 0166 12F0010F 		tst	r2, #1
 2281 016a F0D0     		beq	.L217
 801:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         pData += sizeof(uint16_t);
 2282              		.loc 1 801 0
 2283 016c DB68     		ldr	r3, [r3, #12]
 2284 016e 25F8023B 		strh	r3, [r5], #2	@ movhi
 2285              	.LVL174:
 803:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 2286              		.loc 1 803 0
 2287 0172 B4F84630 		ldrh	r3, [r4, #70]
 2288 0176 013B     		subs	r3, r3, #1
 2289 0178 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccNgnWxc.s 			page 114


 2290 017a A4F84630 		strh	r3, [r4, #70]	@ movhi
 2291 017e ECE7     		b	.L212
 2292              	.L244:
 808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 2293              		.loc 1 808 0 discriminator 2
 2294 0180 FFF7FEFF 		bl	HAL_GetTick
 2295              	.LVL175:
 2296 0184 A0EB0800 		sub	r0, r0, r8
 2297 0188 B042     		cmp	r0, r6
 2298 018a E6D3     		bcc	.L212
 810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 2299              		.loc 1 810 0
 2300 018c 0320     		movs	r0, #3
 2301 018e 56E7     		b	.L205
 2302              	.L216:
 819:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2303              		.loc 1 819 0
 2304 0190 A36A     		ldr	r3, [r4, #40]
 2305 0192 B3F5005F 		cmp	r3, #8192
 2306 0196 18D0     		beq	.L245
 2307              	.L220:
 882:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2308              		.loc 1 882 0
 2309 0198 4246     		mov	r2, r8
 2310 019a 3146     		mov	r1, r6
 2311 019c 2046     		mov	r0, r4
 2312 019e FFF7FEFF 		bl	SPI_EndRxTransaction
 2313              	.LVL176:
 2314 01a2 08B1     		cbz	r0, .L226
 884:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2315              		.loc 1 884 0
 2316 01a4 2023     		movs	r3, #32
 2317 01a6 2366     		str	r3, [r4, #96]
 2318              	.L226:
 889:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2319              		.loc 1 889 0
 2320 01a8 2368     		ldr	r3, [r4]
 2321 01aa 9A68     		ldr	r2, [r3, #8]
 2322 01ac 12F0100F 		tst	r2, #16
 2323 01b0 06D0     		beq	.L227
 891:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
 2324              		.loc 1 891 0
 2325 01b2 226E     		ldr	r2, [r4, #96]
 2326 01b4 42F00202 		orr	r2, r2, #2
 2327 01b8 2266     		str	r2, [r4, #96]
 892:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2328              		.loc 1 892 0
 2329 01ba 4FF6EF72 		movw	r2, #65519
 2330 01be 9A60     		str	r2, [r3, #8]
 2331              	.L227:
 896:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2332              		.loc 1 896 0
 2333 01c0 236E     		ldr	r3, [r4, #96]
 2334 01c2 002B     		cmp	r3, #0
 2335 01c4 62D1     		bne	.L237
 691:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
 2336              		.loc 1 691 0
ARM GAS  /tmp/ccNgnWxc.s 			page 115


 2337 01c6 0020     		movs	r0, #0
 2338 01c8 39E7     		b	.L205
 2339              	.L245:
 822:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2340              		.loc 1 822 0
 2341 01ca 2268     		ldr	r2, [r4]
 2342 01cc 1368     		ldr	r3, [r2]
 2343 01ce 43F48053 		orr	r3, r3, #4096
 2344 01d2 1360     		str	r3, [r2]
 825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 2345              		.loc 1 825 0
 2346 01d4 CDF80080 		str	r8, [sp]
 2347 01d8 3346     		mov	r3, r6
 2348 01da 0122     		movs	r2, #1
 2349 01dc 1146     		mov	r1, r2
 2350 01de 2046     		mov	r0, r4
 2351 01e0 FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 2352              	.LVL177:
 2353 01e4 0028     		cmp	r0, #0
 2354 01e6 4FD1     		bne	.L236
 833:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 2355              		.loc 1 833 0
 2356 01e8 E368     		ldr	r3, [r4, #12]
 2357 01ea B3F5E06F 		cmp	r3, #1792
 2358 01ee 11D9     		bls	.L221
 835:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 2359              		.loc 1 835 0
 2360 01f0 2368     		ldr	r3, [r4]
 2361 01f2 DB68     		ldr	r3, [r3, #12]
 2362 01f4 2B80     		strh	r3, [r5]	@ movhi
 2363              	.L222:
 844:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 2364              		.loc 1 844 0
 2365 01f6 CDF80080 		str	r8, [sp]
 2366 01fa 3346     		mov	r3, r6
 2367 01fc 0122     		movs	r2, #1
 2368 01fe 1146     		mov	r1, r2
 2369 0200 2046     		mov	r0, r4
 2370 0202 FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 2371              	.LVL178:
 2372 0206 48B1     		cbz	r0, .L223
 846:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       errorcode = HAL_TIMEOUT;
 2373              		.loc 1 846 0
 2374 0208 236E     		ldr	r3, [r4, #96]
 2375 020a 43F00203 		orr	r3, r3, #2
 2376 020e 2366     		str	r3, [r4, #96]
 2377              	.LVL179:
 847:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       goto error;
 2378              		.loc 1 847 0
 2379 0210 0320     		movs	r0, #3
 848:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 2380              		.loc 1 848 0
 2381 0212 14E7     		b	.L205
 2382              	.LVL180:
 2383              	.L221:
 840:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 2384              		.loc 1 840 0
ARM GAS  /tmp/ccNgnWxc.s 			page 116


 2385 0214 2368     		ldr	r3, [r4]
 2386 0216 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 2387 0218 2B70     		strb	r3, [r5]
 2388 021a ECE7     		b	.L222
 2389              	.L223:
 852:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 2390              		.loc 1 852 0
 2391 021c E368     		ldr	r3, [r4, #12]
 2392 021e B3F5706F 		cmp	r3, #3840
 2393 0222 1AD0     		beq	.L246
 860:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* To avoid GCC warning */
 2394              		.loc 1 860 0
 2395 0224 2268     		ldr	r2, [r4]
 2396 0226 127B     		ldrb	r2, [r2, #12]	@ zero_extendqisi2
 2397 0228 ADF80E20 		strh	r2, [sp, #14]	@ movhi
 862:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2398              		.loc 1 862 0
 2399 022c BDF80E20 		ldrh	r2, [sp, #14]
 864:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 2400              		.loc 1 864 0
 2401 0230 B3F5E06F 		cmp	r3, #1792
 2402 0234 B0D1     		bne	.L220
 864:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 2403              		.loc 1 864 0 is_stmt 0 discriminator 1
 2404 0236 236B     		ldr	r3, [r4, #48]
 2405 0238 022B     		cmp	r3, #2
 2406 023a ADD1     		bne	.L220
 866:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 2407              		.loc 1 866 0 is_stmt 1
 2408 023c CDF80080 		str	r8, [sp]
 2409 0240 3346     		mov	r3, r6
 2410 0242 0122     		movs	r2, #1
 2411 0244 1146     		mov	r1, r2
 2412 0246 2046     		mov	r0, r4
 2413 0248 FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 2414              	.LVL181:
 2415 024c 68B1     		cbz	r0, .L225
 869:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           errorcode = HAL_TIMEOUT;
 2416              		.loc 1 869 0
 2417 024e 236E     		ldr	r3, [r4, #96]
 2418 0250 43F00203 		orr	r3, r3, #2
 2419 0254 2366     		str	r3, [r4, #96]
 2420              	.LVL182:
 870:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 2421              		.loc 1 870 0
 2422 0256 0320     		movs	r0, #3
 871:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 2423              		.loc 1 871 0
 2424 0258 F1E6     		b	.L205
 2425              	.LVL183:
 2426              	.L246:
 854:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* To avoid GCC warning */
 2427              		.loc 1 854 0
 2428 025a 2368     		ldr	r3, [r4]
 2429 025c DB68     		ldr	r3, [r3, #12]
 2430 025e 9BB2     		uxth	r3, r3
 2431 0260 ADF80E30 		strh	r3, [sp, #14]	@ movhi
ARM GAS  /tmp/ccNgnWxc.s 			page 117


 856:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 2432              		.loc 1 856 0
 2433 0264 BDF80E30 		ldrh	r3, [sp, #14]
 2434 0268 96E7     		b	.L220
 2435              	.L225:
 873:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* To avoid GCC warning */
 2436              		.loc 1 873 0
 2437 026a 2368     		ldr	r3, [r4]
 2438 026c 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 2439 026e ADF80E30 		strh	r3, [sp, #14]	@ movhi
 875:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 2440              		.loc 1 875 0
 2441 0272 BDF80E30 		ldrh	r3, [sp, #14]
 2442 0276 8FE7     		b	.L220
 2443              	.LVL184:
 2444              	.L230:
 715:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 2445              		.loc 1 715 0
 2446 0278 0120     		movs	r0, #1
 2447              	.LVL185:
 2448 027a E0E6     		b	.L205
 2449              	.LVL186:
 2450              	.L231:
 2451 027c 0120     		movs	r0, #1
 2452              	.LVL187:
 2453 027e DEE6     		b	.L205
 2454              	.L232:
 787:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 2455              		.loc 1 787 0
 2456 0280 0320     		movs	r0, #3
 2457 0282 DCE6     		b	.L205
 2458              	.L234:
 810:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           goto error;
 2459              		.loc 1 810 0
 2460 0284 0320     		movs	r0, #3
 2461 0286 DAE6     		b	.L205
 2462              	.L236:
 828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       goto error;
 2463              		.loc 1 828 0
 2464 0288 0320     		movs	r0, #3
 2465 028a D8E6     		b	.L205
 2466              	.L237:
 898:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2467              		.loc 1 898 0
 2468 028c 0120     		movs	r0, #1
 2469 028e D6E6     		b	.L205
 2470              	.LVL188:
 2471              	.L228:
 702:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2472              		.loc 1 702 0
 2473 0290 0220     		movs	r0, #2
 2474              	.LVL189:
 2475 0292 DAE6     		b	.L204
 2476              		.cfi_endproc
 2477              	.LFE133:
 2479              		.section	.text.HAL_SPI_Transmit_IT,"ax",%progbits
 2480              		.align	1
ARM GAS  /tmp/ccNgnWxc.s 			page 118


 2481              		.global	HAL_SPI_Transmit_IT
 2482              		.syntax unified
 2483              		.thumb
 2484              		.thumb_func
 2485              		.fpu fpv4-sp-d16
 2487              	HAL_SPI_Transmit_IT:
 2488              	.LFB135:
1209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 2489              		.loc 1 1209 0
 2490              		.cfi_startproc
 2491              		@ args = 0, pretend = 0, frame = 0
 2492              		@ frame_needed = 0, uses_anonymous_args = 0
 2493              		@ link register save eliminated.
 2494              	.LVL190:
 2495 0000 0346     		mov	r3, r0
 2496              	.LVL191:
1217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2497              		.loc 1 1217 0
 2498 0002 90F85C00 		ldrb	r0, [r0, #92]	@ zero_extendqisi2
 2499              	.LVL192:
 2500 0006 0128     		cmp	r0, #1
 2501 0008 56D0     		beq	.L254
1217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2502              		.loc 1 1217 0 is_stmt 0 discriminator 2
 2503 000a 0120     		movs	r0, #1
 2504 000c 83F85C00 		strb	r0, [r3, #92]
1219:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2505              		.loc 1 1219 0 is_stmt 1 discriminator 2
 2506 0010 0029     		cmp	r1, #0
 2507 0012 48D0     		beq	.L255
1219:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2508              		.loc 1 1219 0 is_stmt 0 discriminator 1
 2509 0014 002A     		cmp	r2, #0
 2510 0016 48D0     		beq	.L256
1225:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2511              		.loc 1 1225 0 is_stmt 1
 2512 0018 93F85D00 		ldrb	r0, [r3, #93]	@ zero_extendqisi2
 2513 001c C0B2     		uxtb	r0, r0
 2514 001e 0128     		cmp	r0, #1
 2515 0020 01D0     		beq	.L259
1227:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 2516              		.loc 1 1227 0
 2517 0022 0220     		movs	r0, #2
 2518 0024 42E0     		b	.L249
 2519              	.L259:
1232:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 2520              		.loc 1 1232 0
 2521 0026 0320     		movs	r0, #3
 2522 0028 83F85D00 		strb	r0, [r3, #93]
1233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
 2523              		.loc 1 1233 0
 2524 002c 0020     		movs	r0, #0
 2525 002e 1866     		str	r0, [r3, #96]
1234:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 2526              		.loc 1 1234 0
 2527 0030 9963     		str	r1, [r3, #56]
1235:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = Size;
ARM GAS  /tmp/ccNgnWxc.s 			page 119


 2528              		.loc 1 1235 0
 2529 0032 9A87     		strh	r2, [r3, #60]	@ movhi
1236:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2530              		.loc 1 1236 0
 2531 0034 DA87     		strh	r2, [r3, #62]	@ movhi
1239:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = 0U;
 2532              		.loc 1 1239 0
 2533 0036 1864     		str	r0, [r3, #64]
1240:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = 0U;
 2534              		.loc 1 1240 0
 2535 0038 A3F84400 		strh	r0, [r3, #68]	@ movhi
1241:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxISR       = NULL;
 2536              		.loc 1 1241 0
 2537 003c A3F84600 		strh	r0, [r3, #70]	@ movhi
1242:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2538              		.loc 1 1242 0
 2539 0040 D864     		str	r0, [r3, #76]
1245:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2540              		.loc 1 1245 0
 2541 0042 DA68     		ldr	r2, [r3, #12]
 2542              	.LVL193:
 2543 0044 B2F5E06F 		cmp	r2, #1792
 2544 0048 19D9     		bls	.L250
1247:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2545              		.loc 1 1247 0
 2546 004a 1C4A     		ldr	r2, .L262
 2547 004c 1A65     		str	r2, [r3, #80]
 2548              	.L251:
1255:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2549              		.loc 1 1255 0
 2550 004e 9A68     		ldr	r2, [r3, #8]
 2551 0050 B2F5004F 		cmp	r2, #32768
 2552 0054 16D0     		beq	.L260
 2553              	.LVL194:
 2554              	.L252:
1262:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2555              		.loc 1 1262 0
 2556 0056 9A6A     		ldr	r2, [r3, #40]
 2557 0058 B2F5005F 		cmp	r2, #8192
 2558 005c 18D0     		beq	.L261
 2559              	.L253:
1269:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2560              		.loc 1 1269 0
 2561 005e 1968     		ldr	r1, [r3]
 2562 0060 4A68     		ldr	r2, [r1, #4]
 2563 0062 42F0A002 		orr	r2, r2, #160
 2564 0066 4A60     		str	r2, [r1, #4]
1273:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2565              		.loc 1 1273 0
 2566 0068 1A68     		ldr	r2, [r3]
 2567 006a 1168     		ldr	r1, [r2]
 2568 006c 11F0400F 		tst	r1, #64
 2569 0070 20D1     		bne	.L258
1276:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2570              		.loc 1 1276 0
 2571 0072 1168     		ldr	r1, [r2]
 2572 0074 41F04001 		orr	r1, r1, #64
ARM GAS  /tmp/ccNgnWxc.s 			page 120


 2573 0078 1160     		str	r1, [r2]
1210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
 2574              		.loc 1 1210 0
 2575 007a 0020     		movs	r0, #0
 2576 007c 16E0     		b	.L249
 2577              	.LVL195:
 2578              	.L250:
1251:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2579              		.loc 1 1251 0
 2580 007e 104A     		ldr	r2, .L262+4
 2581 0080 1A65     		str	r2, [r3, #80]
 2582 0082 E4E7     		b	.L251
 2583              	.L260:
1257:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2584              		.loc 1 1257 0
 2585 0084 1968     		ldr	r1, [r3]
 2586              	.LVL196:
 2587 0086 0A68     		ldr	r2, [r1]
 2588 0088 42F48042 		orr	r2, r2, #16384
 2589 008c 0A60     		str	r2, [r1]
 2590              	.LVL197:
 2591 008e E2E7     		b	.L252
 2592              	.L261:
1264:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2593              		.loc 1 1264 0
 2594 0090 1968     		ldr	r1, [r3]
 2595 0092 0A68     		ldr	r2, [r1]
 2596 0094 22F40052 		bic	r2, r2, #8192
 2597 0098 0A60     		str	r2, [r1]
 2598 009a 1968     		ldr	r1, [r3]
 2599 009c 0A68     		ldr	r2, [r1]
 2600 009e 42F40052 		orr	r2, r2, #8192
 2601 00a2 0A60     		str	r2, [r1]
 2602 00a4 DBE7     		b	.L253
 2603              	.LVL198:
 2604              	.L255:
1221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 2605              		.loc 1 1221 0
 2606 00a6 0120     		movs	r0, #1
 2607 00a8 00E0     		b	.L249
 2608              	.L256:
 2609 00aa 0120     		movs	r0, #1
 2610              	.LVL199:
 2611              	.L249:
1280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
 2612              		.loc 1 1280 0
 2613 00ac 0022     		movs	r2, #0
 2614 00ae 83F85C20 		strb	r2, [r3, #92]
1281:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 2615              		.loc 1 1281 0
 2616 00b2 7047     		bx	lr
 2617              	.LVL200:
 2618              	.L258:
1210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
 2619              		.loc 1 1210 0
 2620 00b4 0020     		movs	r0, #0
 2621 00b6 F9E7     		b	.L249
ARM GAS  /tmp/ccNgnWxc.s 			page 121


 2622              	.LVL201:
 2623              	.L254:
1217:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2624              		.loc 1 1217 0
 2625 00b8 0220     		movs	r0, #2
1282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2626              		.loc 1 1282 0
 2627 00ba 7047     		bx	lr
 2628              	.L263:
 2629              		.align	2
 2630              	.L262:
 2631 00bc 00000000 		.word	SPI_TxISR_16BIT
 2632 00c0 00000000 		.word	SPI_TxISR_8BIT
 2633              		.cfi_endproc
 2634              	.LFE135:
 2636              		.section	.text.HAL_SPI_TransmitReceive_IT,"ax",%progbits
 2637              		.align	1
 2638              		.global	HAL_SPI_TransmitReceive_IT
 2639              		.syntax unified
 2640              		.thumb
 2641              		.thumb_func
 2642              		.fpu fpv4-sp-d16
 2644              	HAL_SPI_TransmitReceive_IT:
 2645              	.LFB137:
1399:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tmp = 0U, tmp1 = 0U;
 2646              		.loc 1 1399 0
 2647              		.cfi_startproc
 2648              		@ args = 0, pretend = 0, frame = 0
 2649              		@ frame_needed = 0, uses_anonymous_args = 0
 2650              		@ link register save eliminated.
 2651              	.LVL202:
 2652 0000 30B4     		push	{r4, r5}
 2653              	.LCFI34:
 2654              		.cfi_def_cfa_offset 8
 2655              		.cfi_offset 4, -8
 2656              		.cfi_offset 5, -4
 2657              	.LVL203:
1408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2658              		.loc 1 1408 0
 2659 0002 90F85C40 		ldrb	r4, [r0, #92]	@ zero_extendqisi2
 2660 0006 012C     		cmp	r4, #1
 2661 0008 00F08980 		beq	.L277
1408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2662              		.loc 1 1408 0 is_stmt 0 discriminator 2
 2663 000c 0124     		movs	r4, #1
 2664 000e 80F85C40 		strb	r4, [r0, #92]
1410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
 2665              		.loc 1 1410 0 is_stmt 1 discriminator 2
 2666 0012 90F85D40 		ldrb	r4, [r0, #93]	@ zero_extendqisi2
 2667 0016 E4B2     		uxtb	r4, r4
 2668              	.LVL204:
1411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2669              		.loc 1 1411 0 discriminator 2
 2670 0018 4568     		ldr	r5, [r0, #4]
 2671              	.LVL205:
1413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL
 2672              		.loc 1 1413 0 discriminator 2
ARM GAS  /tmp/ccNgnWxc.s 			page 122


 2673 001a 012C     		cmp	r4, #1
 2674 001c 10D0     		beq	.L266
1413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL
 2675              		.loc 1 1413 0 is_stmt 0 discriminator 1
 2676 001e B5F5827F 		cmp	r5, #260
 2677 0022 06D0     		beq	.L286
1416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 2678              		.loc 1 1416 0 is_stmt 1
 2679 0024 0223     		movs	r3, #2
 2680              	.LVL206:
 2681              	.L267:
1494:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
 2682              		.loc 1 1494 0
 2683 0026 0022     		movs	r2, #0
 2684 0028 80F85C20 		strb	r2, [r0, #92]
 2685              	.LVL207:
 2686              	.L265:
1496:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2687              		.loc 1 1496 0
 2688 002c 1846     		mov	r0, r3
 2689              	.LVL208:
 2690 002e 30BC     		pop	{r4, r5}
 2691              	.LCFI35:
 2692              		.cfi_remember_state
 2693              		.cfi_restore 5
 2694              		.cfi_restore 4
 2695              		.cfi_def_cfa_offset 0
 2696 0030 7047     		bx	lr
 2697              	.LVL209:
 2698              	.L286:
 2699              	.LCFI36:
 2700              		.cfi_restore_state
1414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2701              		.loc 1 1414 0
 2702 0032 8568     		ldr	r5, [r0, #8]
 2703              	.LVL210:
 2704 0034 002D     		cmp	r5, #0
 2705 0036 68D1     		bne	.L279
1414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2706              		.loc 1 1414 0 is_stmt 0 discriminator 1
 2707 0038 042C     		cmp	r4, #4
 2708 003a 01D0     		beq	.L266
1416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 2709              		.loc 1 1416 0 is_stmt 1
 2710 003c 0223     		movs	r3, #2
 2711              	.LVL211:
 2712 003e F2E7     		b	.L267
 2713              	.LVL212:
 2714              	.L266:
1420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2715              		.loc 1 1420 0
 2716 0040 0029     		cmp	r1, #0
 2717 0042 64D0     		beq	.L281
1420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2718              		.loc 1 1420 0 is_stmt 0 discriminator 1
 2719 0044 002A     		cmp	r2, #0
 2720 0046 64D0     		beq	.L282
ARM GAS  /tmp/ccNgnWxc.s 			page 123


1420:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2721              		.loc 1 1420 0 discriminator 2
 2722 0048 002B     		cmp	r3, #0
 2723 004a 64D0     		beq	.L283
1427:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2724              		.loc 1 1427 0 is_stmt 1
 2725 004c 90F85D40 		ldrb	r4, [r0, #93]	@ zero_extendqisi2
 2726              	.LVL213:
 2727 0050 E4B2     		uxtb	r4, r4
 2728 0052 042C     		cmp	r4, #4
 2729 0054 02D0     		beq	.L268
1429:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2730              		.loc 1 1429 0
 2731 0056 0524     		movs	r4, #5
 2732 0058 80F85D40 		strb	r4, [r0, #93]
 2733              	.L268:
1433:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pTxData;
 2734              		.loc 1 1433 0
 2735 005c 0024     		movs	r4, #0
 2736 005e 0466     		str	r4, [r0, #96]
1434:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 2737              		.loc 1 1434 0
 2738 0060 8163     		str	r1, [r0, #56]
1435:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = Size;
 2739              		.loc 1 1435 0
 2740 0062 8387     		strh	r3, [r0, #60]	@ movhi
1436:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pRxData;
 2741              		.loc 1 1436 0
 2742 0064 C387     		strh	r3, [r0, #62]	@ movhi
1437:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 2743              		.loc 1 1437 0
 2744 0066 0264     		str	r2, [r0, #64]
1438:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = Size;
 2745              		.loc 1 1438 0
 2746 0068 A0F84430 		strh	r3, [r0, #68]	@ movhi
1439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2747              		.loc 1 1439 0
 2748 006c A0F84630 		strh	r3, [r0, #70]	@ movhi
1442:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2749              		.loc 1 1442 0
 2750 0070 C368     		ldr	r3, [r0, #12]
 2751              	.LVL214:
 2752 0072 B3F5E06F 		cmp	r3, #1792
 2753 0076 27D9     		bls	.L269
1444:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxISR     = SPI_2linesTxISR_16BIT;
 2754              		.loc 1 1444 0
 2755 0078 2A4B     		ldr	r3, .L289
 2756 007a C364     		str	r3, [r0, #76]
1445:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2757              		.loc 1 1445 0
 2758 007c 2A4B     		ldr	r3, .L289+4
 2759 007e 0365     		str	r3, [r0, #80]
 2760              	.L270:
1455:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2761              		.loc 1 1455 0
 2762 0080 836A     		ldr	r3, [r0, #40]
 2763 0082 B3F5005F 		cmp	r3, #8192
ARM GAS  /tmp/ccNgnWxc.s 			page 124


 2764 0086 24D0     		beq	.L287
1466:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2765              		.loc 1 1466 0
 2766 0088 0023     		movs	r3, #0
 2767 008a 8364     		str	r3, [r0, #72]
 2768              	.LVL215:
 2769              	.L273:
1471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2770              		.loc 1 1471 0
 2771 008c C368     		ldr	r3, [r0, #12]
 2772 008e B3F5E06F 		cmp	r3, #1792
 2773 0092 04D8     		bhi	.L274
1471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2774              		.loc 1 1471 0 is_stmt 0 discriminator 1
 2775 0094 B0F84630 		ldrh	r3, [r0, #70]
 2776 0098 9BB2     		uxth	r3, r3
 2777 009a 012B     		cmp	r3, #1
 2778 009c 2FD9     		bls	.L275
 2779              	.L274:
1474:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2780              		.loc 1 1474 0 is_stmt 1
 2781 009e 0268     		ldr	r2, [r0]
 2782 00a0 5368     		ldr	r3, [r2, #4]
 2783 00a2 23F48053 		bic	r3, r3, #4096
 2784 00a6 5360     		str	r3, [r2, #4]
 2785              	.L276:
1483:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2786              		.loc 1 1483 0
 2787 00a8 0268     		ldr	r2, [r0]
 2788 00aa 5368     		ldr	r3, [r2, #4]
 2789 00ac 43F0E003 		orr	r3, r3, #224
 2790 00b0 5360     		str	r3, [r2, #4]
1486:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2791              		.loc 1 1486 0
 2792 00b2 0368     		ldr	r3, [r0]
 2793 00b4 1A68     		ldr	r2, [r3]
 2794 00b6 12F0400F 		tst	r2, #64
 2795 00ba 2ED1     		bne	.L284
1489:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2796              		.loc 1 1489 0
 2797 00bc 1A68     		ldr	r2, [r3]
 2798 00be 42F04002 		orr	r2, r2, #64
 2799 00c2 1A60     		str	r2, [r3]
1401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
 2800              		.loc 1 1401 0
 2801 00c4 0023     		movs	r3, #0
 2802 00c6 AEE7     		b	.L267
 2803              	.LVL216:
 2804              	.L269:
1449:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxISR     = SPI_2linesTxISR_8BIT;
 2805              		.loc 1 1449 0
 2806 00c8 184B     		ldr	r3, .L289+8
 2807 00ca C364     		str	r3, [r0, #76]
1450:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2808              		.loc 1 1450 0
 2809 00cc 184B     		ldr	r3, .L289+12
 2810 00ce 0365     		str	r3, [r0, #80]
ARM GAS  /tmp/ccNgnWxc.s 			page 125


 2811 00d0 D6E7     		b	.L270
 2812              	.L287:
1457:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if ((hspi->Init.DataSize <= SPI_DATASIZE_8BIT) && (hspi->Init.CRCLength == SPI_CRC_LENGTH_16BIT
 2813              		.loc 1 1457 0
 2814 00d2 0123     		movs	r3, #1
 2815 00d4 8364     		str	r3, [r0, #72]
1458:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 2816              		.loc 1 1458 0
 2817 00d6 C368     		ldr	r3, [r0, #12]
 2818 00d8 B3F5E06F 		cmp	r3, #1792
 2819 00dc 02D8     		bhi	.L272
1458:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 2820              		.loc 1 1458 0 is_stmt 0 discriminator 1
 2821 00de 036B     		ldr	r3, [r0, #48]
 2822 00e0 022B     		cmp	r3, #2
 2823 00e2 0AD0     		beq	.L288
 2824              	.L272:
1462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2825              		.loc 1 1462 0 is_stmt 1
 2826 00e4 0268     		ldr	r2, [r0]
 2827              	.LVL217:
 2828 00e6 1368     		ldr	r3, [r2]
 2829 00e8 23F40053 		bic	r3, r3, #8192
 2830 00ec 1360     		str	r3, [r2]
 2831              	.LVL218:
 2832 00ee 0268     		ldr	r2, [r0]
 2833 00f0 1368     		ldr	r3, [r2]
 2834 00f2 43F40053 		orr	r3, r3, #8192
 2835 00f6 1360     		str	r3, [r2]
 2836 00f8 C8E7     		b	.L273
 2837              	.LVL219:
 2838              	.L288:
1460:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 2839              		.loc 1 1460 0
 2840 00fa 8364     		str	r3, [r0, #72]
 2841 00fc F2E7     		b	.L272
 2842              	.LVL220:
 2843              	.L275:
1479:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2844              		.loc 1 1479 0
 2845 00fe 0268     		ldr	r2, [r0]
 2846 0100 5368     		ldr	r3, [r2, #4]
 2847 0102 43F48053 		orr	r3, r3, #4096
 2848 0106 5360     		str	r3, [r2, #4]
 2849 0108 CEE7     		b	.L276
 2850              	.LVL221:
 2851              	.L279:
1416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 2852              		.loc 1 1416 0
 2853 010a 0223     		movs	r3, #2
 2854              	.LVL222:
 2855 010c 8BE7     		b	.L267
 2856              	.LVL223:
 2857              	.L281:
1422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 2858              		.loc 1 1422 0
 2859 010e 0123     		movs	r3, #1
ARM GAS  /tmp/ccNgnWxc.s 			page 126


 2860              	.LVL224:
 2861 0110 89E7     		b	.L267
 2862              	.LVL225:
 2863              	.L282:
 2864 0112 0123     		movs	r3, #1
 2865              	.LVL226:
 2866 0114 87E7     		b	.L267
 2867              	.LVL227:
 2868              	.L283:
 2869 0116 0123     		movs	r3, #1
 2870              	.LVL228:
 2871 0118 85E7     		b	.L267
 2872              	.LVL229:
 2873              	.L284:
1401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
 2874              		.loc 1 1401 0
 2875 011a 0023     		movs	r3, #0
 2876 011c 83E7     		b	.L267
 2877              	.LVL230:
 2878              	.L277:
1408:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2879              		.loc 1 1408 0
 2880 011e 0223     		movs	r3, #2
 2881              	.LVL231:
 2882 0120 84E7     		b	.L265
 2883              	.L290:
 2884 0122 00BF     		.align	2
 2885              	.L289:
 2886 0124 00000000 		.word	SPI_2linesRxISR_16BIT
 2887 0128 00000000 		.word	SPI_2linesTxISR_16BIT
 2888 012c 00000000 		.word	SPI_2linesRxISR_8BIT
 2889 0130 00000000 		.word	SPI_2linesTxISR_8BIT
 2890              		.cfi_endproc
 2891              	.LFE137:
 2893              		.section	.text.HAL_SPI_Receive_IT,"ax",%progbits
 2894              		.align	1
 2895              		.global	HAL_SPI_Receive_IT
 2896              		.syntax unified
 2897              		.thumb
 2898              		.thumb_func
 2899              		.fpu fpv4-sp-d16
 2901              	HAL_SPI_Receive_IT:
 2902              	.LFB136:
1293:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 2903              		.loc 1 1293 0
 2904              		.cfi_startproc
 2905              		@ args = 0, pretend = 0, frame = 0
 2906              		@ frame_needed = 0, uses_anonymous_args = 0
 2907              	.LVL232:
 2908 0000 10B5     		push	{r4, lr}
 2909              	.LCFI37:
 2910              		.cfi_def_cfa_offset 8
 2911              		.cfi_offset 4, -8
 2912              		.cfi_offset 14, -4
 2913 0002 0446     		mov	r4, r0
 2914              	.LVL233:
1297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
ARM GAS  /tmp/ccNgnWxc.s 			page 127


 2915              		.loc 1 1297 0
 2916 0004 8068     		ldr	r0, [r0, #8]
 2917              	.LVL234:
 2918 0006 18B9     		cbnz	r0, .L292
1297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2919              		.loc 1 1297 0 is_stmt 0 discriminator 1
 2920 0008 6368     		ldr	r3, [r4, #4]
 2921 000a B3F5827F 		cmp	r3, #260
 2922 000e 10D0     		beq	.L307
 2923              	.L292:
1305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2924              		.loc 1 1305 0 is_stmt 1
 2925 0010 94F85C00 		ldrb	r0, [r4, #92]	@ zero_extendqisi2
 2926 0014 0128     		cmp	r0, #1
 2927 0016 76D0     		beq	.L301
1305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2928              		.loc 1 1305 0 is_stmt 0 discriminator 2
 2929 0018 0123     		movs	r3, #1
 2930 001a 84F85C30 		strb	r3, [r4, #92]
1307:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2931              		.loc 1 1307 0 is_stmt 1 discriminator 2
 2932 001e 94F85D00 		ldrb	r0, [r4, #93]	@ zero_extendqisi2
 2933 0022 C0B2     		uxtb	r0, r0
 2934 0024 9842     		cmp	r0, r3
 2935 0026 0DD0     		beq	.L308
1309:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 2936              		.loc 1 1309 0
 2937 0028 0220     		movs	r0, #2
 2938              	.LVL235:
 2939              	.L294:
1385:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
 2940              		.loc 1 1385 0
 2941 002a 0023     		movs	r3, #0
 2942 002c 84F85C30 		strb	r3, [r4, #92]
 2943              	.LVL236:
 2944              	.L293:
1387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2945              		.loc 1 1387 0
 2946 0030 10BD     		pop	{r4, pc}
 2947              	.LVL237:
 2948              	.L307:
 2949 0032 1346     		mov	r3, r2
 2950 0034 2046     		mov	r0, r4
1299:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line 
 2951              		.loc 1 1299 0
 2952 0036 0422     		movs	r2, #4
 2953              	.LVL238:
 2954 0038 84F85D20 		strb	r2, [r4, #93]
1301:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2955              		.loc 1 1301 0
 2956 003c 0A46     		mov	r2, r1
 2957 003e FFF7FEFF 		bl	HAL_SPI_TransmitReceive_IT
 2958              	.LVL239:
 2959 0042 F5E7     		b	.L293
 2960              	.LVL240:
 2961              	.L308:
1313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
ARM GAS  /tmp/ccNgnWxc.s 			page 128


 2962              		.loc 1 1313 0
 2963 0044 0029     		cmp	r1, #0
 2964 0046 58D0     		beq	.L303
1313:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2965              		.loc 1 1313 0 is_stmt 0 discriminator 1
 2966 0048 002A     		cmp	r2, #0
 2967 004a 58D0     		beq	.L304
1320:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 2968              		.loc 1 1320 0 is_stmt 1
 2969 004c 0423     		movs	r3, #4
 2970 004e 84F85D30 		strb	r3, [r4, #93]
1321:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
 2971              		.loc 1 1321 0
 2972 0052 0023     		movs	r3, #0
 2973 0054 2366     		str	r3, [r4, #96]
1322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 2974              		.loc 1 1322 0
 2975 0056 2164     		str	r1, [r4, #64]
1323:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = Size;
 2976              		.loc 1 1323 0
 2977 0058 A4F84420 		strh	r2, [r4, #68]	@ movhi
1324:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2978              		.loc 1 1324 0
 2979 005c A4F84620 		strh	r2, [r4, #70]	@ movhi
1327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = 0U;
 2980              		.loc 1 1327 0
 2981 0060 A363     		str	r3, [r4, #56]
1328:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 2982              		.loc 1 1328 0
 2983 0062 A387     		strh	r3, [r4, #60]	@ movhi
1329:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
 2984              		.loc 1 1329 0
 2985 0064 E387     		strh	r3, [r4, #62]	@ movhi
1330:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 2986              		.loc 1 1330 0
 2987 0066 2365     		str	r3, [r4, #80]
1333:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 2988              		.loc 1 1333 0
 2989 0068 E368     		ldr	r3, [r4, #12]
 2990 006a B3F5E06F 		cmp	r3, #1792
 2991 006e 20D9     		bls	.L295
1336:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxISR = SPI_RxISR_16BIT;
 2992              		.loc 1 1336 0
 2993 0070 2268     		ldr	r2, [r4]
 2994              	.LVL241:
 2995 0072 5368     		ldr	r3, [r2, #4]
 2996 0074 23F48053 		bic	r3, r3, #4096
 2997 0078 5360     		str	r3, [r2, #4]
 2998              	.LVL242:
1337:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 2999              		.loc 1 1337 0
 3000 007a 244B     		ldr	r3, .L312
 3001 007c E364     		str	r3, [r4, #76]
 3002              	.L296:
1347:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3003              		.loc 1 1347 0
 3004 007e A368     		ldr	r3, [r4, #8]
ARM GAS  /tmp/ccNgnWxc.s 			page 129


 3005 0080 B3F5004F 		cmp	r3, #32768
 3006 0084 1DD0     		beq	.L309
 3007              	.L297:
1354:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3008              		.loc 1 1354 0
 3009 0086 A36A     		ldr	r3, [r4, #40]
 3010 0088 B3F5005F 		cmp	r3, #8192
 3011 008c 1FD0     		beq	.L310
1365:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3012              		.loc 1 1365 0
 3013 008e 0023     		movs	r3, #0
 3014 0090 A364     		str	r3, [r4, #72]
 3015              	.L300:
1370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3016              		.loc 1 1370 0
 3017 0092 2268     		ldr	r2, [r4]
 3018 0094 5368     		ldr	r3, [r2, #4]
 3019 0096 43F06003 		orr	r3, r3, #96
 3020 009a 5360     		str	r3, [r2, #4]
1377:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3021              		.loc 1 1377 0
 3022 009c 2368     		ldr	r3, [r4]
 3023 009e 1A68     		ldr	r2, [r3]
 3024 00a0 12F0400F 		tst	r2, #64
 3025 00a4 2DD1     		bne	.L305
1380:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3026              		.loc 1 1380 0
 3027 00a6 1A68     		ldr	r2, [r3]
 3028 00a8 42F04002 		orr	r2, r2, #64
 3029 00ac 1A60     		str	r2, [r3]
1294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
 3030              		.loc 1 1294 0
 3031 00ae 0020     		movs	r0, #0
 3032 00b0 BBE7     		b	.L294
 3033              	.LVL243:
 3034              	.L295:
1342:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxISR = SPI_RxISR_8BIT;
 3035              		.loc 1 1342 0
 3036 00b2 2268     		ldr	r2, [r4]
 3037              	.LVL244:
 3038 00b4 5368     		ldr	r3, [r2, #4]
 3039 00b6 43F48053 		orr	r3, r3, #4096
 3040 00ba 5360     		str	r3, [r2, #4]
 3041              	.LVL245:
1343:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3042              		.loc 1 1343 0
 3043 00bc 144B     		ldr	r3, .L312+4
 3044 00be E364     		str	r3, [r4, #76]
 3045 00c0 DDE7     		b	.L296
 3046              	.L309:
1349:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3047              		.loc 1 1349 0
 3048 00c2 2268     		ldr	r2, [r4]
 3049 00c4 1368     		ldr	r3, [r2]
 3050 00c6 23F48043 		bic	r3, r3, #16384
 3051 00ca 1360     		str	r3, [r2]
 3052 00cc DBE7     		b	.L297
ARM GAS  /tmp/ccNgnWxc.s 			page 130


 3053              	.L310:
1356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if ((hspi->Init.DataSize <= SPI_DATASIZE_8BIT) && (hspi->Init.CRCLength == SPI_CRC_LENGTH_16BIT
 3054              		.loc 1 1356 0
 3055 00ce 0123     		movs	r3, #1
 3056 00d0 A364     		str	r3, [r4, #72]
1357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 3057              		.loc 1 1357 0
 3058 00d2 E368     		ldr	r3, [r4, #12]
 3059 00d4 B3F5E06F 		cmp	r3, #1792
 3060 00d8 02D8     		bhi	.L299
1357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 3061              		.loc 1 1357 0 is_stmt 0 discriminator 1
 3062 00da 236B     		ldr	r3, [r4, #48]
 3063 00dc 022B     		cmp	r3, #2
 3064 00de 0AD0     		beq	.L311
 3065              	.L299:
1361:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3066              		.loc 1 1361 0 is_stmt 1
 3067 00e0 2268     		ldr	r2, [r4]
 3068 00e2 1368     		ldr	r3, [r2]
 3069 00e4 23F40053 		bic	r3, r3, #8192
 3070 00e8 1360     		str	r3, [r2]
 3071 00ea 2268     		ldr	r2, [r4]
 3072 00ec 1368     		ldr	r3, [r2]
 3073 00ee 43F40053 		orr	r3, r3, #8192
 3074 00f2 1360     		str	r3, [r2]
 3075 00f4 CDE7     		b	.L300
 3076              	.L311:
1359:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 3077              		.loc 1 1359 0
 3078 00f6 A364     		str	r3, [r4, #72]
 3079 00f8 F2E7     		b	.L299
 3080              	.LVL246:
 3081              	.L303:
1315:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 3082              		.loc 1 1315 0
 3083 00fa 0120     		movs	r0, #1
 3084 00fc 95E7     		b	.L294
 3085              	.L304:
 3086 00fe 0120     		movs	r0, #1
 3087 0100 93E7     		b	.L294
 3088              	.LVL247:
 3089              	.L305:
1294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
 3090              		.loc 1 1294 0
 3091 0102 0020     		movs	r0, #0
 3092 0104 91E7     		b	.L294
 3093              	.LVL248:
 3094              	.L301:
1305:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3095              		.loc 1 1305 0
 3096 0106 0220     		movs	r0, #2
 3097 0108 92E7     		b	.L293
 3098              	.L313:
 3099 010a 00BF     		.align	2
 3100              	.L312:
 3101 010c 00000000 		.word	SPI_RxISR_16BIT
ARM GAS  /tmp/ccNgnWxc.s 			page 131


 3102 0110 00000000 		.word	SPI_RxISR_8BIT
 3103              		.cfi_endproc
 3104              	.LFE136:
 3106              		.section	.text.HAL_SPI_Transmit_DMA,"ax",%progbits
 3107              		.align	1
 3108              		.global	HAL_SPI_Transmit_DMA
 3109              		.syntax unified
 3110              		.thumb
 3111              		.thumb_func
 3112              		.fpu fpv4-sp-d16
 3114              	HAL_SPI_Transmit_DMA:
 3115              	.LFB138:
1507:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 3116              		.loc 1 1507 0
 3117              		.cfi_startproc
 3118              		@ args = 0, pretend = 0, frame = 0
 3119              		@ frame_needed = 0, uses_anonymous_args = 0
 3120              	.LVL249:
1517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3121              		.loc 1 1517 0
 3122 0000 90F85C30 		ldrb	r3, [r0, #92]	@ zero_extendqisi2
 3123 0004 012B     		cmp	r3, #1
 3124 0006 00F08C80 		beq	.L322
1507:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 3125              		.loc 1 1507 0 discriminator 2
 3126 000a 10B5     		push	{r4, lr}
 3127              	.LCFI38:
 3128              		.cfi_def_cfa_offset 8
 3129              		.cfi_offset 4, -8
 3130              		.cfi_offset 14, -4
 3131 000c 0446     		mov	r4, r0
1517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3132              		.loc 1 1517 0 discriminator 2
 3133 000e 0123     		movs	r3, #1
 3134 0010 80F85C30 		strb	r3, [r0, #92]
1519:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3135              		.loc 1 1519 0 discriminator 2
 3136 0014 90F85D30 		ldrb	r3, [r0, #93]	@ zero_extendqisi2
 3137 0018 DBB2     		uxtb	r3, r3
 3138 001a 012B     		cmp	r3, #1
 3139 001c 04D0     		beq	.L330
1521:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 3140              		.loc 1 1521 0
 3141 001e 0220     		movs	r0, #2
 3142              	.LVL250:
 3143              	.L316:
1606:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
 3144              		.loc 1 1606 0
 3145 0020 0023     		movs	r3, #0
 3146 0022 84F85C30 		strb	r3, [r4, #92]
1608:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3147              		.loc 1 1608 0
 3148 0026 10BD     		pop	{r4, pc}
 3149              	.LVL251:
 3150              	.L330:
1525:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3151              		.loc 1 1525 0
ARM GAS  /tmp/ccNgnWxc.s 			page 132


 3152 0028 0029     		cmp	r1, #0
 3153 002a 76D0     		beq	.L324
1525:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3154              		.loc 1 1525 0 is_stmt 0 discriminator 1
 3155 002c 002A     		cmp	r2, #0
 3156 002e 76D0     		beq	.L325
1532:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 3157              		.loc 1 1532 0 is_stmt 1
 3158 0030 0323     		movs	r3, #3
 3159 0032 80F85D30 		strb	r3, [r0, #93]
1533:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
 3160              		.loc 1 1533 0
 3161 0036 0023     		movs	r3, #0
 3162 0038 0366     		str	r3, [r0, #96]
1534:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 3163              		.loc 1 1534 0
 3164 003a 8163     		str	r1, [r0, #56]
1535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = Size;
 3165              		.loc 1 1535 0
 3166 003c 8287     		strh	r2, [r0, #60]	@ movhi
1536:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3167              		.loc 1 1536 0
 3168 003e C287     		strh	r2, [r0, #62]	@ movhi
1539:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
 3169              		.loc 1 1539 0
 3170 0040 0364     		str	r3, [r0, #64]
1540:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxISR       = NULL;
 3171              		.loc 1 1540 0
 3172 0042 0365     		str	r3, [r0, #80]
1541:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = 0U;
 3173              		.loc 1 1541 0
 3174 0044 C364     		str	r3, [r0, #76]
1542:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = 0U;
 3175              		.loc 1 1542 0
 3176 0046 A0F84430 		strh	r3, [r0, #68]	@ movhi
1543:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3177              		.loc 1 1543 0
 3178 004a A0F84630 		strh	r3, [r0, #70]	@ movhi
1546:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3179              		.loc 1 1546 0
 3180 004e 8368     		ldr	r3, [r0, #8]
 3181 0050 B3F5004F 		cmp	r3, #32768
 3182 0054 39D0     		beq	.L331
 3183              	.LVL252:
 3184              	.L317:
1553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3185              		.loc 1 1553 0
 3186 0056 A36A     		ldr	r3, [r4, #40]
 3187 0058 B3F5005F 		cmp	r3, #8192
 3188 005c 3BD0     		beq	.L332
 3189              	.L318:
1560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3190              		.loc 1 1560 0
 3191 005e 636D     		ldr	r3, [r4, #84]
 3192 0060 314A     		ldr	r2, .L334
 3193 0062 1A63     		str	r2, [r3, #48]
1563:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
ARM GAS  /tmp/ccNgnWxc.s 			page 133


 3194              		.loc 1 1563 0
 3195 0064 636D     		ldr	r3, [r4, #84]
 3196 0066 314A     		ldr	r2, .L334+4
 3197 0068 DA62     		str	r2, [r3, #44]
1566:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3198              		.loc 1 1566 0
 3199 006a 636D     		ldr	r3, [r4, #84]
 3200 006c 304A     		ldr	r2, .L334+8
 3201 006e 5A63     		str	r2, [r3, #52]
1569:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3202              		.loc 1 1569 0
 3203 0070 636D     		ldr	r3, [r4, #84]
 3204 0072 0022     		movs	r2, #0
 3205 0074 9A63     		str	r2, [r3, #56]
1571:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Packing mode is enabled only if the DMA setting is HALWORD */
 3206              		.loc 1 1571 0
 3207 0076 2268     		ldr	r2, [r4]
 3208 0078 5368     		ldr	r3, [r2, #4]
 3209 007a 23F48043 		bic	r3, r3, #16384
 3210 007e 5360     		str	r3, [r2, #4]
1573:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3211              		.loc 1 1573 0
 3212 0080 E368     		ldr	r3, [r4, #12]
 3213 0082 B3F5E06F 		cmp	r3, #1792
 3214 0086 04D8     		bhi	.L319
1573:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3215              		.loc 1 1573 0 is_stmt 0 discriminator 1
 3216 0088 636D     		ldr	r3, [r4, #84]
 3217 008a 9B69     		ldr	r3, [r3, #24]
 3218 008c B3F5806F 		cmp	r3, #1024
 3219 0090 2CD0     		beq	.L333
 3220              	.L319:
1589:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3221              		.loc 1 1589 0 is_stmt 1
 3222 0092 2268     		ldr	r2, [r4]
 3223 0094 E38F     		ldrh	r3, [r4, #62]
 3224 0096 0C32     		adds	r2, r2, #12
 3225 0098 A16B     		ldr	r1, [r4, #56]
 3226              	.LVL253:
 3227 009a 606D     		ldr	r0, [r4, #84]
 3228              	.LVL254:
 3229 009c FFF7FEFF 		bl	HAL_DMA_Start_IT
 3230              	.LVL255:
1592:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3231              		.loc 1 1592 0
 3232 00a0 2368     		ldr	r3, [r4]
 3233 00a2 1A68     		ldr	r2, [r3]
 3234 00a4 12F0400F 		tst	r2, #64
 3235 00a8 03D1     		bne	.L321
1595:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3236              		.loc 1 1595 0
 3237 00aa 1A68     		ldr	r2, [r3]
 3238 00ac 42F04002 		orr	r2, r2, #64
 3239 00b0 1A60     		str	r2, [r3]
 3240              	.L321:
1599:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3241              		.loc 1 1599 0
ARM GAS  /tmp/ccNgnWxc.s 			page 134


 3242 00b2 2268     		ldr	r2, [r4]
 3243 00b4 5368     		ldr	r3, [r2, #4]
 3244 00b6 43F02003 		orr	r3, r3, #32
 3245 00ba 5360     		str	r3, [r2, #4]
1602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3246              		.loc 1 1602 0
 3247 00bc 2268     		ldr	r2, [r4]
 3248 00be 5368     		ldr	r3, [r2, #4]
 3249 00c0 43F00203 		orr	r3, r3, #2
 3250 00c4 5360     		str	r3, [r2, #4]
1508:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
 3251              		.loc 1 1508 0
 3252 00c6 0020     		movs	r0, #0
 3253 00c8 AAE7     		b	.L316
 3254              	.LVL256:
 3255              	.L331:
1548:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3256              		.loc 1 1548 0
 3257 00ca 0268     		ldr	r2, [r0]
 3258              	.LVL257:
 3259 00cc 1368     		ldr	r3, [r2]
 3260 00ce 43F48043 		orr	r3, r3, #16384
 3261 00d2 1360     		str	r3, [r2]
 3262              	.LVL258:
 3263 00d4 BFE7     		b	.L317
 3264              	.L332:
1555:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3265              		.loc 1 1555 0
 3266 00d6 2268     		ldr	r2, [r4]
 3267 00d8 1368     		ldr	r3, [r2]
 3268 00da 23F40053 		bic	r3, r3, #8192
 3269 00de 1360     		str	r3, [r2]
 3270 00e0 2268     		ldr	r2, [r4]
 3271 00e2 1368     		ldr	r3, [r2]
 3272 00e4 43F40053 		orr	r3, r3, #8192
 3273 00e8 1360     		str	r3, [r2]
 3274 00ea B8E7     		b	.L318
 3275              	.L333:
1576:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 3276              		.loc 1 1576 0
 3277 00ec E38F     		ldrh	r3, [r4, #62]
 3278 00ee 13F0010F 		tst	r3, #1
 3279 00f2 08D1     		bne	.L320
1578:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->TxXferCount = (hspi->TxXferCount >> 1U);
 3280              		.loc 1 1578 0
 3281 00f4 2268     		ldr	r2, [r4]
 3282 00f6 5368     		ldr	r3, [r2, #4]
 3283 00f8 23F48043 		bic	r3, r3, #16384
 3284 00fc 5360     		str	r3, [r2, #4]
1579:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 3285              		.loc 1 1579 0
 3286 00fe E38F     		ldrh	r3, [r4, #62]
 3287 0100 5B08     		lsrs	r3, r3, #1
 3288 0102 E387     		strh	r3, [r4, #62]	@ movhi
 3289 0104 C5E7     		b	.L319
 3290              	.L320:
1583:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->TxXferCount = (hspi->TxXferCount >> 1U) + 1U;
ARM GAS  /tmp/ccNgnWxc.s 			page 135


 3291              		.loc 1 1583 0
 3292 0106 2268     		ldr	r2, [r4]
 3293 0108 5368     		ldr	r3, [r2, #4]
 3294 010a 43F48043 		orr	r3, r3, #16384
 3295 010e 5360     		str	r3, [r2, #4]
1584:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 3296              		.loc 1 1584 0
 3297 0110 E38F     		ldrh	r3, [r4, #62]
 3298 0112 5B08     		lsrs	r3, r3, #1
 3299 0114 0133     		adds	r3, r3, #1
 3300 0116 E387     		strh	r3, [r4, #62]	@ movhi
 3301 0118 BBE7     		b	.L319
 3302              	.LVL259:
 3303              	.L324:
1527:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 3304              		.loc 1 1527 0
 3305 011a 0120     		movs	r0, #1
 3306              	.LVL260:
 3307 011c 80E7     		b	.L316
 3308              	.LVL261:
 3309              	.L325:
 3310 011e 0120     		movs	r0, #1
 3311              	.LVL262:
 3312 0120 7EE7     		b	.L316
 3313              	.LVL263:
 3314              	.L322:
 3315              	.LCFI39:
 3316              		.cfi_def_cfa_offset 0
 3317              		.cfi_restore 4
 3318              		.cfi_restore 14
1517:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3319              		.loc 1 1517 0
 3320 0122 0220     		movs	r0, #2
 3321              	.LVL264:
1608:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3322              		.loc 1 1608 0
 3323 0124 7047     		bx	lr
 3324              	.L335:
 3325 0126 00BF     		.align	2
 3326              	.L334:
 3327 0128 00000000 		.word	SPI_DMAHalfTransmitCplt
 3328 012c 00000000 		.word	SPI_DMATransmitCplt
 3329 0130 00000000 		.word	SPI_DMAError
 3330              		.cfi_endproc
 3331              	.LFE138:
 3333              		.section	.text.HAL_SPI_TransmitReceive_DMA,"ax",%progbits
 3334              		.align	1
 3335              		.global	HAL_SPI_TransmitReceive_DMA
 3336              		.syntax unified
 3337              		.thumb
 3338              		.thumb_func
 3339              		.fpu fpv4-sp-d16
 3341              	HAL_SPI_TransmitReceive_DMA:
 3342              	.LFB140:
1756:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tmp = 0U, tmp1 = 0U;
 3343              		.loc 1 1756 0
 3344              		.cfi_startproc
ARM GAS  /tmp/ccNgnWxc.s 			page 136


 3345              		@ args = 0, pretend = 0, frame = 0
 3346              		@ frame_needed = 0, uses_anonymous_args = 0
 3347              	.LVL265:
 3348 0000 38B5     		push	{r3, r4, r5, lr}
 3349              	.LCFI40:
 3350              		.cfi_def_cfa_offset 16
 3351              		.cfi_offset 3, -16
 3352              		.cfi_offset 4, -12
 3353              		.cfi_offset 5, -8
 3354              		.cfi_offset 14, -4
 3355              	.LVL266:
1768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3356              		.loc 1 1768 0
 3357 0002 90F85C40 		ldrb	r4, [r0, #92]	@ zero_extendqisi2
 3358 0006 012C     		cmp	r4, #1
 3359 0008 00F0ED80 		beq	.L350
 3360 000c 0446     		mov	r4, r0
1768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3361              		.loc 1 1768 0 is_stmt 0 discriminator 2
 3362 000e 0120     		movs	r0, #1
 3363              	.LVL267:
 3364 0010 84F85C00 		strb	r0, [r4, #92]
1770:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
 3365              		.loc 1 1770 0 is_stmt 1 discriminator 2
 3366 0014 94F85D00 		ldrb	r0, [r4, #93]	@ zero_extendqisi2
 3367 0018 C0B2     		uxtb	r0, r0
 3368              	.LVL268:
1771:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (!((tmp == HAL_SPI_STATE_READY) ||
 3369              		.loc 1 1771 0 discriminator 2
 3370 001a 6568     		ldr	r5, [r4, #4]
 3371              	.LVL269:
1772:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL
 3372              		.loc 1 1772 0 discriminator 2
 3373 001c 0128     		cmp	r0, #1
 3374 001e 0FD0     		beq	.L338
1772:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL
 3375              		.loc 1 1772 0 is_stmt 0 discriminator 1
 3376 0020 B5F5827F 		cmp	r5, #260
 3377 0024 04D0     		beq	.L358
1775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 3378              		.loc 1 1775 0 is_stmt 1
 3379 0026 0220     		movs	r0, #2
 3380              	.LVL270:
 3381              	.L339:
1910:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
 3382              		.loc 1 1910 0
 3383 0028 0023     		movs	r3, #0
 3384 002a 84F85C30 		strb	r3, [r4, #92]
 3385              	.LVL271:
 3386              	.L337:
1912:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3387              		.loc 1 1912 0
 3388 002e 38BD     		pop	{r3, r4, r5, pc}
 3389              	.LVL272:
 3390              	.L358:
1773:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3391              		.loc 1 1773 0
ARM GAS  /tmp/ccNgnWxc.s 			page 137


 3392 0030 A568     		ldr	r5, [r4, #8]
 3393              	.LVL273:
 3394 0032 002D     		cmp	r5, #0
 3395 0034 40F0CF80 		bne	.L352
1773:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3396              		.loc 1 1773 0 is_stmt 0 discriminator 1
 3397 0038 0428     		cmp	r0, #4
 3398 003a 01D0     		beq	.L338
1775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 3399              		.loc 1 1775 0 is_stmt 1
 3400 003c 0220     		movs	r0, #2
 3401              	.LVL274:
 3402 003e F3E7     		b	.L339
 3403              	.LVL275:
 3404              	.L338:
1779:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3405              		.loc 1 1779 0
 3406 0040 0029     		cmp	r1, #0
 3407 0042 00F0CA80 		beq	.L354
1779:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3408              		.loc 1 1779 0 is_stmt 0 discriminator 1
 3409 0046 002A     		cmp	r2, #0
 3410 0048 00F0C980 		beq	.L355
1779:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3411              		.loc 1 1779 0 discriminator 2
 3412 004c 002B     		cmp	r3, #0
 3413 004e 00F0C880 		beq	.L356
1786:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3414              		.loc 1 1786 0 is_stmt 1
 3415 0052 94F85D00 		ldrb	r0, [r4, #93]	@ zero_extendqisi2
 3416              	.LVL276:
 3417 0056 C0B2     		uxtb	r0, r0
 3418 0058 0428     		cmp	r0, #4
 3419 005a 02D0     		beq	.L340
1788:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3420              		.loc 1 1788 0
 3421 005c 0520     		movs	r0, #5
 3422 005e 84F85D00 		strb	r0, [r4, #93]
 3423              	.L340:
1792:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pTxData;
 3424              		.loc 1 1792 0
 3425 0062 0020     		movs	r0, #0
 3426 0064 2066     		str	r0, [r4, #96]
1793:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 3427              		.loc 1 1793 0
 3428 0066 A163     		str	r1, [r4, #56]
1794:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = Size;
 3429              		.loc 1 1794 0
 3430 0068 A387     		strh	r3, [r4, #60]	@ movhi
1795:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pRxData;
 3431              		.loc 1 1795 0
 3432 006a E387     		strh	r3, [r4, #62]	@ movhi
1796:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 3433              		.loc 1 1796 0
 3434 006c 2264     		str	r2, [r4, #64]
1797:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = Size;
 3435              		.loc 1 1797 0
ARM GAS  /tmp/ccNgnWxc.s 			page 138


 3436 006e A4F84430 		strh	r3, [r4, #68]	@ movhi
1798:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3437              		.loc 1 1798 0
 3438 0072 A4F84630 		strh	r3, [r4, #70]	@ movhi
1801:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
 3439              		.loc 1 1801 0
 3440 0076 E064     		str	r0, [r4, #76]
1802:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3441              		.loc 1 1802 0
 3442 0078 2065     		str	r0, [r4, #80]
1806:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3443              		.loc 1 1806 0
 3444 007a A36A     		ldr	r3, [r4, #40]
 3445              	.LVL277:
 3446 007c B3F5005F 		cmp	r3, #8192
 3447 0080 50D0     		beq	.L359
 3448              	.LVL278:
 3449              	.L341:
1815:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3450              		.loc 1 1815 0
 3451 0082 2268     		ldr	r2, [r4]
 3452 0084 5368     		ldr	r3, [r2, #4]
 3453 0086 23F4C043 		bic	r3, r3, #24576
 3454 008a 5360     		str	r3, [r2, #4]
1818:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3455              		.loc 1 1818 0
 3456 008c E368     		ldr	r3, [r4, #12]
 3457 008e B3F5E06F 		cmp	r3, #1792
 3458 0092 52D9     		bls	.L342
1821:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3459              		.loc 1 1821 0
 3460 0094 2268     		ldr	r2, [r4]
 3461 0096 5368     		ldr	r3, [r2, #4]
 3462 0098 23F48053 		bic	r3, r3, #4096
 3463 009c 5360     		str	r3, [r2, #4]
 3464              	.L343:
1861:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3465              		.loc 1 1861 0
 3466 009e 94F85D30 		ldrb	r3, [r4, #93]	@ zero_extendqisi2
 3467 00a2 DBB2     		uxtb	r3, r3
 3468 00a4 042B     		cmp	r3, #4
 3469 00a6 00F08F80 		beq	.L360
1870:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->hdmarx->XferCpltCallback     = SPI_DMATransmitReceiveCplt;
 3470              		.loc 1 1870 0
 3471 00aa A36D     		ldr	r3, [r4, #88]
 3472 00ac 4F4A     		ldr	r2, .L362
 3473 00ae 1A63     		str	r2, [r3, #48]
1871:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3474              		.loc 1 1871 0
 3475 00b0 A36D     		ldr	r3, [r4, #88]
 3476 00b2 4F4A     		ldr	r2, .L362+4
 3477 00b4 DA62     		str	r2, [r3, #44]
 3478              	.L348:
1875:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3479              		.loc 1 1875 0
 3480 00b6 A36D     		ldr	r3, [r4, #88]
 3481 00b8 4E4A     		ldr	r2, .L362+8
ARM GAS  /tmp/ccNgnWxc.s 			page 139


 3482 00ba 5A63     		str	r2, [r3, #52]
1878:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3483              		.loc 1 1878 0
 3484 00bc A36D     		ldr	r3, [r4, #88]
 3485 00be 0025     		movs	r5, #0
 3486 00c0 9D63     		str	r5, [r3, #56]
1881:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3487              		.loc 1 1881 0
 3488 00c2 2168     		ldr	r1, [r4]
 3489              	.LVL279:
 3490 00c4 B4F84630 		ldrh	r3, [r4, #70]
 3491 00c8 226C     		ldr	r2, [r4, #64]
 3492 00ca 0C31     		adds	r1, r1, #12
 3493 00cc A06D     		ldr	r0, [r4, #88]
 3494 00ce FFF7FEFF 		bl	HAL_DMA_Start_IT
 3495              	.LVL280:
1884:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3496              		.loc 1 1884 0
 3497 00d2 2268     		ldr	r2, [r4]
 3498 00d4 5368     		ldr	r3, [r2, #4]
 3499 00d6 43F00103 		orr	r3, r3, #1
 3500 00da 5360     		str	r3, [r2, #4]
1888:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmatx->XferCpltCallback     = NULL;
 3501              		.loc 1 1888 0
 3502 00dc 636D     		ldr	r3, [r4, #84]
 3503 00de 1D63     		str	r5, [r3, #48]
1889:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmatx->XferErrorCallback    = NULL;
 3504              		.loc 1 1889 0
 3505 00e0 636D     		ldr	r3, [r4, #84]
 3506 00e2 DD62     		str	r5, [r3, #44]
1890:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->hdmatx->XferAbortCallback    = NULL;
 3507              		.loc 1 1890 0
 3508 00e4 636D     		ldr	r3, [r4, #84]
 3509 00e6 5D63     		str	r5, [r3, #52]
1891:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3510              		.loc 1 1891 0
 3511 00e8 636D     		ldr	r3, [r4, #84]
 3512 00ea 9D63     		str	r5, [r3, #56]
1894:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3513              		.loc 1 1894 0
 3514 00ec 2268     		ldr	r2, [r4]
 3515 00ee E38F     		ldrh	r3, [r4, #62]
 3516 00f0 0C32     		adds	r2, r2, #12
 3517 00f2 A16B     		ldr	r1, [r4, #56]
 3518 00f4 606D     		ldr	r0, [r4, #84]
 3519 00f6 FFF7FEFF 		bl	HAL_DMA_Start_IT
 3520              	.LVL281:
1897:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3521              		.loc 1 1897 0
 3522 00fa 2368     		ldr	r3, [r4]
 3523 00fc 1A68     		ldr	r2, [r3]
 3524 00fe 12F0400F 		tst	r2, #64
 3525 0102 03D1     		bne	.L349
1900:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3526              		.loc 1 1900 0
 3527 0104 1A68     		ldr	r2, [r3]
 3528 0106 42F04002 		orr	r2, r2, #64
ARM GAS  /tmp/ccNgnWxc.s 			page 140


 3529 010a 1A60     		str	r2, [r3]
 3530              	.L349:
1903:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3531              		.loc 1 1903 0
 3532 010c 2268     		ldr	r2, [r4]
 3533 010e 5368     		ldr	r3, [r2, #4]
 3534 0110 43F02003 		orr	r3, r3, #32
 3535 0114 5360     		str	r3, [r2, #4]
1906:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3536              		.loc 1 1906 0
 3537 0116 2268     		ldr	r2, [r4]
 3538 0118 5368     		ldr	r3, [r2, #4]
 3539 011a 43F00203 		orr	r3, r3, #2
 3540 011e 5360     		str	r3, [r2, #4]
1758:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
 3541              		.loc 1 1758 0
 3542 0120 0020     		movs	r0, #0
 3543 0122 81E7     		b	.L339
 3544              	.LVL282:
 3545              	.L359:
1808:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3546              		.loc 1 1808 0
 3547 0124 2268     		ldr	r2, [r4]
 3548              	.LVL283:
 3549 0126 1368     		ldr	r3, [r2]
 3550 0128 23F40053 		bic	r3, r3, #8192
 3551 012c 1360     		str	r3, [r2]
 3552              	.LVL284:
 3553 012e 2268     		ldr	r2, [r4]
 3554 0130 1368     		ldr	r3, [r2]
 3555 0132 43F40053 		orr	r3, r3, #8192
 3556 0136 1360     		str	r3, [r2]
 3557 0138 A3E7     		b	.L341
 3558              	.L342:
1826:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3559              		.loc 1 1826 0
 3560 013a 2268     		ldr	r2, [r4]
 3561 013c 5368     		ldr	r3, [r2, #4]
 3562 013e 43F48053 		orr	r3, r3, #4096
 3563 0142 5360     		str	r3, [r2, #4]
1828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 3564              		.loc 1 1828 0
 3565 0144 636D     		ldr	r3, [r4, #84]
 3566 0146 9B69     		ldr	r3, [r3, #24]
 3567 0148 B3F5806F 		cmp	r3, #1024
 3568 014c 19D0     		beq	.L361
 3569              	.L344:
1842:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 3570              		.loc 1 1842 0
 3571 014e A36D     		ldr	r3, [r4, #88]
 3572 0150 9B69     		ldr	r3, [r3, #24]
 3573 0152 B3F5806F 		cmp	r3, #1024
 3574 0156 A2D1     		bne	.L343
1845:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3575              		.loc 1 1845 0
 3576 0158 2268     		ldr	r2, [r4]
 3577 015a 5368     		ldr	r3, [r2, #4]
ARM GAS  /tmp/ccNgnWxc.s 			page 141


 3578 015c 23F48053 		bic	r3, r3, #4096
 3579 0160 5360     		str	r3, [r2, #4]
1847:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 3580              		.loc 1 1847 0
 3581 0162 B4F84630 		ldrh	r3, [r4, #70]
 3582 0166 13F0010F 		tst	r3, #1
 3583 016a 21D1     		bne	.L346
1849:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->RxXferCount = hspi->RxXferCount >> 1U;
 3584              		.loc 1 1849 0
 3585 016c 2268     		ldr	r2, [r4]
 3586 016e 5368     		ldr	r3, [r2, #4]
 3587 0170 23F40053 		bic	r3, r3, #8192
 3588 0174 5360     		str	r3, [r2, #4]
1850:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 3589              		.loc 1 1850 0
 3590 0176 B4F84630 		ldrh	r3, [r4, #70]
 3591 017a 5B08     		lsrs	r3, r3, #1
 3592 017c A4F84630 		strh	r3, [r4, #70]	@ movhi
 3593 0180 8DE7     		b	.L343
 3594              	.L361:
1830:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 3595              		.loc 1 1830 0
 3596 0182 A38F     		ldrh	r3, [r4, #60]
 3597 0184 13F0010F 		tst	r3, #1
 3598 0188 08D1     		bne	.L345
1832:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount = hspi->TxXferCount >> 1U;
 3599              		.loc 1 1832 0
 3600 018a 2268     		ldr	r2, [r4]
 3601 018c 5368     		ldr	r3, [r2, #4]
 3602 018e 23F48043 		bic	r3, r3, #16384
 3603 0192 5360     		str	r3, [r2, #4]
1833:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 3604              		.loc 1 1833 0
 3605 0194 E38F     		ldrh	r3, [r4, #62]
 3606 0196 5B08     		lsrs	r3, r3, #1
 3607 0198 E387     		strh	r3, [r4, #62]	@ movhi
 3608 019a D8E7     		b	.L344
 3609              	.L345:
1837:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->TxXferCount = (hspi->TxXferCount >> 1U) + 1U;
 3610              		.loc 1 1837 0
 3611 019c 2268     		ldr	r2, [r4]
 3612 019e 5368     		ldr	r3, [r2, #4]
 3613 01a0 43F48043 		orr	r3, r3, #16384
 3614 01a4 5360     		str	r3, [r2, #4]
1838:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 3615              		.loc 1 1838 0
 3616 01a6 E38F     		ldrh	r3, [r4, #62]
 3617 01a8 5B08     		lsrs	r3, r3, #1
 3618 01aa 0133     		adds	r3, r3, #1
 3619 01ac E387     		strh	r3, [r4, #62]	@ movhi
 3620 01ae CEE7     		b	.L344
 3621              	.L346:
1854:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->RxXferCount = (hspi->RxXferCount >> 1U) + 1U;
 3622              		.loc 1 1854 0
 3623 01b0 2268     		ldr	r2, [r4]
 3624 01b2 5368     		ldr	r3, [r2, #4]
 3625 01b4 43F40053 		orr	r3, r3, #8192
ARM GAS  /tmp/ccNgnWxc.s 			page 142


 3626 01b8 5360     		str	r3, [r2, #4]
1855:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 3627              		.loc 1 1855 0
 3628 01ba B4F84630 		ldrh	r3, [r4, #70]
 3629 01be 5B08     		lsrs	r3, r3, #1
 3630 01c0 0133     		adds	r3, r3, #1
 3631 01c2 A4F84630 		strh	r3, [r4, #70]	@ movhi
 3632 01c6 6AE7     		b	.L343
 3633              	.L360:
1864:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->hdmarx->XferCpltCallback     = SPI_DMAReceiveCplt;
 3634              		.loc 1 1864 0
 3635 01c8 A36D     		ldr	r3, [r4, #88]
 3636 01ca 0B4A     		ldr	r2, .L362+12
 3637 01cc 1A63     		str	r2, [r3, #48]
1865:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3638              		.loc 1 1865 0
 3639 01ce A36D     		ldr	r3, [r4, #88]
 3640 01d0 0A4A     		ldr	r2, .L362+16
 3641 01d2 DA62     		str	r2, [r3, #44]
 3642 01d4 6FE7     		b	.L348
 3643              	.LVL285:
 3644              	.L352:
1775:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 3645              		.loc 1 1775 0
 3646 01d6 0220     		movs	r0, #2
 3647              	.LVL286:
 3648 01d8 26E7     		b	.L339
 3649              	.LVL287:
 3650              	.L354:
1781:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 3651              		.loc 1 1781 0
 3652 01da 0120     		movs	r0, #1
 3653              	.LVL288:
 3654 01dc 24E7     		b	.L339
 3655              	.LVL289:
 3656              	.L355:
 3657 01de 0120     		movs	r0, #1
 3658              	.LVL290:
 3659 01e0 22E7     		b	.L339
 3660              	.LVL291:
 3661              	.L356:
 3662 01e2 0120     		movs	r0, #1
 3663              	.LVL292:
 3664 01e4 20E7     		b	.L339
 3665              	.LVL293:
 3666              	.L350:
1768:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3667              		.loc 1 1768 0
 3668 01e6 0220     		movs	r0, #2
 3669              	.LVL294:
 3670 01e8 21E7     		b	.L337
 3671              	.L363:
 3672 01ea 00BF     		.align	2
 3673              	.L362:
 3674 01ec 00000000 		.word	SPI_DMAHalfTransmitReceiveCplt
 3675 01f0 00000000 		.word	SPI_DMATransmitReceiveCplt
 3676 01f4 00000000 		.word	SPI_DMAError
ARM GAS  /tmp/ccNgnWxc.s 			page 143


 3677 01f8 00000000 		.word	SPI_DMAHalfReceiveCplt
 3678 01fc 00000000 		.word	SPI_DMAReceiveCplt
 3679              		.cfi_endproc
 3680              	.LFE140:
 3682              		.section	.text.HAL_SPI_Receive_DMA,"ax",%progbits
 3683              		.align	1
 3684              		.global	HAL_SPI_Receive_DMA
 3685              		.syntax unified
 3686              		.thumb
 3687              		.thumb_func
 3688              		.fpu fpv4-sp-d16
 3690              	HAL_SPI_Receive_DMA:
 3691              	.LFB139:
1621:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 3692              		.loc 1 1621 0
 3693              		.cfi_startproc
 3694              		@ args = 0, pretend = 0, frame = 0
 3695              		@ frame_needed = 0, uses_anonymous_args = 0
 3696              	.LVL295:
 3697 0000 38B5     		push	{r3, r4, r5, lr}
 3698              	.LCFI41:
 3699              		.cfi_def_cfa_offset 16
 3700              		.cfi_offset 3, -16
 3701              		.cfi_offset 4, -12
 3702              		.cfi_offset 5, -8
 3703              		.cfi_offset 14, -4
 3704 0002 0446     		mov	r4, r0
 3705              	.LVL296:
1627:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3706              		.loc 1 1627 0
 3707 0004 8568     		ldr	r5, [r0, #8]
 3708 0006 1DB9     		cbnz	r5, .L365
1627:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3709              		.loc 1 1627 0 is_stmt 0 discriminator 1
 3710 0008 4368     		ldr	r3, [r0, #4]
 3711 000a B3F5827F 		cmp	r3, #260
 3712 000e 11D0     		beq	.L379
 3713              	.L365:
1639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3714              		.loc 1 1639 0 is_stmt 1
 3715 0010 94F85C00 		ldrb	r0, [r4, #92]	@ zero_extendqisi2
 3716              	.LVL297:
 3717 0014 0128     		cmp	r0, #1
 3718 0016 00F0A780 		beq	.L374
1639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3719              		.loc 1 1639 0 is_stmt 0 discriminator 2
 3720 001a 0120     		movs	r0, #1
 3721 001c 84F85C00 		strb	r0, [r4, #92]
1641:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3722              		.loc 1 1641 0 is_stmt 1 discriminator 2
 3723 0020 94F85D00 		ldrb	r0, [r4, #93]	@ zero_extendqisi2
 3724 0024 C0B2     		uxtb	r0, r0
 3725 0026 0128     		cmp	r0, #1
 3726 0028 0CD0     		beq	.L380
1643:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
 3727              		.loc 1 1643 0
 3728 002a 0220     		movs	r0, #2
ARM GAS  /tmp/ccNgnWxc.s 			page 144


 3729              	.LVL298:
 3730              	.L367:
1740:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return errorcode;
 3731              		.loc 1 1740 0
 3732 002c 0023     		movs	r3, #0
 3733 002e 84F85C30 		strb	r3, [r4, #92]
 3734              	.LVL299:
 3735              	.L366:
1742:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3736              		.loc 1 1742 0
 3737 0032 38BD     		pop	{r3, r4, r5, pc}
 3738              	.LVL300:
 3739              	.L379:
1629:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     
 3740              		.loc 1 1629 0
 3741 0034 0423     		movs	r3, #4
 3742 0036 80F85D30 		strb	r3, [r0, #93]
1635:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3743              		.loc 1 1635 0
 3744 003a 1346     		mov	r3, r2
 3745 003c 0A46     		mov	r2, r1
 3746              	.LVL301:
 3747 003e FFF7FEFF 		bl	HAL_SPI_TransmitReceive_DMA
 3748              	.LVL302:
 3749 0042 F6E7     		b	.L366
 3750              	.LVL303:
 3751              	.L380:
1647:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3752              		.loc 1 1647 0
 3753 0044 0029     		cmp	r1, #0
 3754 0046 00F08B80 		beq	.L376
1647:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3755              		.loc 1 1647 0 is_stmt 0 discriminator 1
 3756 004a 002A     		cmp	r2, #0
 3757 004c 00F08A80 		beq	.L377
1654:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 3758              		.loc 1 1654 0 is_stmt 1
 3759 0050 0423     		movs	r3, #4
 3760 0052 84F85D30 		strb	r3, [r4, #93]
1655:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
 3761              		.loc 1 1655 0
 3762 0056 0023     		movs	r3, #0
 3763 0058 2366     		str	r3, [r4, #96]
1656:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 3764              		.loc 1 1656 0
 3765 005a 2164     		str	r1, [r4, #64]
1657:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = Size;
 3766              		.loc 1 1657 0
 3767 005c A4F84420 		strh	r2, [r4, #68]	@ movhi
1658:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3768              		.loc 1 1658 0
 3769 0060 A4F84620 		strh	r2, [r4, #70]	@ movhi
1661:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxISR       = NULL;
 3770              		.loc 1 1661 0
 3771 0064 E364     		str	r3, [r4, #76]
1662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferSize  = 0U;
 3772              		.loc 1 1662 0
ARM GAS  /tmp/ccNgnWxc.s 			page 145


 3773 0066 2365     		str	r3, [r4, #80]
1663:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 3774              		.loc 1 1663 0
 3775 0068 A387     		strh	r3, [r4, #60]	@ movhi
1664:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3776              		.loc 1 1664 0
 3777 006a E387     		strh	r3, [r4, #62]	@ movhi
1667:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3778              		.loc 1 1667 0
 3779 006c B5F5004F 		cmp	r5, #32768
 3780 0070 3AD0     		beq	.L381
 3781              	.LVL304:
 3782              	.L368:
1674:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3783              		.loc 1 1674 0
 3784 0072 A36A     		ldr	r3, [r4, #40]
 3785 0074 B3F5005F 		cmp	r3, #8192
 3786 0078 3CD0     		beq	.L382
 3787              	.L369:
1681:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->Init.DataSize > SPI_DATASIZE_8BIT)
 3788              		.loc 1 1681 0
 3789 007a 2268     		ldr	r2, [r4]
 3790 007c 5368     		ldr	r3, [r2, #4]
 3791 007e 23F40053 		bic	r3, r3, #8192
 3792 0082 5360     		str	r3, [r2, #4]
1682:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3793              		.loc 1 1682 0
 3794 0084 E368     		ldr	r3, [r4, #12]
 3795 0086 B3F5E06F 		cmp	r3, #1792
 3796 008a 3ED9     		bls	.L370
1685:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3797              		.loc 1 1685 0
 3798 008c 2268     		ldr	r2, [r4]
 3799 008e 5368     		ldr	r3, [r2, #4]
 3800 0090 23F48053 		bic	r3, r3, #4096
 3801 0094 5360     		str	r3, [r2, #4]
 3802              	.L371:
1711:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3803              		.loc 1 1711 0
 3804 0096 A36D     		ldr	r3, [r4, #88]
 3805 0098 344A     		ldr	r2, .L383
 3806 009a 1A63     		str	r2, [r3, #48]
1714:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3807              		.loc 1 1714 0
 3808 009c A36D     		ldr	r3, [r4, #88]
 3809 009e 344A     		ldr	r2, .L383+4
 3810 00a0 DA62     		str	r2, [r3, #44]
1717:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3811              		.loc 1 1717 0
 3812 00a2 A36D     		ldr	r3, [r4, #88]
 3813 00a4 334A     		ldr	r2, .L383+8
 3814 00a6 5A63     		str	r2, [r3, #52]
1720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3815              		.loc 1 1720 0
 3816 00a8 A36D     		ldr	r3, [r4, #88]
 3817 00aa 0022     		movs	r2, #0
 3818 00ac 9A63     		str	r2, [r3, #56]
ARM GAS  /tmp/ccNgnWxc.s 			page 146


1723:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3819              		.loc 1 1723 0
 3820 00ae 2168     		ldr	r1, [r4]
 3821              	.LVL305:
 3822 00b0 B4F84630 		ldrh	r3, [r4, #70]
 3823 00b4 226C     		ldr	r2, [r4, #64]
 3824 00b6 0C31     		adds	r1, r1, #12
 3825 00b8 A06D     		ldr	r0, [r4, #88]
 3826 00ba FFF7FEFF 		bl	HAL_DMA_Start_IT
 3827              	.LVL306:
1726:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3828              		.loc 1 1726 0
 3829 00be 2368     		ldr	r3, [r4]
 3830 00c0 1A68     		ldr	r2, [r3]
 3831 00c2 12F0400F 		tst	r2, #64
 3832 00c6 03D1     		bne	.L373
1729:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3833              		.loc 1 1729 0
 3834 00c8 1A68     		ldr	r2, [r3]
 3835 00ca 42F04002 		orr	r2, r2, #64
 3836 00ce 1A60     		str	r2, [r3]
 3837              	.L373:
1733:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3838              		.loc 1 1733 0
 3839 00d0 2268     		ldr	r2, [r4]
 3840 00d2 5368     		ldr	r3, [r2, #4]
 3841 00d4 43F02003 		orr	r3, r3, #32
 3842 00d8 5360     		str	r3, [r2, #4]
1736:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3843              		.loc 1 1736 0
 3844 00da 2268     		ldr	r2, [r4]
 3845 00dc 5368     		ldr	r3, [r2, #4]
 3846 00de 43F00103 		orr	r3, r3, #1
 3847 00e2 5360     		str	r3, [r2, #4]
1622:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   
 3848              		.loc 1 1622 0
 3849 00e4 0020     		movs	r0, #0
 3850 00e6 A1E7     		b	.L367
 3851              	.LVL307:
 3852              	.L381:
1669:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3853              		.loc 1 1669 0
 3854 00e8 2268     		ldr	r2, [r4]
 3855              	.LVL308:
 3856 00ea 1368     		ldr	r3, [r2]
 3857 00ec 23F48043 		bic	r3, r3, #16384
 3858 00f0 1360     		str	r3, [r2]
 3859              	.LVL309:
 3860 00f2 BEE7     		b	.L368
 3861              	.L382:
1676:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3862              		.loc 1 1676 0
 3863 00f4 2268     		ldr	r2, [r4]
 3864 00f6 1368     		ldr	r3, [r2]
 3865 00f8 23F40053 		bic	r3, r3, #8192
 3866 00fc 1360     		str	r3, [r2]
 3867 00fe 2268     		ldr	r2, [r4]
ARM GAS  /tmp/ccNgnWxc.s 			page 147


 3868 0100 1368     		ldr	r3, [r2]
 3869 0102 43F40053 		orr	r3, r3, #8192
 3870 0106 1360     		str	r3, [r2]
 3871 0108 B7E7     		b	.L369
 3872              	.L370:
1690:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3873              		.loc 1 1690 0
 3874 010a 2268     		ldr	r2, [r4]
 3875 010c 5368     		ldr	r3, [r2, #4]
 3876 010e 43F48053 		orr	r3, r3, #4096
 3877 0112 5360     		str	r3, [r2, #4]
1692:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 3878              		.loc 1 1692 0
 3879 0114 A36D     		ldr	r3, [r4, #88]
 3880 0116 9B69     		ldr	r3, [r3, #24]
 3881 0118 B3F5806F 		cmp	r3, #1024
 3882 011c BBD1     		bne	.L371
1695:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3883              		.loc 1 1695 0
 3884 011e 2268     		ldr	r2, [r4]
 3885 0120 5368     		ldr	r3, [r2, #4]
 3886 0122 23F48053 		bic	r3, r3, #4096
 3887 0126 5360     		str	r3, [r2, #4]
1697:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 3888              		.loc 1 1697 0
 3889 0128 B4F84630 		ldrh	r3, [r4, #70]
 3890 012c 13F0010F 		tst	r3, #1
 3891 0130 0AD1     		bne	.L372
1699:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->RxXferCount = hspi->RxXferCount >> 1U;
 3892              		.loc 1 1699 0
 3893 0132 2268     		ldr	r2, [r4]
 3894 0134 5368     		ldr	r3, [r2, #4]
 3895 0136 23F40053 		bic	r3, r3, #8192
 3896 013a 5360     		str	r3, [r2, #4]
1700:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 3897              		.loc 1 1700 0
 3898 013c B4F84630 		ldrh	r3, [r4, #70]
 3899 0140 5B08     		lsrs	r3, r3, #1
 3900 0142 A4F84630 		strh	r3, [r4, #70]	@ movhi
 3901 0146 A6E7     		b	.L371
 3902              	.L372:
1704:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->RxXferCount = (hspi->RxXferCount >> 1U) + 1U;
 3903              		.loc 1 1704 0
 3904 0148 2268     		ldr	r2, [r4]
 3905 014a 5368     		ldr	r3, [r2, #4]
 3906 014c 43F40053 		orr	r3, r3, #8192
 3907 0150 5360     		str	r3, [r2, #4]
1705:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 3908              		.loc 1 1705 0
 3909 0152 B4F84630 		ldrh	r3, [r4, #70]
 3910 0156 5B08     		lsrs	r3, r3, #1
 3911 0158 0133     		adds	r3, r3, #1
 3912 015a A4F84630 		strh	r3, [r4, #70]	@ movhi
 3913 015e 9AE7     		b	.L371
 3914              	.LVL310:
 3915              	.L376:
1649:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     goto error;
ARM GAS  /tmp/ccNgnWxc.s 			page 148


 3916              		.loc 1 1649 0
 3917 0160 0120     		movs	r0, #1
 3918 0162 63E7     		b	.L367
 3919              	.L377:
 3920 0164 0120     		movs	r0, #1
 3921 0166 61E7     		b	.L367
 3922              	.L374:
1639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3923              		.loc 1 1639 0
 3924 0168 0220     		movs	r0, #2
 3925 016a 62E7     		b	.L366
 3926              	.L384:
 3927              		.align	2
 3928              	.L383:
 3929 016c 00000000 		.word	SPI_DMAHalfReceiveCplt
 3930 0170 00000000 		.word	SPI_DMAReceiveCplt
 3931 0174 00000000 		.word	SPI_DMAError
 3932              		.cfi_endproc
 3933              	.LFE139:
 3935              		.section	.text.HAL_SPI_Abort,"ax",%progbits
 3936              		.align	1
 3937              		.global	HAL_SPI_Abort
 3938              		.syntax unified
 3939              		.thumb
 3940              		.thumb_func
 3941              		.fpu fpv4-sp-d16
 3943              	HAL_SPI_Abort:
 3944              	.LFB141:
1928:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode;
 3945              		.loc 1 1928 0
 3946              		.cfi_startproc
 3947              		@ args = 0, pretend = 0, frame = 16
 3948              		@ frame_needed = 0, uses_anonymous_args = 0
 3949              	.LVL311:
 3950 0000 10B5     		push	{r4, lr}
 3951              	.LCFI42:
 3952              		.cfi_def_cfa_offset 8
 3953              		.cfi_offset 4, -8
 3954              		.cfi_offset 14, -4
 3955 0002 86B0     		sub	sp, sp, #24
 3956              	.LCFI43:
 3957              		.cfi_def_cfa_offset 32
 3958 0004 0446     		mov	r4, r0
 3959              	.LVL312:
1934:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   count = resetcount;
 3960              		.loc 1 1934 0
 3961 0006 5D4B     		ldr	r3, .L407
 3962 0008 1B68     		ldr	r3, [r3]
 3963 000a 5D4A     		ldr	r2, .L407+4
 3964 000c A2FB0323 		umull	r2, r3, r2, r3
 3965 0010 5B0A     		lsrs	r3, r3, #9
 3966 0012 6422     		movs	r2, #100
 3967 0014 02FB03F3 		mul	r3, r2, r3
 3968 0018 0493     		str	r3, [sp, #16]
1935:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 3969              		.loc 1 1935 0
 3970 001a 049B     		ldr	r3, [sp, #16]
ARM GAS  /tmp/ccNgnWxc.s 			page 149


 3971 001c 0593     		str	r3, [sp, #20]
1938:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 3972              		.loc 1 1938 0
 3973 001e 0168     		ldr	r1, [r0]
 3974 0020 4B68     		ldr	r3, [r1, #4]
 3975 0022 13F0800F 		tst	r3, #128
 3976 0026 11D0     		beq	.L386
1940:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Wait HAL_SPI_STATE_ABORT state */
 3977              		.loc 1 1940 0
 3978 0028 564B     		ldr	r3, .L407+8
 3979 002a 0365     		str	r3, [r0, #80]
 3980              	.L389:
1944:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 3981              		.loc 1 1944 0
 3982 002c 059B     		ldr	r3, [sp, #20]
 3983 002e 5A1E     		subs	r2, r3, #1
 3984 0030 0592     		str	r2, [sp, #20]
 3985 0032 2BB1     		cbz	r3, .L405
1950:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Reset Timeout Counter */
 3986              		.loc 1 1950 0
 3987 0034 94F85D30 		ldrb	r3, [r4, #93]	@ zero_extendqisi2
 3988 0038 DBB2     		uxtb	r3, r3
 3989 003a 072B     		cmp	r3, #7
 3990 003c F6D1     		bne	.L389
 3991 003e 03E0     		b	.L388
 3992              	.L405:
1946:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         break;
 3993              		.loc 1 1946 0
 3994 0040 236E     		ldr	r3, [r4, #96]
 3995 0042 43F04003 		orr	r3, r3, #64
 3996 0046 2366     		str	r3, [r4, #96]
 3997              	.L388:
1952:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 3998              		.loc 1 1952 0
 3999 0048 049B     		ldr	r3, [sp, #16]
 4000 004a 0593     		str	r3, [sp, #20]
 4001              	.L386:
1955:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4002              		.loc 1 1955 0
 4003 004c 4B68     		ldr	r3, [r1, #4]
 4004 004e 13F0400F 		tst	r3, #64
 4005 0052 11D0     		beq	.L390
1957:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Wait HAL_SPI_STATE_ABORT state */
 4006              		.loc 1 1957 0
 4007 0054 4C4B     		ldr	r3, .L407+12
 4008 0056 E364     		str	r3, [r4, #76]
 4009              	.L393:
1961:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 4010              		.loc 1 1961 0
 4011 0058 059B     		ldr	r3, [sp, #20]
 4012 005a 5A1E     		subs	r2, r3, #1
 4013 005c 0592     		str	r2, [sp, #20]
 4014 005e 2BB1     		cbz	r3, .L406
1967:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Reset Timeout Counter */
 4015              		.loc 1 1967 0
 4016 0060 94F85D30 		ldrb	r3, [r4, #93]	@ zero_extendqisi2
 4017 0064 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccNgnWxc.s 			page 150


 4018 0066 072B     		cmp	r3, #7
 4019 0068 F6D1     		bne	.L393
 4020 006a 03E0     		b	.L392
 4021              	.L406:
1963:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         break;
 4022              		.loc 1 1963 0
 4023 006c 236E     		ldr	r3, [r4, #96]
 4024 006e 43F04003 		orr	r3, r3, #64
 4025 0072 2366     		str	r3, [r4, #96]
 4026              	.L392:
1969:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4027              		.loc 1 1969 0
 4028 0074 049B     		ldr	r3, [sp, #16]
 4029 0076 0593     		str	r3, [sp, #20]
 4030              	.L390:
1973:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4031              		.loc 1 1973 0
 4032 0078 4B68     		ldr	r3, [r1, #4]
 4033 007a 23F02003 		bic	r3, r3, #32
 4034 007e 4B60     		str	r3, [r1, #4]
1976:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4035              		.loc 1 1976 0
 4036 0080 2368     		ldr	r3, [r4]
 4037 0082 5A68     		ldr	r2, [r3, #4]
 4038 0084 12F0020F 		tst	r2, #2
 4039 0088 03D1     		bne	.L394
1976:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4040              		.loc 1 1976 0 is_stmt 0 discriminator 1
 4041 008a 5B68     		ldr	r3, [r3, #4]
 4042 008c 13F0010F 		tst	r3, #1
 4043 0090 57D0     		beq	.L395
 4044              	.L394:
1979:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 4045              		.loc 1 1979 0 is_stmt 1
 4046 0092 636D     		ldr	r3, [r4, #84]
 4047 0094 43B3     		cbz	r3, .L396
1983:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4048              		.loc 1 1983 0
 4049 0096 0022     		movs	r2, #0
 4050 0098 9A63     		str	r2, [r3, #56]
1986:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 4051              		.loc 1 1986 0
 4052 009a 606D     		ldr	r0, [r4, #84]
 4053              	.LVL313:
 4054 009c FFF7FEFF 		bl	HAL_DMA_Abort
 4055              	.LVL314:
 4056 00a0 08B1     		cbz	r0, .L397
1988:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 4057              		.loc 1 1988 0
 4058 00a2 4023     		movs	r3, #64
 4059 00a4 2366     		str	r3, [r4, #96]
 4060              	.L397:
1992:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4061              		.loc 1 1992 0
 4062 00a6 2268     		ldr	r2, [r4]
 4063 00a8 5368     		ldr	r3, [r2, #4]
 4064 00aa 23F00203 		bic	r3, r3, #2
ARM GAS  /tmp/ccNgnWxc.s 			page 151


 4065 00ae 5360     		str	r3, [r2, #4]
1994:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 4066              		.loc 1 1994 0
 4067 00b0 FFF7FEFF 		bl	HAL_GetTick
 4068              	.LVL315:
 4069 00b4 0246     		mov	r2, r0
 4070 00b6 6421     		movs	r1, #100
 4071 00b8 2046     		mov	r0, r4
 4072 00ba FFF7FEFF 		bl	SPI_EndRxTxTransaction
 4073              	.LVL316:
 4074 00be 08B1     		cbz	r0, .L398
1996:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 4075              		.loc 1 1996 0
 4076 00c0 4023     		movs	r3, #64
 4077 00c2 2366     		str	r3, [r4, #96]
 4078              	.L398:
2000:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4079              		.loc 1 2000 0
 4080 00c4 2268     		ldr	r2, [r4]
 4081 00c6 1368     		ldr	r3, [r2]
 4082 00c8 23F04003 		bic	r3, r3, #64
 4083 00cc 1360     		str	r3, [r2]
2003:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 4084              		.loc 1 2003 0
 4085 00ce FFF7FEFF 		bl	HAL_GetTick
 4086              	.LVL317:
 4087 00d2 0090     		str	r0, [sp]
 4088 00d4 6423     		movs	r3, #100
 4089 00d6 0022     		movs	r2, #0
 4090 00d8 4FF4C061 		mov	r1, #1536
 4091 00dc 2046     		mov	r0, r4
 4092 00de FFF7FEFF 		bl	SPI_WaitFifoStateUntilTimeout
 4093              	.LVL318:
 4094 00e2 08B1     		cbz	r0, .L396
2005:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 4095              		.loc 1 2005 0
 4096 00e4 4023     		movs	r3, #64
 4097 00e6 2366     		str	r3, [r4, #96]
 4098              	.L396:
2009:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 4099              		.loc 1 2009 0
 4100 00e8 A36D     		ldr	r3, [r4, #88]
 4101 00ea 53B3     		cbz	r3, .L395
2013:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4102              		.loc 1 2013 0
 4103 00ec 0022     		movs	r2, #0
 4104 00ee 9A63     		str	r2, [r3, #56]
2016:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 4105              		.loc 1 2016 0
 4106 00f0 A06D     		ldr	r0, [r4, #88]
 4107 00f2 FFF7FEFF 		bl	HAL_DMA_Abort
 4108              	.LVL319:
 4109 00f6 08B1     		cbz	r0, .L399
2018:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 4110              		.loc 1 2018 0
 4111 00f8 4023     		movs	r3, #64
 4112 00fa 2366     		str	r3, [r4, #96]
ARM GAS  /tmp/ccNgnWxc.s 			page 152


 4113              	.L399:
2022:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4114              		.loc 1 2022 0
 4115 00fc 2268     		ldr	r2, [r4]
 4116 00fe 1368     		ldr	r3, [r2]
 4117 0100 23F04003 		bic	r3, r3, #64
 4118 0104 1360     		str	r3, [r2]
2025:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 4119              		.loc 1 2025 0
 4120 0106 FFF7FEFF 		bl	HAL_GetTick
 4121              	.LVL320:
 4122 010a 0090     		str	r0, [sp]
 4123 010c 6423     		movs	r3, #100
 4124 010e 0022     		movs	r2, #0
 4125 0110 8021     		movs	r1, #128
 4126 0112 2046     		mov	r0, r4
 4127 0114 FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 4128              	.LVL321:
 4129 0118 08B1     		cbz	r0, .L400
2027:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 4130              		.loc 1 2027 0
 4131 011a 4023     		movs	r3, #64
 4132 011c 2366     		str	r3, [r4, #96]
 4133              	.L400:
2031:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 4134              		.loc 1 2031 0
 4135 011e FFF7FEFF 		bl	HAL_GetTick
 4136              	.LVL322:
 4137 0122 0090     		str	r0, [sp]
 4138 0124 6423     		movs	r3, #100
 4139 0126 0022     		movs	r2, #0
 4140 0128 4FF4C061 		mov	r1, #1536
 4141 012c 2046     		mov	r0, r4
 4142 012e FFF7FEFF 		bl	SPI_WaitFifoStateUntilTimeout
 4143              	.LVL323:
 4144 0132 08B1     		cbz	r0, .L401
2033:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 4145              		.loc 1 2033 0
 4146 0134 4023     		movs	r3, #64
 4147 0136 2366     		str	r3, [r4, #96]
 4148              	.L401:
2037:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 4149              		.loc 1 2037 0
 4150 0138 2268     		ldr	r2, [r4]
 4151 013a 5368     		ldr	r3, [r2, #4]
 4152 013c 23F00103 		bic	r3, r3, #1
 4153 0140 5360     		str	r3, [r2, #4]
 4154              	.L395:
2041:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 4155              		.loc 1 2041 0
 4156 0142 0023     		movs	r3, #0
 4157 0144 A4F84630 		strh	r3, [r4, #70]	@ movhi
2042:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4158              		.loc 1 2042 0
 4159 0148 E387     		strh	r3, [r4, #62]	@ movhi
2045:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4160              		.loc 1 2045 0
ARM GAS  /tmp/ccNgnWxc.s 			page 153


 4161 014a 236E     		ldr	r3, [r4, #96]
 4162 014c 402B     		cmp	r3, #64
 4163 014e 12D0     		beq	.L403
2053:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4164              		.loc 1 2053 0
 4165 0150 0020     		movs	r0, #0
 4166 0152 2066     		str	r0, [r4, #96]
 4167              	.L402:
 4168              	.LVL324:
 4169              	.LBB3:
2057:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_CLEAR_FREFLAG(hspi);
 4170              		.loc 1 2057 0
 4171 0154 0022     		movs	r2, #0
 4172 0156 0292     		str	r2, [sp, #8]
 4173 0158 2368     		ldr	r3, [r4]
 4174 015a D968     		ldr	r1, [r3, #12]
 4175 015c 0291     		str	r1, [sp, #8]
 4176 015e 9968     		ldr	r1, [r3, #8]
 4177 0160 0291     		str	r1, [sp, #8]
 4178 0162 0299     		ldr	r1, [sp, #8]
 4179              	.LBE3:
 4180              	.LBB4:
2058:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4181              		.loc 1 2058 0
 4182 0164 0392     		str	r2, [sp, #12]
 4183 0166 9B68     		ldr	r3, [r3, #8]
 4184 0168 0393     		str	r3, [sp, #12]
 4185 016a 039B     		ldr	r3, [sp, #12]
 4186              	.LBE4:
2061:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4187              		.loc 1 2061 0
 4188 016c 0123     		movs	r3, #1
 4189 016e 84F85D30 		strb	r3, [r4, #93]
2064:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4190              		.loc 1 2064 0
 4191 0172 06B0     		add	sp, sp, #24
 4192              	.LCFI44:
 4193              		.cfi_remember_state
 4194              		.cfi_def_cfa_offset 8
 4195              		@ sp needed
 4196 0174 10BD     		pop	{r4, pc}
 4197              	.LVL325:
 4198              	.L403:
 4199              	.LCFI45:
 4200              		.cfi_restore_state
2048:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4201              		.loc 1 2048 0
 4202 0176 0120     		movs	r0, #1
 4203 0178 ECE7     		b	.L402
 4204              	.L408:
 4205 017a 00BF     		.align	2
 4206              	.L407:
 4207 017c 00000000 		.word	SystemCoreClock
 4208 0180 F1197605 		.word	91625969
 4209 0184 00000000 		.word	SPI_AbortTx_ISR
 4210 0188 00000000 		.word	SPI_AbortRx_ISR
 4211              		.cfi_endproc
ARM GAS  /tmp/ccNgnWxc.s 			page 154


 4212              	.LFE141:
 4214              		.section	.text.HAL_SPI_DMAPause,"ax",%progbits
 4215              		.align	1
 4216              		.global	HAL_SPI_DMAPause
 4217              		.syntax unified
 4218              		.thumb
 4219              		.thumb_func
 4220              		.fpu fpv4-sp-d16
 4222              	HAL_SPI_DMAPause:
 4223              	.LFB143:
2272:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Locked */
 4224              		.loc 1 2272 0
 4225              		.cfi_startproc
 4226              		@ args = 0, pretend = 0, frame = 0
 4227              		@ frame_needed = 0, uses_anonymous_args = 0
 4228              		@ link register save eliminated.
 4229              	.LVL326:
2274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4230              		.loc 1 2274 0
 4231 0000 90F85C30 		ldrb	r3, [r0, #92]	@ zero_extendqisi2
 4232 0004 012B     		cmp	r3, #1
 4233 0006 0CD0     		beq	.L411
2274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4234              		.loc 1 2274 0 is_stmt 0 discriminator 2
 4235 0008 0123     		movs	r3, #1
 4236 000a 80F85C30 		strb	r3, [r0, #92]
2277:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4237              		.loc 1 2277 0 is_stmt 1 discriminator 2
 4238 000e 0268     		ldr	r2, [r0]
 4239 0010 5368     		ldr	r3, [r2, #4]
 4240 0012 23F00303 		bic	r3, r3, #3
 4241 0016 5360     		str	r3, [r2, #4]
2280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4242              		.loc 1 2280 0 discriminator 2
 4243 0018 0023     		movs	r3, #0
 4244 001a 80F85C30 		strb	r3, [r0, #92]
2282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 4245              		.loc 1 2282 0 discriminator 2
 4246 001e 1846     		mov	r0, r3
 4247              	.LVL327:
 4248 0020 7047     		bx	lr
 4249              	.LVL328:
 4250              	.L411:
2274:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4251              		.loc 1 2274 0
 4252 0022 0220     		movs	r0, #2
 4253              	.LVL329:
2283:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4254              		.loc 1 2283 0
 4255 0024 7047     		bx	lr
 4256              		.cfi_endproc
 4257              	.LFE143:
 4259              		.section	.text.HAL_SPI_DMAResume,"ax",%progbits
 4260              		.align	1
 4261              		.global	HAL_SPI_DMAResume
 4262              		.syntax unified
 4263              		.thumb
ARM GAS  /tmp/ccNgnWxc.s 			page 155


 4264              		.thumb_func
 4265              		.fpu fpv4-sp-d16
 4267              	HAL_SPI_DMAResume:
 4268              	.LFB144:
2292:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Process Locked */
 4269              		.loc 1 2292 0
 4270              		.cfi_startproc
 4271              		@ args = 0, pretend = 0, frame = 0
 4272              		@ frame_needed = 0, uses_anonymous_args = 0
 4273              		@ link register save eliminated.
 4274              	.LVL330:
2294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4275              		.loc 1 2294 0
 4276 0000 90F85C30 		ldrb	r3, [r0, #92]	@ zero_extendqisi2
 4277 0004 012B     		cmp	r3, #1
 4278 0006 0CD0     		beq	.L414
2294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4279              		.loc 1 2294 0 is_stmt 0 discriminator 2
 4280 0008 0123     		movs	r3, #1
 4281 000a 80F85C30 		strb	r3, [r0, #92]
2297:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4282              		.loc 1 2297 0 is_stmt 1 discriminator 2
 4283 000e 0268     		ldr	r2, [r0]
 4284 0010 5368     		ldr	r3, [r2, #4]
 4285 0012 43F00303 		orr	r3, r3, #3
 4286 0016 5360     		str	r3, [r2, #4]
2300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4287              		.loc 1 2300 0 discriminator 2
 4288 0018 0023     		movs	r3, #0
 4289 001a 80F85C30 		strb	r3, [r0, #92]
2302:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 4290              		.loc 1 2302 0 discriminator 2
 4291 001e 1846     		mov	r0, r3
 4292              	.LVL331:
 4293 0020 7047     		bx	lr
 4294              	.LVL332:
 4295              	.L414:
2294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4296              		.loc 1 2294 0
 4297 0022 0220     		movs	r0, #2
 4298              	.LVL333:
2303:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4299              		.loc 1 2303 0
 4300 0024 7047     		bx	lr
 4301              		.cfi_endproc
 4302              	.LFE144:
 4304              		.section	.text.HAL_SPI_DMAStop,"ax",%progbits
 4305              		.align	1
 4306              		.global	HAL_SPI_DMAStop
 4307              		.syntax unified
 4308              		.thumb
 4309              		.thumb_func
 4310              		.fpu fpv4-sp-d16
 4312              	HAL_SPI_DMAStop:
 4313              	.LFB145:
2312:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* The Lock is not implemented on this API to allow the user application
 4314              		.loc 1 2312 0
ARM GAS  /tmp/ccNgnWxc.s 			page 156


 4315              		.cfi_startproc
 4316              		@ args = 0, pretend = 0, frame = 0
 4317              		@ frame_needed = 0, uses_anonymous_args = 0
 4318              	.LVL334:
 4319 0000 10B5     		push	{r4, lr}
 4320              	.LCFI46:
 4321              		.cfi_def_cfa_offset 8
 4322              		.cfi_offset 4, -8
 4323              		.cfi_offset 14, -4
 4324 0002 0446     		mov	r4, r0
2320:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4325              		.loc 1 2320 0
 4326 0004 406D     		ldr	r0, [r0, #84]
 4327              	.LVL335:
 4328 0006 08B1     		cbz	r0, .L416
2322:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4329              		.loc 1 2322 0
 4330 0008 FFF7FEFF 		bl	HAL_DMA_Abort
 4331              	.LVL336:
 4332              	.L416:
2325:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4333              		.loc 1 2325 0
 4334 000c A06D     		ldr	r0, [r4, #88]
 4335 000e 08B1     		cbz	r0, .L417
2327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4336              		.loc 1 2327 0
 4337 0010 FFF7FEFF 		bl	HAL_DMA_Abort
 4338              	.LVL337:
 4339              	.L417:
2331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
 4340              		.loc 1 2331 0
 4341 0014 2268     		ldr	r2, [r4]
 4342 0016 5368     		ldr	r3, [r2, #4]
 4343 0018 23F00303 		bic	r3, r3, #3
 4344 001c 5360     		str	r3, [r2, #4]
2332:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   return HAL_OK;
 4345              		.loc 1 2332 0
 4346 001e 0123     		movs	r3, #1
 4347 0020 84F85D30 		strb	r3, [r4, #93]
2334:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4348              		.loc 1 2334 0
 4349 0024 0020     		movs	r0, #0
 4350 0026 10BD     		pop	{r4, pc}
 4351              		.cfi_endproc
 4352              	.LFE145:
 4354              		.section	.text.HAL_SPI_TxCpltCallback,"ax",%progbits
 4355              		.align	1
 4356              		.weak	HAL_SPI_TxCpltCallback
 4357              		.syntax unified
 4358              		.thumb
 4359              		.thumb_func
 4360              		.fpu fpv4-sp-d16
 4362              	HAL_SPI_TxCpltCallback:
 4363              	.LFB147:
2439:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 4364              		.loc 1 2439 0
 4365              		.cfi_startproc
ARM GAS  /tmp/ccNgnWxc.s 			page 157


 4366              		@ args = 0, pretend = 0, frame = 0
 4367              		@ frame_needed = 0, uses_anonymous_args = 0
 4368              		@ link register save eliminated.
 4369              	.LVL338:
2446:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4370              		.loc 1 2446 0
 4371 0000 7047     		bx	lr
 4372              		.cfi_endproc
 4373              	.LFE147:
 4375              		.section	.text.HAL_SPI_RxCpltCallback,"ax",%progbits
 4376              		.align	1
 4377              		.weak	HAL_SPI_RxCpltCallback
 4378              		.syntax unified
 4379              		.thumb
 4380              		.thumb_func
 4381              		.fpu fpv4-sp-d16
 4383              	HAL_SPI_RxCpltCallback:
 4384              	.LFB148:
2455:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 4385              		.loc 1 2455 0
 4386              		.cfi_startproc
 4387              		@ args = 0, pretend = 0, frame = 0
 4388              		@ frame_needed = 0, uses_anonymous_args = 0
 4389              		@ link register save eliminated.
 4390              	.LVL339:
2462:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4391              		.loc 1 2462 0
 4392 0000 7047     		bx	lr
 4393              		.cfi_endproc
 4394              	.LFE148:
 4396              		.section	.text.HAL_SPI_TxRxCpltCallback,"ax",%progbits
 4397              		.align	1
 4398              		.weak	HAL_SPI_TxRxCpltCallback
 4399              		.syntax unified
 4400              		.thumb
 4401              		.thumb_func
 4402              		.fpu fpv4-sp-d16
 4404              	HAL_SPI_TxRxCpltCallback:
 4405              	.LFB149:
2471:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 4406              		.loc 1 2471 0
 4407              		.cfi_startproc
 4408              		@ args = 0, pretend = 0, frame = 0
 4409              		@ frame_needed = 0, uses_anonymous_args = 0
 4410              		@ link register save eliminated.
 4411              	.LVL340:
2478:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4412              		.loc 1 2478 0
 4413 0000 7047     		bx	lr
 4414              		.cfi_endproc
 4415              	.LFE149:
 4417              		.section	.text.HAL_SPI_TxHalfCpltCallback,"ax",%progbits
 4418              		.align	1
 4419              		.weak	HAL_SPI_TxHalfCpltCallback
 4420              		.syntax unified
 4421              		.thumb
 4422              		.thumb_func
ARM GAS  /tmp/ccNgnWxc.s 			page 158


 4423              		.fpu fpv4-sp-d16
 4425              	HAL_SPI_TxHalfCpltCallback:
 4426              	.LFB150:
2487:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 4427              		.loc 1 2487 0
 4428              		.cfi_startproc
 4429              		@ args = 0, pretend = 0, frame = 0
 4430              		@ frame_needed = 0, uses_anonymous_args = 0
 4431              		@ link register save eliminated.
 4432              	.LVL341:
2494:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4433              		.loc 1 2494 0
 4434 0000 7047     		bx	lr
 4435              		.cfi_endproc
 4436              	.LFE150:
 4438              		.section	.text.SPI_DMAHalfTransmitCplt,"ax",%progbits
 4439              		.align	1
 4440              		.syntax unified
 4441              		.thumb
 4442              		.thumb_func
 4443              		.fpu fpv4-sp-d16
 4445              	SPI_DMAHalfTransmitCplt:
 4446              	.LFB160:
2848:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
 4447              		.loc 1 2848 0
 4448              		.cfi_startproc
 4449              		@ args = 0, pretend = 0, frame = 0
 4450              		@ frame_needed = 0, uses_anonymous_args = 0
 4451              	.LVL342:
 4452 0000 08B5     		push	{r3, lr}
 4453              	.LCFI47:
 4454              		.cfi_def_cfa_offset 8
 4455              		.cfi_offset 3, -8
 4456              		.cfi_offset 14, -4
 4457              	.LVL343:
2851:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 4458              		.loc 1 2851 0
 4459 0002 806A     		ldr	r0, [r0, #40]
 4460              	.LVL344:
 4461 0004 FFF7FEFF 		bl	HAL_SPI_TxHalfCpltCallback
 4462              	.LVL345:
2852:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4463              		.loc 1 2852 0
 4464 0008 08BD     		pop	{r3, pc}
 4465              		.cfi_endproc
 4466              	.LFE160:
 4468              		.section	.text.HAL_SPI_RxHalfCpltCallback,"ax",%progbits
 4469              		.align	1
 4470              		.weak	HAL_SPI_RxHalfCpltCallback
 4471              		.syntax unified
 4472              		.thumb
 4473              		.thumb_func
 4474              		.fpu fpv4-sp-d16
 4476              	HAL_SPI_RxHalfCpltCallback:
 4477              	.LFB151:
2503:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 4478              		.loc 1 2503 0
ARM GAS  /tmp/ccNgnWxc.s 			page 159


 4479              		.cfi_startproc
 4480              		@ args = 0, pretend = 0, frame = 0
 4481              		@ frame_needed = 0, uses_anonymous_args = 0
 4482              		@ link register save eliminated.
 4483              	.LVL346:
2510:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4484              		.loc 1 2510 0
 4485 0000 7047     		bx	lr
 4486              		.cfi_endproc
 4487              	.LFE151:
 4489              		.section	.text.SPI_DMAHalfReceiveCplt,"ax",%progbits
 4490              		.align	1
 4491              		.syntax unified
 4492              		.thumb
 4493              		.thumb_func
 4494              		.fpu fpv4-sp-d16
 4496              	SPI_DMAHalfReceiveCplt:
 4497              	.LFB161:
2861:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
 4498              		.loc 1 2861 0
 4499              		.cfi_startproc
 4500              		@ args = 0, pretend = 0, frame = 0
 4501              		@ frame_needed = 0, uses_anonymous_args = 0
 4502              	.LVL347:
 4503 0000 08B5     		push	{r3, lr}
 4504              	.LCFI48:
 4505              		.cfi_def_cfa_offset 8
 4506              		.cfi_offset 3, -8
 4507              		.cfi_offset 14, -4
 4508              	.LVL348:
2864:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 4509              		.loc 1 2864 0
 4510 0002 806A     		ldr	r0, [r0, #40]
 4511              	.LVL349:
 4512 0004 FFF7FEFF 		bl	HAL_SPI_RxHalfCpltCallback
 4513              	.LVL350:
2865:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4514              		.loc 1 2865 0
 4515 0008 08BD     		pop	{r3, pc}
 4516              		.cfi_endproc
 4517              	.LFE161:
 4519              		.section	.text.HAL_SPI_TxRxHalfCpltCallback,"ax",%progbits
 4520              		.align	1
 4521              		.weak	HAL_SPI_TxRxHalfCpltCallback
 4522              		.syntax unified
 4523              		.thumb
 4524              		.thumb_func
 4525              		.fpu fpv4-sp-d16
 4527              	HAL_SPI_TxRxHalfCpltCallback:
 4528              	.LFB152:
2519:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 4529              		.loc 1 2519 0
 4530              		.cfi_startproc
 4531              		@ args = 0, pretend = 0, frame = 0
 4532              		@ frame_needed = 0, uses_anonymous_args = 0
 4533              		@ link register save eliminated.
 4534              	.LVL351:
ARM GAS  /tmp/ccNgnWxc.s 			page 160


2526:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4535              		.loc 1 2526 0
 4536 0000 7047     		bx	lr
 4537              		.cfi_endproc
 4538              	.LFE152:
 4540              		.section	.text.SPI_DMAHalfTransmitReceiveCplt,"ax",%progbits
 4541              		.align	1
 4542              		.syntax unified
 4543              		.thumb
 4544              		.thumb_func
 4545              		.fpu fpv4-sp-d16
 4547              	SPI_DMAHalfTransmitReceiveCplt:
 4548              	.LFB162:
2874:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
 4549              		.loc 1 2874 0
 4550              		.cfi_startproc
 4551              		@ args = 0, pretend = 0, frame = 0
 4552              		@ frame_needed = 0, uses_anonymous_args = 0
 4553              	.LVL352:
 4554 0000 08B5     		push	{r3, lr}
 4555              	.LCFI49:
 4556              		.cfi_def_cfa_offset 8
 4557              		.cfi_offset 3, -8
 4558              		.cfi_offset 14, -4
 4559              	.LVL353:
2877:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 4560              		.loc 1 2877 0
 4561 0002 806A     		ldr	r0, [r0, #40]
 4562              	.LVL354:
 4563 0004 FFF7FEFF 		bl	HAL_SPI_TxRxHalfCpltCallback
 4564              	.LVL355:
2878:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4565              		.loc 1 2878 0
 4566 0008 08BD     		pop	{r3, pc}
 4567              		.cfi_endproc
 4568              	.LFE162:
 4570              		.section	.text.HAL_SPI_ErrorCallback,"ax",%progbits
 4571              		.align	1
 4572              		.weak	HAL_SPI_ErrorCallback
 4573              		.syntax unified
 4574              		.thumb
 4575              		.thumb_func
 4576              		.fpu fpv4-sp-d16
 4578              	HAL_SPI_ErrorCallback:
 4579              	.LFB153:
2535:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 4580              		.loc 1 2535 0
 4581              		.cfi_startproc
 4582              		@ args = 0, pretend = 0, frame = 0
 4583              		@ frame_needed = 0, uses_anonymous_args = 0
 4584              		@ link register save eliminated.
 4585              	.LVL356:
2545:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4586              		.loc 1 2545 0
 4587 0000 7047     		bx	lr
 4588              		.cfi_endproc
 4589              	.LFE153:
ARM GAS  /tmp/ccNgnWxc.s 			page 161


 4591              		.section	.text.SPI_CloseTx_ISR,"ax",%progbits
 4592              		.align	1
 4593              		.syntax unified
 4594              		.thumb
 4595              		.thumb_func
 4596              		.fpu fpv4-sp-d16
 4598              	SPI_CloseTx_ISR:
 4599              	.LFB185:
3713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
 4600              		.loc 1 3713 0
 4601              		.cfi_startproc
 4602              		@ args = 0, pretend = 0, frame = 8
 4603              		@ frame_needed = 0, uses_anonymous_args = 0
 4604              	.LVL357:
 4605 0000 10B5     		push	{r4, lr}
 4606              	.LCFI50:
 4607              		.cfi_def_cfa_offset 8
 4608              		.cfi_offset 4, -8
 4609              		.cfi_offset 14, -4
 4610 0002 82B0     		sub	sp, sp, #8
 4611              	.LCFI51:
 4612              		.cfi_def_cfa_offset 16
 4613 0004 0446     		mov	r4, r0
 4614              	.LVL358:
3717:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4615              		.loc 1 3717 0
 4616 0006 FFF7FEFF 		bl	HAL_GetTick
 4617              	.LVL359:
3720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4618              		.loc 1 3720 0
 4619 000a 2268     		ldr	r2, [r4]
 4620 000c 5368     		ldr	r3, [r2, #4]
 4621 000e 23F0A003 		bic	r3, r3, #160
 4622 0012 5360     		str	r3, [r2, #4]
3723:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4623              		.loc 1 3723 0
 4624 0014 0246     		mov	r2, r0
 4625 0016 6421     		movs	r1, #100
 4626 0018 2046     		mov	r0, r4
 4627              	.LVL360:
 4628 001a FFF7FEFF 		bl	SPI_EndRxTxTransaction
 4629              	.LVL361:
 4630 001e 18B1     		cbz	r0, .L433
3725:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4631              		.loc 1 3725 0
 4632 0020 236E     		ldr	r3, [r4, #96]
 4633 0022 43F02003 		orr	r3, r3, #32
 4634 0026 2366     		str	r3, [r4, #96]
 4635              	.L433:
3729:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4636              		.loc 1 3729 0
 4637 0028 A368     		ldr	r3, [r4, #8]
 4638 002a 33B9     		cbnz	r3, .L434
 4639              	.LBB5:
3731:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4640              		.loc 1 3731 0
 4641 002c 0193     		str	r3, [sp, #4]
ARM GAS  /tmp/ccNgnWxc.s 			page 162


 4642 002e 2368     		ldr	r3, [r4]
 4643 0030 DA68     		ldr	r2, [r3, #12]
 4644 0032 0192     		str	r2, [sp, #4]
 4645 0034 9B68     		ldr	r3, [r3, #8]
 4646 0036 0193     		str	r3, [sp, #4]
 4647 0038 019B     		ldr	r3, [sp, #4]
 4648              	.L434:
 4649              	.LBE5:
3734:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   if (hspi->ErrorCode != HAL_SPI_ERROR_NONE)
 4650              		.loc 1 3734 0
 4651 003a 0123     		movs	r3, #1
 4652 003c 84F85D30 		strb	r3, [r4, #93]
3735:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4653              		.loc 1 3735 0
 4654 0040 236E     		ldr	r3, [r4, #96]
 4655 0042 23B9     		cbnz	r3, .L438
3741:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4656              		.loc 1 3741 0
 4657 0044 2046     		mov	r0, r4
 4658 0046 FFF7FEFF 		bl	HAL_SPI_TxCpltCallback
 4659              	.LVL362:
 4660              	.L432:
3743:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4661              		.loc 1 3743 0
 4662 004a 02B0     		add	sp, sp, #8
 4663              	.LCFI52:
 4664              		.cfi_remember_state
 4665              		.cfi_def_cfa_offset 8
 4666              		@ sp needed
 4667 004c 10BD     		pop	{r4, pc}
 4668              	.LVL363:
 4669              	.L438:
 4670              	.LCFI53:
 4671              		.cfi_restore_state
3737:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4672              		.loc 1 3737 0
 4673 004e 2046     		mov	r0, r4
 4674 0050 FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 4675              	.LVL364:
 4676 0054 F9E7     		b	.L432
 4677              		.cfi_endproc
 4678              	.LFE185:
 4680              		.section	.text.SPI_TxISR_8BIT,"ax",%progbits
 4681              		.align	1
 4682              		.syntax unified
 4683              		.thumb
 4684              		.thumb_func
 4685              		.fpu fpv4-sp-d16
 4687              	SPI_TxISR_8BIT:
 4688              	.LFB177:
3383:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *(__IO uint8_t *)&hspi->Instance->DR = (*hspi->pTxBuffPtr++);
 4689              		.loc 1 3383 0
 4690              		.cfi_startproc
 4691              		@ args = 0, pretend = 0, frame = 0
 4692              		@ frame_needed = 0, uses_anonymous_args = 0
 4693              	.LVL365:
 4694 0000 08B5     		push	{r3, lr}
ARM GAS  /tmp/ccNgnWxc.s 			page 163


 4695              	.LCFI54:
 4696              		.cfi_def_cfa_offset 8
 4697              		.cfi_offset 3, -8
 4698              		.cfi_offset 14, -4
3384:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount--;
 4699              		.loc 1 3384 0
 4700 0002 836B     		ldr	r3, [r0, #56]
 4701 0004 5A1C     		adds	r2, r3, #1
 4702 0006 8263     		str	r2, [r0, #56]
 4703 0008 0268     		ldr	r2, [r0]
 4704 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4705 000c 1373     		strb	r3, [r2, #12]
3385:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4706              		.loc 1 3385 0
 4707 000e C38F     		ldrh	r3, [r0, #62]
 4708 0010 013B     		subs	r3, r3, #1
 4709 0012 9BB2     		uxth	r3, r3
 4710 0014 C387     		strh	r3, [r0, #62]	@ movhi
3387:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4711              		.loc 1 3387 0
 4712 0016 C38F     		ldrh	r3, [r0, #62]
 4713 0018 9BB2     		uxth	r3, r3
 4714 001a 2BB9     		cbnz	r3, .L439
3390:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 4715              		.loc 1 3390 0
 4716 001c 836A     		ldr	r3, [r0, #40]
 4717 001e B3F5005F 		cmp	r3, #8192
 4718 0022 02D0     		beq	.L443
 4719              	.L441:
3396:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4720              		.loc 1 3396 0
 4721 0024 FFF7FEFF 		bl	SPI_CloseTx_ISR
 4722              	.LVL366:
 4723              	.L439:
3398:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4724              		.loc 1 3398 0
 4725 0028 08BD     		pop	{r3, pc}
 4726              	.LVL367:
 4727              	.L443:
3393:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 4728              		.loc 1 3393 0
 4729 002a 0268     		ldr	r2, [r0]
 4730 002c 1368     		ldr	r3, [r2]
 4731 002e 43F48053 		orr	r3, r3, #4096
 4732 0032 1360     		str	r3, [r2]
 4733 0034 F6E7     		b	.L441
 4734              		.cfi_endproc
 4735              	.LFE177:
 4737              		.section	.text.SPI_TxISR_16BIT,"ax",%progbits
 4738              		.align	1
 4739              		.syntax unified
 4740              		.thumb
 4741              		.thumb_func
 4742              		.fpu fpv4-sp-d16
 4744              	SPI_TxISR_16BIT:
 4745              	.LFB178:
3407:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Transmit data in 16 Bit mode */
ARM GAS  /tmp/ccNgnWxc.s 			page 164


 4746              		.loc 1 3407 0
 4747              		.cfi_startproc
 4748              		@ args = 0, pretend = 0, frame = 0
 4749              		@ frame_needed = 0, uses_anonymous_args = 0
 4750              	.LVL368:
 4751 0000 08B5     		push	{r3, lr}
 4752              	.LCFI55:
 4753              		.cfi_def_cfa_offset 8
 4754              		.cfi_offset 3, -8
 4755              		.cfi_offset 14, -4
3409:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr += sizeof(uint16_t);
 4756              		.loc 1 3409 0
 4757 0002 826B     		ldr	r2, [r0, #56]
 4758 0004 0368     		ldr	r3, [r0]
 4759 0006 1288     		ldrh	r2, [r2]
 4760 0008 DA60     		str	r2, [r3, #12]
3410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount--;
 4761              		.loc 1 3410 0
 4762 000a 836B     		ldr	r3, [r0, #56]
 4763 000c 0233     		adds	r3, r3, #2
 4764 000e 8363     		str	r3, [r0, #56]
3411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4765              		.loc 1 3411 0
 4766 0010 C38F     		ldrh	r3, [r0, #62]
 4767 0012 013B     		subs	r3, r3, #1
 4768 0014 9BB2     		uxth	r3, r3
 4769 0016 C387     		strh	r3, [r0, #62]	@ movhi
3413:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4770              		.loc 1 3413 0
 4771 0018 C38F     		ldrh	r3, [r0, #62]
 4772 001a 9BB2     		uxth	r3, r3
 4773 001c 2BB9     		cbnz	r3, .L444
3416:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 4774              		.loc 1 3416 0
 4775 001e 836A     		ldr	r3, [r0, #40]
 4776 0020 B3F5005F 		cmp	r3, #8192
 4777 0024 02D0     		beq	.L448
 4778              	.L446:
3422:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4779              		.loc 1 3422 0
 4780 0026 FFF7FEFF 		bl	SPI_CloseTx_ISR
 4781              	.LVL369:
 4782              	.L444:
3424:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4783              		.loc 1 3424 0
 4784 002a 08BD     		pop	{r3, pc}
 4785              	.LVL370:
 4786              	.L448:
3419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 4787              		.loc 1 3419 0
 4788 002c 0268     		ldr	r2, [r0]
 4789 002e 1368     		ldr	r3, [r2]
 4790 0030 43F48053 		orr	r3, r3, #4096
 4791 0034 1360     		str	r3, [r2]
 4792 0036 F6E7     		b	.L446
 4793              		.cfi_endproc
 4794              	.LFE178:
ARM GAS  /tmp/ccNgnWxc.s 			page 165


 4796              		.section	.text.SPI_CloseRx_ISR,"ax",%progbits
 4797              		.align	1
 4798              		.syntax unified
 4799              		.thumb
 4800              		.thumb_func
 4801              		.fpu fpv4-sp-d16
 4803              	SPI_CloseRx_ISR:
 4804              	.LFB184:
3671:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Disable RXNE and ERR interrupt */
 4805              		.loc 1 3671 0
 4806              		.cfi_startproc
 4807              		@ args = 0, pretend = 0, frame = 0
 4808              		@ frame_needed = 0, uses_anonymous_args = 0
 4809              	.LVL371:
 4810 0000 10B5     		push	{r4, lr}
 4811              	.LCFI56:
 4812              		.cfi_def_cfa_offset 8
 4813              		.cfi_offset 4, -8
 4814              		.cfi_offset 14, -4
 4815 0002 0446     		mov	r4, r0
3673:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4816              		.loc 1 3673 0
 4817 0004 0268     		ldr	r2, [r0]
 4818 0006 5368     		ldr	r3, [r2, #4]
 4819 0008 23F06003 		bic	r3, r3, #96
 4820 000c 5360     		str	r3, [r2, #4]
3676:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4821              		.loc 1 3676 0
 4822 000e FFF7FEFF 		bl	HAL_GetTick
 4823              	.LVL372:
 4824 0012 0246     		mov	r2, r0
 4825 0014 6421     		movs	r1, #100
 4826 0016 2046     		mov	r0, r4
 4827 0018 FFF7FEFF 		bl	SPI_EndRxTransaction
 4828              	.LVL373:
 4829 001c 18B1     		cbz	r0, .L450
3678:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4830              		.loc 1 3678 0
 4831 001e 236E     		ldr	r3, [r4, #96]
 4832 0020 43F02003 		orr	r3, r3, #32
 4833 0024 2366     		str	r3, [r4, #96]
 4834              	.L450:
3680:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4835              		.loc 1 3680 0
 4836 0026 0123     		movs	r3, #1
 4837 0028 84F85D30 		strb	r3, [r4, #93]
3684:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4838              		.loc 1 3684 0
 4839 002c 2368     		ldr	r3, [r4]
 4840 002e 9A68     		ldr	r2, [r3, #8]
 4841 0030 12F0100F 		tst	r2, #16
 4842 0034 05D1     		bne	.L455
3693:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 4843              		.loc 1 3693 0
 4844 0036 236E     		ldr	r3, [r4, #96]
 4845 0038 73B1     		cbz	r3, .L456
3699:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
ARM GAS  /tmp/ccNgnWxc.s 			page 166


 4846              		.loc 1 3699 0
 4847 003a 2046     		mov	r0, r4
 4848 003c FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 4849              	.LVL374:
 4850              	.L449:
3704:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4851              		.loc 1 3704 0
 4852 0040 10BD     		pop	{r4, pc}
 4853              	.LVL375:
 4854              	.L455:
3686:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
 4855              		.loc 1 3686 0
 4856 0042 226E     		ldr	r2, [r4, #96]
 4857 0044 42F00202 		orr	r2, r2, #2
 4858 0048 2266     		str	r2, [r4, #96]
3687:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     HAL_SPI_ErrorCallback(hspi);
 4859              		.loc 1 3687 0
 4860 004a 4FF6EF72 		movw	r2, #65519
 4861 004e 9A60     		str	r2, [r3, #8]
3688:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4862              		.loc 1 3688 0
 4863 0050 2046     		mov	r0, r4
 4864 0052 FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 4865              	.LVL376:
 4866 0056 F3E7     		b	.L449
 4867              	.L456:
3695:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 4868              		.loc 1 3695 0
 4869 0058 2046     		mov	r0, r4
 4870 005a FFF7FEFF 		bl	HAL_SPI_RxCpltCallback
 4871              	.LVL377:
 4872 005e EFE7     		b	.L449
 4873              		.cfi_endproc
 4874              	.LFE184:
 4876              		.section	.text.SPI_RxISR_8BIT,"ax",%progbits
 4877              		.align	1
 4878              		.syntax unified
 4879              		.thumb
 4880              		.thumb_func
 4881              		.fpu fpv4-sp-d16
 4883              	SPI_RxISR_8BIT:
 4884              	.LFB174:
3294:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *hspi->pRxBuffPtr++ = (*(__IO uint8_t *)&hspi->Instance->DR);
 4885              		.loc 1 3294 0
 4886              		.cfi_startproc
 4887              		@ args = 0, pretend = 0, frame = 0
 4888              		@ frame_needed = 0, uses_anonymous_args = 0
 4889              	.LVL378:
 4890 0000 08B5     		push	{r3, lr}
 4891              	.LCFI57:
 4892              		.cfi_def_cfa_offset 8
 4893              		.cfi_offset 3, -8
 4894              		.cfi_offset 14, -4
3295:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount--;
 4895              		.loc 1 3295 0
 4896 0002 0268     		ldr	r2, [r0]
 4897 0004 036C     		ldr	r3, [r0, #64]
ARM GAS  /tmp/ccNgnWxc.s 			page 167


 4898 0006 591C     		adds	r1, r3, #1
 4899 0008 0164     		str	r1, [r0, #64]
 4900 000a 127B     		ldrb	r2, [r2, #12]	@ zero_extendqisi2
 4901 000c 1A70     		strb	r2, [r3]
3296:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4902              		.loc 1 3296 0
 4903 000e B0F84630 		ldrh	r3, [r0, #70]
 4904 0012 013B     		subs	r3, r3, #1
 4905 0014 9BB2     		uxth	r3, r3
 4906 0016 A0F84630 		strh	r3, [r0, #70]	@ movhi
3300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4907              		.loc 1 3300 0
 4908 001a B0F84630 		ldrh	r3, [r0, #70]
 4909 001e 9BB2     		uxth	r3, r3
 4910 0020 012B     		cmp	r3, #1
 4911 0022 0AD0     		beq	.L462
 4912              	.L458:
3306:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4913              		.loc 1 3306 0
 4914 0024 B0F84630 		ldrh	r3, [r0, #70]
 4915 0028 9BB2     		uxth	r3, r3
 4916 002a 2BB9     		cbnz	r3, .L457
3309:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 4917              		.loc 1 3309 0
 4918 002c 836A     		ldr	r3, [r0, #40]
 4919 002e B3F5005F 		cmp	r3, #8192
 4920 0032 0CD0     		beq	.L463
3315:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4921              		.loc 1 3315 0
 4922 0034 FFF7FEFF 		bl	SPI_CloseRx_ISR
 4923              	.LVL379:
 4924              	.L457:
3317:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4925              		.loc 1 3317 0
 4926 0038 08BD     		pop	{r3, pc}
 4927              	.LVL380:
 4928              	.L462:
3300:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4929              		.loc 1 3300 0 discriminator 1
 4930 003a 836A     		ldr	r3, [r0, #40]
 4931 003c B3F5005F 		cmp	r3, #8192
 4932 0040 F0D1     		bne	.L458
3302:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 4933              		.loc 1 3302 0
 4934 0042 0268     		ldr	r2, [r0]
 4935 0044 1368     		ldr	r3, [r2]
 4936 0046 43F48053 		orr	r3, r3, #4096
 4937 004a 1360     		str	r3, [r2]
 4938 004c EAE7     		b	.L458
 4939              	.L463:
3311:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
 4940              		.loc 1 3311 0
 4941 004e 014B     		ldr	r3, .L464
 4942 0050 C364     		str	r3, [r0, #76]
3312:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 4943              		.loc 1 3312 0
 4944 0052 F1E7     		b	.L457
ARM GAS  /tmp/ccNgnWxc.s 			page 168


 4945              	.L465:
 4946              		.align	2
 4947              	.L464:
 4948 0054 00000000 		.word	SPI_RxISR_8BITCRC
 4949              		.cfi_endproc
 4950              	.LFE174:
 4952              		.section	.text.SPI_RxISR_8BITCRC,"ax",%progbits
 4953              		.align	1
 4954              		.syntax unified
 4955              		.thumb
 4956              		.thumb_func
 4957              		.fpu fpv4-sp-d16
 4959              	SPI_RxISR_8BITCRC:
 4960              	.LFB173:
3269:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint8_t tmpreg = 0U;
 4961              		.loc 1 3269 0
 4962              		.cfi_startproc
 4963              		@ args = 0, pretend = 0, frame = 8
 4964              		@ frame_needed = 0, uses_anonymous_args = 0
 4965              	.LVL381:
 4966 0000 00B5     		push	{lr}
 4967              	.LCFI58:
 4968              		.cfi_def_cfa_offset 4
 4969              		.cfi_offset 14, -4
 4970 0002 83B0     		sub	sp, sp, #12
 4971              	.LCFI59:
 4972              		.cfi_def_cfa_offset 16
3270:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4973              		.loc 1 3270 0
 4974 0004 0023     		movs	r3, #0
 4975 0006 8DF80730 		strb	r3, [sp, #7]
3273:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4976              		.loc 1 3273 0
 4977 000a 0368     		ldr	r3, [r0]
 4978 000c 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 4979 000e DBB2     		uxtb	r3, r3
 4980 0010 8DF80730 		strb	r3, [sp, #7]
3276:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4981              		.loc 1 3276 0
 4982 0014 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
3278:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 4983              		.loc 1 3278 0
 4984 0018 836C     		ldr	r3, [r0, #72]
 4985 001a 013B     		subs	r3, r3, #1
 4986 001c 8364     		str	r3, [r0, #72]
3280:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 4987              		.loc 1 3280 0
 4988 001e 13B1     		cbz	r3, .L469
 4989              	.LVL382:
 4990              	.L466:
3284:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 4991              		.loc 1 3284 0
 4992 0020 03B0     		add	sp, sp, #12
 4993              	.LCFI60:
 4994              		.cfi_remember_state
 4995              		.cfi_def_cfa_offset 4
 4996              		@ sp needed
ARM GAS  /tmp/ccNgnWxc.s 			page 169


 4997 0022 5DF804FB 		ldr	pc, [sp], #4
 4998              	.LVL383:
 4999              	.L469:
 5000              	.LCFI61:
 5001              		.cfi_restore_state
3282:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 5002              		.loc 1 3282 0
 5003 0026 FFF7FEFF 		bl	SPI_CloseRx_ISR
 5004              	.LVL384:
3284:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 5005              		.loc 1 3284 0
 5006 002a F9E7     		b	.L466
 5007              		.cfi_endproc
 5008              	.LFE173:
 5010              		.section	.text.SPI_RxISR_16BIT,"ax",%progbits
 5011              		.align	1
 5012              		.syntax unified
 5013              		.thumb
 5014              		.thumb_func
 5015              		.fpu fpv4-sp-d16
 5017              	SPI_RxISR_16BIT:
 5018              	.LFB176:
3350:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   *((uint16_t *)hspi->pRxBuffPtr) = hspi->Instance->DR;
 5019              		.loc 1 3350 0
 5020              		.cfi_startproc
 5021              		@ args = 0, pretend = 0, frame = 0
 5022              		@ frame_needed = 0, uses_anonymous_args = 0
 5023              	.LVL385:
 5024 0000 08B5     		push	{r3, lr}
 5025              	.LCFI62:
 5026              		.cfi_def_cfa_offset 8
 5027              		.cfi_offset 3, -8
 5028              		.cfi_offset 14, -4
3351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr += sizeof(uint16_t);
 5029              		.loc 1 3351 0
 5030 0002 0368     		ldr	r3, [r0]
 5031 0004 DA68     		ldr	r2, [r3, #12]
 5032 0006 036C     		ldr	r3, [r0, #64]
 5033 0008 1A80     		strh	r2, [r3]	@ movhi
3352:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount--;
 5034              		.loc 1 3352 0
 5035 000a 036C     		ldr	r3, [r0, #64]
 5036 000c 0233     		adds	r3, r3, #2
 5037 000e 0364     		str	r3, [r0, #64]
3353:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5038              		.loc 1 3353 0
 5039 0010 B0F84630 		ldrh	r3, [r0, #70]
 5040 0014 013B     		subs	r3, r3, #1
 5041 0016 9BB2     		uxth	r3, r3
 5042 0018 A0F84630 		strh	r3, [r0, #70]	@ movhi
3357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5043              		.loc 1 3357 0
 5044 001c B0F84630 		ldrh	r3, [r0, #70]
 5045 0020 9BB2     		uxth	r3, r3
 5046 0022 012B     		cmp	r3, #1
 5047 0024 0AD0     		beq	.L475
 5048              	.L471:
ARM GAS  /tmp/ccNgnWxc.s 			page 170


3363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5049              		.loc 1 3363 0
 5050 0026 B0F84630 		ldrh	r3, [r0, #70]
 5051 002a 9BB2     		uxth	r3, r3
 5052 002c 2BB9     		cbnz	r3, .L470
3366:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5053              		.loc 1 3366 0
 5054 002e 836A     		ldr	r3, [r0, #40]
 5055 0030 B3F5005F 		cmp	r3, #8192
 5056 0034 0CD0     		beq	.L476
3372:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 5057              		.loc 1 3372 0
 5058 0036 FFF7FEFF 		bl	SPI_CloseRx_ISR
 5059              	.LVL386:
 5060              	.L470:
3374:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5061              		.loc 1 3374 0
 5062 003a 08BD     		pop	{r3, pc}
 5063              	.LVL387:
 5064              	.L475:
3357:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5065              		.loc 1 3357 0 discriminator 1
 5066 003c 836A     		ldr	r3, [r0, #40]
 5067 003e B3F5005F 		cmp	r3, #8192
 5068 0042 F0D1     		bne	.L471
3359:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 5069              		.loc 1 3359 0
 5070 0044 0268     		ldr	r2, [r0]
 5071 0046 1368     		ldr	r3, [r2]
 5072 0048 43F48053 		orr	r3, r3, #4096
 5073 004c 1360     		str	r3, [r2]
 5074 004e EAE7     		b	.L471
 5075              	.L476:
3368:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
 5076              		.loc 1 3368 0
 5077 0050 014B     		ldr	r3, .L477
 5078 0052 C364     		str	r3, [r0, #76]
3369:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5079              		.loc 1 3369 0
 5080 0054 F1E7     		b	.L470
 5081              	.L478:
 5082 0056 00BF     		.align	2
 5083              	.L477:
 5084 0058 00000000 		.word	SPI_RxISR_16BITCRC
 5085              		.cfi_endproc
 5086              	.LFE176:
 5088              		.section	.text.SPI_RxISR_16BITCRC,"ax",%progbits
 5089              		.align	1
 5090              		.syntax unified
 5091              		.thumb
 5092              		.thumb_func
 5093              		.fpu fpv4-sp-d16
 5095              	SPI_RxISR_16BITCRC:
 5096              	.LFB175:
3327:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint16_t tmpreg = 0U;
 5097              		.loc 1 3327 0
 5098              		.cfi_startproc
ARM GAS  /tmp/ccNgnWxc.s 			page 171


 5099              		@ args = 0, pretend = 0, frame = 8
 5100              		@ frame_needed = 0, uses_anonymous_args = 0
 5101              	.LVL388:
 5102 0000 00B5     		push	{lr}
 5103              	.LCFI63:
 5104              		.cfi_def_cfa_offset 4
 5105              		.cfi_offset 14, -4
 5106 0002 83B0     		sub	sp, sp, #12
 5107              	.LCFI64:
 5108              		.cfi_def_cfa_offset 16
3328:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5109              		.loc 1 3328 0
 5110 0004 0023     		movs	r3, #0
 5111 0006 ADF80630 		strh	r3, [sp, #6]	@ movhi
3331:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5112              		.loc 1 3331 0
 5113 000a 0368     		ldr	r3, [r0]
 5114 000c DA68     		ldr	r2, [r3, #12]
 5115 000e 92B2     		uxth	r2, r2
 5116 0010 ADF80620 		strh	r2, [sp, #6]	@ movhi
3334:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5117              		.loc 1 3334 0
 5118 0014 BDF80620 		ldrh	r2, [sp, #6]
3337:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5119              		.loc 1 3337 0
 5120 0018 5A68     		ldr	r2, [r3, #4]
 5121 001a 22F06002 		bic	r2, r2, #96
 5122 001e 5A60     		str	r2, [r3, #4]
3339:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 5123              		.loc 1 3339 0
 5124 0020 FFF7FEFF 		bl	SPI_CloseRx_ISR
 5125              	.LVL389:
3340:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 5126              		.loc 1 3340 0
 5127 0024 03B0     		add	sp, sp, #12
 5128              	.LCFI65:
 5129              		.cfi_def_cfa_offset 4
 5130              		@ sp needed
 5131 0026 5DF804FB 		ldr	pc, [sp], #4
 5132              		.cfi_endproc
 5133              	.LFE175:
 5135              		.section	.text.SPI_CloseRxTx_ISR,"ax",%progbits
 5136              		.align	1
 5137              		.syntax unified
 5138              		.thumb
 5139              		.thumb_func
 5140              		.fpu fpv4-sp-d16
 5142              	SPI_CloseRxTx_ISR:
 5143              	.LFB183:
3614:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
 5144              		.loc 1 3614 0
 5145              		.cfi_startproc
 5146              		@ args = 0, pretend = 0, frame = 0
 5147              		@ frame_needed = 0, uses_anonymous_args = 0
 5148              	.LVL390:
 5149 0000 10B5     		push	{r4, lr}
 5150              	.LCFI66:
ARM GAS  /tmp/ccNgnWxc.s 			page 172


 5151              		.cfi_def_cfa_offset 8
 5152              		.cfi_offset 4, -8
 5153              		.cfi_offset 14, -4
 5154 0002 0446     		mov	r4, r0
 5155              	.LVL391:
3618:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5156              		.loc 1 3618 0
 5157 0004 FFF7FEFF 		bl	HAL_GetTick
 5158              	.LVL392:
3621:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5159              		.loc 1 3621 0
 5160 0008 2268     		ldr	r2, [r4]
 5161 000a 5368     		ldr	r3, [r2, #4]
 5162 000c 23F02003 		bic	r3, r3, #32
 5163 0010 5360     		str	r3, [r2, #4]
3624:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5164              		.loc 1 3624 0
 5165 0012 0246     		mov	r2, r0
 5166 0014 6421     		movs	r1, #100
 5167 0016 2046     		mov	r0, r4
 5168              	.LVL393:
 5169 0018 FFF7FEFF 		bl	SPI_EndRxTxTransaction
 5170              	.LVL394:
 5171 001c 18B1     		cbz	r0, .L482
3626:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 5172              		.loc 1 3626 0
 5173 001e 236E     		ldr	r3, [r4, #96]
 5174 0020 43F02003 		orr	r3, r3, #32
 5175 0024 2366     		str	r3, [r4, #96]
 5176              	.L482:
3631:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5177              		.loc 1 3631 0
 5178 0026 2368     		ldr	r3, [r4]
 5179 0028 9A68     		ldr	r2, [r3, #8]
 5180 002a 12F0100F 		tst	r2, #16
 5181 002e 0DD1     		bne	.L488
3641:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5182              		.loc 1 3641 0
 5183 0030 236E     		ldr	r3, [r4, #96]
 5184 0032 03BB     		cbnz	r3, .L485
3643:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 5185              		.loc 1 3643 0
 5186 0034 94F85D30 		ldrb	r3, [r4, #93]	@ zero_extendqisi2
 5187 0038 DBB2     		uxtb	r3, r3
 5188 003a 042B     		cmp	r3, #4
 5189 003c 14D0     		beq	.L489
3650:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         HAL_SPI_TxRxCpltCallback(hspi);
 5190              		.loc 1 3650 0
 5191 003e 0123     		movs	r3, #1
 5192 0040 84F85D30 		strb	r3, [r4, #93]
3651:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 5193              		.loc 1 3651 0
 5194 0044 2046     		mov	r0, r4
 5195 0046 FFF7FEFF 		bl	HAL_SPI_TxRxCpltCallback
 5196              	.LVL395:
 5197              	.L481:
3662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
ARM GAS  /tmp/ccNgnWxc.s 			page 173


 5198              		.loc 1 3662 0
 5199 004a 10BD     		pop	{r4, pc}
 5200              	.LVL396:
 5201              	.L488:
3633:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
 5202              		.loc 1 3633 0
 5203 004c 0122     		movs	r2, #1
 5204 004e 84F85D20 		strb	r2, [r4, #93]
3634:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
 5205              		.loc 1 3634 0
 5206 0052 226E     		ldr	r2, [r4, #96]
 5207 0054 42F00202 		orr	r2, r2, #2
 5208 0058 2266     		str	r2, [r4, #96]
3635:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     HAL_SPI_ErrorCallback(hspi);
 5209              		.loc 1 3635 0
 5210 005a 4FF6EF72 		movw	r2, #65519
 5211 005e 9A60     		str	r2, [r3, #8]
3636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 5212              		.loc 1 3636 0
 5213 0060 2046     		mov	r0, r4
 5214 0062 FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 5215              	.LVL397:
 5216 0066 F0E7     		b	.L481
 5217              	.L489:
3645:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         HAL_SPI_RxCpltCallback(hspi);
 5218              		.loc 1 3645 0
 5219 0068 0123     		movs	r3, #1
 5220 006a 84F85D30 		strb	r3, [r4, #93]
3646:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 5221              		.loc 1 3646 0
 5222 006e 2046     		mov	r0, r4
 5223 0070 FFF7FEFF 		bl	HAL_SPI_RxCpltCallback
 5224              	.LVL398:
 5225 0074 E9E7     		b	.L481
 5226              	.L485:
3656:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       HAL_SPI_ErrorCallback(hspi);
 5227              		.loc 1 3656 0
 5228 0076 0123     		movs	r3, #1
 5229 0078 84F85D30 		strb	r3, [r4, #93]
3657:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5230              		.loc 1 3657 0
 5231 007c 2046     		mov	r0, r4
 5232 007e FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 5233              	.LVL399:
3662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5234              		.loc 1 3662 0
 5235 0082 E2E7     		b	.L481
 5236              		.cfi_endproc
 5237              	.LFE183:
 5239              		.section	.text.SPI_2linesTxISR_8BIT,"ax",%progbits
 5240              		.align	1
 5241              		.syntax unified
 5242              		.thumb
 5243              		.thumb_func
 5244              		.fpu fpv4-sp-d16
 5246              	SPI_2linesTxISR_8BIT:
 5247              	.LFB169:
ARM GAS  /tmp/ccNgnWxc.s 			page 174


3127:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Transmit data in packing Bit mode */
 5248              		.loc 1 3127 0
 5249              		.cfi_startproc
 5250              		@ args = 0, pretend = 0, frame = 0
 5251              		@ frame_needed = 0, uses_anonymous_args = 0
 5252              	.LVL400:
 5253 0000 08B5     		push	{r3, lr}
 5254              	.LCFI67:
 5255              		.cfi_def_cfa_offset 8
 5256              		.cfi_offset 3, -8
 5257              		.cfi_offset 14, -4
3129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5258              		.loc 1 3129 0
 5259 0002 C38F     		ldrh	r3, [r0, #62]
 5260 0004 9BB2     		uxth	r3, r3
 5261 0006 012B     		cmp	r3, #1
 5262 0008 1BD9     		bls	.L491
3131:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->pTxBuffPtr += sizeof(uint16_t);
 5263              		.loc 1 3131 0
 5264 000a 826B     		ldr	r2, [r0, #56]
 5265 000c 0368     		ldr	r3, [r0]
 5266 000e 1288     		ldrh	r2, [r2]
 5267 0010 DA60     		str	r2, [r3, #12]
3132:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxXferCount -= 2U;
 5268              		.loc 1 3132 0
 5269 0012 836B     		ldr	r3, [r0, #56]
 5270 0014 0233     		adds	r3, r3, #2
 5271 0016 8363     		str	r3, [r0, #56]
3133:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 5272              		.loc 1 3133 0
 5273 0018 C38F     		ldrh	r3, [r0, #62]
 5274 001a 023B     		subs	r3, r3, #2
 5275 001c 9BB2     		uxth	r3, r3
 5276 001e C387     		strh	r3, [r0, #62]	@ movhi
 5277              	.L492:
3143:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5278              		.loc 1 3143 0
 5279 0020 C38F     		ldrh	r3, [r0, #62]
 5280 0022 9BB2     		uxth	r3, r3
 5281 0024 63B9     		cbnz	r3, .L490
3146:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5282              		.loc 1 3146 0
 5283 0026 836A     		ldr	r3, [r0, #40]
 5284 0028 B3F5005F 		cmp	r3, #8192
 5285 002c 14D0     		beq	.L496
3157:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5286              		.loc 1 3157 0
 5287 002e 0268     		ldr	r2, [r0]
 5288 0030 5368     		ldr	r3, [r2, #4]
 5289 0032 23F08003 		bic	r3, r3, #128
 5290 0036 5360     		str	r3, [r2, #4]
3159:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5291              		.loc 1 3159 0
 5292 0038 B0F84630 		ldrh	r3, [r0, #70]
 5293 003c 9BB2     		uxth	r3, r3
 5294 003e B3B1     		cbz	r3, .L497
 5295              	.LVL401:
ARM GAS  /tmp/ccNgnWxc.s 			page 175


 5296              	.L490:
3164:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5297              		.loc 1 3164 0
 5298 0040 08BD     		pop	{r3, pc}
 5299              	.LVL402:
 5300              	.L491:
3138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxXferCount--;
 5301              		.loc 1 3138 0
 5302 0042 836B     		ldr	r3, [r0, #56]
 5303 0044 5A1C     		adds	r2, r3, #1
 5304 0046 8263     		str	r2, [r0, #56]
 5305 0048 0268     		ldr	r2, [r0]
 5306 004a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5307 004c 1373     		strb	r3, [r2, #12]
3139:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 5308              		.loc 1 3139 0
 5309 004e C38F     		ldrh	r3, [r0, #62]
 5310 0050 013B     		subs	r3, r3, #1
 5311 0052 9BB2     		uxth	r3, r3
 5312 0054 C387     		strh	r3, [r0, #62]	@ movhi
 5313 0056 E3E7     		b	.L492
 5314              	.L496:
3149:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Disable TXE interrupt */
 5315              		.loc 1 3149 0
 5316 0058 0268     		ldr	r2, [r0]
 5317 005a 1368     		ldr	r3, [r2]
 5318 005c 43F48053 		orr	r3, r3, #4096
 5319 0060 1360     		str	r3, [r2]
3151:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
 5320              		.loc 1 3151 0
 5321 0062 0268     		ldr	r2, [r0]
 5322 0064 5368     		ldr	r3, [r2, #4]
 5323 0066 23F08003 		bic	r3, r3, #128
 5324 006a 5360     		str	r3, [r2, #4]
3152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5325              		.loc 1 3152 0
 5326 006c E8E7     		b	.L490
 5327              	.L497:
3161:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5328              		.loc 1 3161 0
 5329 006e FFF7FEFF 		bl	SPI_CloseRxTx_ISR
 5330              	.LVL403:
 5331 0072 E5E7     		b	.L490
 5332              		.cfi_endproc
 5333              	.LFE169:
 5335              		.section	.text.SPI_2linesRxISR_8BIT,"ax",%progbits
 5336              		.align	1
 5337              		.syntax unified
 5338              		.thumb
 5339              		.thumb_func
 5340              		.fpu fpv4-sp-d16
 5342              	SPI_2linesRxISR_8BIT:
 5343              	.LFB167:
3045:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Receive data in packing mode */
 5344              		.loc 1 3045 0
 5345              		.cfi_startproc
 5346              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccNgnWxc.s 			page 176


 5347              		@ frame_needed = 0, uses_anonymous_args = 0
 5348              	.LVL404:
 5349 0000 08B5     		push	{r3, lr}
 5350              	.LCFI68:
 5351              		.cfi_def_cfa_offset 8
 5352              		.cfi_offset 3, -8
 5353              		.cfi_offset 14, -4
3047:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5354              		.loc 1 3047 0
 5355 0002 B0F84630 		ldrh	r3, [r0, #70]
 5356 0006 9BB2     		uxth	r3, r3
 5357 0008 012B     		cmp	r3, #1
 5358 000a 28D9     		bls	.L499
3049:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->pRxBuffPtr += sizeof(uint16_t);
 5359              		.loc 1 3049 0
 5360 000c 0368     		ldr	r3, [r0]
 5361 000e DA68     		ldr	r2, [r3, #12]
 5362 0010 036C     		ldr	r3, [r0, #64]
 5363 0012 1A80     		strh	r2, [r3]	@ movhi
3050:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxXferCount -= 2U;
 5364              		.loc 1 3050 0
 5365 0014 036C     		ldr	r3, [r0, #64]
 5366 0016 0233     		adds	r3, r3, #2
 5367 0018 0364     		str	r3, [r0, #64]
3051:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     if (hspi->RxXferCount == 1U)
 5368              		.loc 1 3051 0
 5369 001a B0F84630 		ldrh	r3, [r0, #70]
 5370 001e 023B     		subs	r3, r3, #2
 5371 0020 9BB2     		uxth	r3, r3
 5372 0022 A0F84630 		strh	r3, [r0, #70]	@ movhi
3052:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5373              		.loc 1 3052 0
 5374 0026 B0F84630 		ldrh	r3, [r0, #70]
 5375 002a 9BB2     		uxth	r3, r3
 5376 002c 012B     		cmp	r3, #1
 5377 002e 10D0     		beq	.L504
 5378              	.L500:
3066:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5379              		.loc 1 3066 0
 5380 0030 B0F84630 		ldrh	r3, [r0, #70]
 5381 0034 9BB2     		uxth	r3, r3
 5382 0036 5BB9     		cbnz	r3, .L498
3069:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5383              		.loc 1 3069 0
 5384 0038 836A     		ldr	r3, [r0, #40]
 5385 003a B3F5005F 		cmp	r3, #8192
 5386 003e 1BD0     		beq	.L505
3078:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5387              		.loc 1 3078 0
 5388 0040 0268     		ldr	r2, [r0]
 5389 0042 5368     		ldr	r3, [r2, #4]
 5390 0044 23F06003 		bic	r3, r3, #96
 5391 0048 5360     		str	r3, [r2, #4]
3080:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5392              		.loc 1 3080 0
 5393 004a C38F     		ldrh	r3, [r0, #62]
 5394 004c 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccNgnWxc.s 			page 177


 5395 004e DBB1     		cbz	r3, .L506
 5396              	.LVL405:
 5397              	.L498:
3085:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5398              		.loc 1 3085 0
 5399 0050 08BD     		pop	{r3, pc}
 5400              	.LVL406:
 5401              	.L504:
3055:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5402              		.loc 1 3055 0
 5403 0052 0268     		ldr	r2, [r0]
 5404 0054 5368     		ldr	r3, [r2, #4]
 5405 0056 43F48053 		orr	r3, r3, #4096
 5406 005a 5360     		str	r3, [r2, #4]
 5407 005c E8E7     		b	.L500
 5408              	.L499:
3061:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxXferCount--;
 5409              		.loc 1 3061 0
 5410 005e 0268     		ldr	r2, [r0]
 5411 0060 036C     		ldr	r3, [r0, #64]
 5412 0062 591C     		adds	r1, r3, #1
 5413 0064 0164     		str	r1, [r0, #64]
 5414 0066 127B     		ldrb	r2, [r2, #12]	@ zero_extendqisi2
 5415 0068 1A70     		strb	r2, [r3]
3062:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 5416              		.loc 1 3062 0
 5417 006a B0F84630 		ldrh	r3, [r0, #70]
 5418 006e 013B     		subs	r3, r3, #1
 5419 0070 9BB2     		uxth	r3, r3
 5420 0072 A0F84630 		strh	r3, [r0, #70]	@ movhi
 5421 0076 DBE7     		b	.L500
 5422              	.L505:
3071:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       hspi->RxISR =  SPI_2linesRxISR_8BITCRC;
 5423              		.loc 1 3071 0
 5424 0078 0268     		ldr	r2, [r0]
 5425 007a 5368     		ldr	r3, [r2, #4]
 5426 007c 43F48053 		orr	r3, r3, #4096
 5427 0080 5360     		str	r3, [r2, #4]
3072:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
 5428              		.loc 1 3072 0
 5429 0082 034B     		ldr	r3, .L507
 5430 0084 C364     		str	r3, [r0, #76]
3073:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5431              		.loc 1 3073 0
 5432 0086 E3E7     		b	.L498
 5433              	.L506:
3082:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5434              		.loc 1 3082 0
 5435 0088 FFF7FEFF 		bl	SPI_CloseRxTx_ISR
 5436              	.LVL407:
 5437 008c E0E7     		b	.L498
 5438              	.L508:
 5439 008e 00BF     		.align	2
 5440              	.L507:
 5441 0090 00000000 		.word	SPI_2linesRxISR_8BITCRC
 5442              		.cfi_endproc
 5443              	.LFE167:
ARM GAS  /tmp/ccNgnWxc.s 			page 178


 5445              		.section	.text.SPI_2linesRxISR_8BITCRC,"ax",%progbits
 5446              		.align	1
 5447              		.syntax unified
 5448              		.thumb
 5449              		.thumb_func
 5450              		.fpu fpv4-sp-d16
 5452              	SPI_2linesRxISR_8BITCRC:
 5453              	.LFB168:
3095:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __IO uint8_t tmpreg = 0U;
 5454              		.loc 1 3095 0
 5455              		.cfi_startproc
 5456              		@ args = 0, pretend = 0, frame = 8
 5457              		@ frame_needed = 0, uses_anonymous_args = 0
 5458              	.LVL408:
 5459 0000 00B5     		push	{lr}
 5460              	.LCFI69:
 5461              		.cfi_def_cfa_offset 4
 5462              		.cfi_offset 14, -4
 5463 0002 83B0     		sub	sp, sp, #12
 5464              	.LCFI70:
 5465              		.cfi_def_cfa_offset 16
3096:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5466              		.loc 1 3096 0
 5467 0004 0023     		movs	r3, #0
 5468 0006 8DF80730 		strb	r3, [sp, #7]
3099:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5469              		.loc 1 3099 0
 5470 000a 0268     		ldr	r2, [r0]
 5471 000c 137B     		ldrb	r3, [r2, #12]	@ zero_extendqisi2
 5472 000e DBB2     		uxtb	r3, r3
 5473 0010 8DF80730 		strb	r3, [sp, #7]
3102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5474              		.loc 1 3102 0
 5475 0014 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
3104:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5476              		.loc 1 3104 0
 5477 0018 836C     		ldr	r3, [r0, #72]
 5478 001a 013B     		subs	r3, r3, #1
 5479 001c 8364     		str	r3, [r0, #72]
3107:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5480              		.loc 1 3107 0
 5481 001e 33B9     		cbnz	r3, .L509
3110:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5482              		.loc 1 3110 0
 5483 0020 5368     		ldr	r3, [r2, #4]
 5484 0022 23F06003 		bic	r3, r3, #96
 5485 0026 5360     		str	r3, [r2, #4]
3112:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5486              		.loc 1 3112 0
 5487 0028 C38F     		ldrh	r3, [r0, #62]
 5488 002a 9BB2     		uxth	r3, r3
 5489 002c 13B1     		cbz	r3, .L512
 5490              	.LVL409:
 5491              	.L509:
3117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 5492              		.loc 1 3117 0
 5493 002e 03B0     		add	sp, sp, #12
ARM GAS  /tmp/ccNgnWxc.s 			page 179


 5494              	.LCFI71:
 5495              		.cfi_remember_state
 5496              		.cfi_def_cfa_offset 4
 5497              		@ sp needed
 5498 0030 5DF804FB 		ldr	pc, [sp], #4
 5499              	.LVL410:
 5500              	.L512:
 5501              	.LCFI72:
 5502              		.cfi_restore_state
3114:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5503              		.loc 1 3114 0
 5504 0034 FFF7FEFF 		bl	SPI_CloseRxTx_ISR
 5505              	.LVL411:
3117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 5506              		.loc 1 3117 0
 5507 0038 F9E7     		b	.L509
 5508              		.cfi_endproc
 5509              	.LFE168:
 5511              		.section	.text.SPI_2linesTxISR_16BIT,"ax",%progbits
 5512              		.align	1
 5513              		.syntax unified
 5514              		.thumb
 5515              		.thumb_func
 5516              		.fpu fpv4-sp-d16
 5518              	SPI_2linesTxISR_16BIT:
 5519              	.LFB172:
3231:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Transmit data in 16 Bit mode */
 5520              		.loc 1 3231 0
 5521              		.cfi_startproc
 5522              		@ args = 0, pretend = 0, frame = 0
 5523              		@ frame_needed = 0, uses_anonymous_args = 0
 5524              	.LVL412:
 5525 0000 08B5     		push	{r3, lr}
 5526              	.LCFI73:
 5527              		.cfi_def_cfa_offset 8
 5528              		.cfi_offset 3, -8
 5529              		.cfi_offset 14, -4
3233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pTxBuffPtr += sizeof(uint16_t);
 5530              		.loc 1 3233 0
 5531 0002 826B     		ldr	r2, [r0, #56]
 5532 0004 0368     		ldr	r3, [r0]
 5533 0006 1288     		ldrh	r2, [r2]
 5534 0008 DA60     		str	r2, [r3, #12]
3234:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount--;
 5535              		.loc 1 3234 0
 5536 000a 836B     		ldr	r3, [r0, #56]
 5537 000c 0233     		adds	r3, r3, #2
 5538 000e 8363     		str	r3, [r0, #56]
3235:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5539              		.loc 1 3235 0
 5540 0010 C38F     		ldrh	r3, [r0, #62]
 5541 0012 013B     		subs	r3, r3, #1
 5542 0014 9BB2     		uxth	r3, r3
 5543 0016 C387     		strh	r3, [r0, #62]	@ movhi
3238:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5544              		.loc 1 3238 0
 5545 0018 C38F     		ldrh	r3, [r0, #62]
ARM GAS  /tmp/ccNgnWxc.s 			page 180


 5546 001a 9BB2     		uxth	r3, r3
 5547 001c 63B9     		cbnz	r3, .L513
3241:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5548              		.loc 1 3241 0
 5549 001e 836A     		ldr	r3, [r0, #40]
 5550 0020 B3F5005F 		cmp	r3, #8192
 5551 0024 09D0     		beq	.L517
3252:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5552              		.loc 1 3252 0
 5553 0026 0268     		ldr	r2, [r0]
 5554 0028 5368     		ldr	r3, [r2, #4]
 5555 002a 23F08003 		bic	r3, r3, #128
 5556 002e 5360     		str	r3, [r2, #4]
3254:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5557              		.loc 1 3254 0
 5558 0030 B0F84630 		ldrh	r3, [r0, #70]
 5559 0034 9BB2     		uxth	r3, r3
 5560 0036 5BB1     		cbz	r3, .L518
 5561              	.LVL413:
 5562              	.L513:
3259:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5563              		.loc 1 3259 0
 5564 0038 08BD     		pop	{r3, pc}
 5565              	.LVL414:
 5566              	.L517:
3244:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Disable TXE interrupt */
 5567              		.loc 1 3244 0
 5568 003a 0268     		ldr	r2, [r0]
 5569 003c 1368     		ldr	r3, [r2]
 5570 003e 43F48053 		orr	r3, r3, #4096
 5571 0042 1360     		str	r3, [r2]
3246:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
 5572              		.loc 1 3246 0
 5573 0044 0268     		ldr	r2, [r0]
 5574 0046 5368     		ldr	r3, [r2, #4]
 5575 0048 23F08003 		bic	r3, r3, #128
 5576 004c 5360     		str	r3, [r2, #4]
3247:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5577              		.loc 1 3247 0
 5578 004e F3E7     		b	.L513
 5579              	.L518:
3256:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5580              		.loc 1 3256 0
 5581 0050 FFF7FEFF 		bl	SPI_CloseRxTx_ISR
 5582              	.LVL415:
 5583 0054 F0E7     		b	.L513
 5584              		.cfi_endproc
 5585              	.LFE172:
 5587              		.section	.text.SPI_2linesRxISR_16BIT,"ax",%progbits
 5588              		.align	1
 5589              		.syntax unified
 5590              		.thumb
 5591              		.thumb_func
 5592              		.fpu fpv4-sp-d16
 5594              	SPI_2linesRxISR_16BIT:
 5595              	.LFB170:
3173:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Receive data in 16 Bit mode */
ARM GAS  /tmp/ccNgnWxc.s 			page 181


 5596              		.loc 1 3173 0
 5597              		.cfi_startproc
 5598              		@ args = 0, pretend = 0, frame = 0
 5599              		@ frame_needed = 0, uses_anonymous_args = 0
 5600              	.LVL416:
 5601 0000 08B5     		push	{r3, lr}
 5602              	.LCFI74:
 5603              		.cfi_def_cfa_offset 8
 5604              		.cfi_offset 3, -8
 5605              		.cfi_offset 14, -4
3175:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->pRxBuffPtr += sizeof(uint16_t);
 5606              		.loc 1 3175 0
 5607 0002 0368     		ldr	r3, [r0]
 5608 0004 DA68     		ldr	r2, [r3, #12]
 5609 0006 036C     		ldr	r3, [r0, #64]
 5610 0008 1A80     		strh	r2, [r3]	@ movhi
3176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount--;
 5611              		.loc 1 3176 0
 5612 000a 036C     		ldr	r3, [r0, #64]
 5613 000c 0233     		adds	r3, r3, #2
 5614 000e 0364     		str	r3, [r0, #64]
3177:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5615              		.loc 1 3177 0
 5616 0010 B0F84630 		ldrh	r3, [r0, #70]
 5617 0014 013B     		subs	r3, r3, #1
 5618 0016 9BB2     		uxth	r3, r3
 5619 0018 A0F84630 		strh	r3, [r0, #70]	@ movhi
3179:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5620              		.loc 1 3179 0
 5621 001c B0F84630 		ldrh	r3, [r0, #70]
 5622 0020 9BB2     		uxth	r3, r3
 5623 0022 5BB9     		cbnz	r3, .L519
3182:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5624              		.loc 1 3182 0
 5625 0024 836A     		ldr	r3, [r0, #40]
 5626 0026 B3F5005F 		cmp	r3, #8192
 5627 002a 08D0     		beq	.L523
3190:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5628              		.loc 1 3190 0
 5629 002c 0268     		ldr	r2, [r0]
 5630 002e 5368     		ldr	r3, [r2, #4]
 5631 0030 23F04003 		bic	r3, r3, #64
 5632 0034 5360     		str	r3, [r2, #4]
3192:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5633              		.loc 1 3192 0
 5634 0036 C38F     		ldrh	r3, [r0, #62]
 5635 0038 9BB2     		uxth	r3, r3
 5636 003a 1BB1     		cbz	r3, .L524
 5637              	.LVL417:
 5638              	.L519:
3197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5639              		.loc 1 3197 0
 5640 003c 08BD     		pop	{r3, pc}
 5641              	.LVL418:
 5642              	.L523:
3184:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
 5643              		.loc 1 3184 0
ARM GAS  /tmp/ccNgnWxc.s 			page 182


 5644 003e 034B     		ldr	r3, .L525
 5645 0040 C364     		str	r3, [r0, #76]
3185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5646              		.loc 1 3185 0
 5647 0042 FBE7     		b	.L519
 5648              	.L524:
3194:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5649              		.loc 1 3194 0
 5650 0044 FFF7FEFF 		bl	SPI_CloseRxTx_ISR
 5651              	.LVL419:
 5652 0048 F8E7     		b	.L519
 5653              	.L526:
 5654 004a 00BF     		.align	2
 5655              	.L525:
 5656 004c 00000000 		.word	SPI_2linesRxISR_16BITCRC
 5657              		.cfi_endproc
 5658              	.LFE170:
 5660              		.section	.text.SPI_2linesRxISR_16BITCRC,"ax",%progbits
 5661              		.align	1
 5662              		.syntax unified
 5663              		.thumb
 5664              		.thumb_func
 5665              		.fpu fpv4-sp-d16
 5667              	SPI_2linesRxISR_16BITCRC:
 5668              	.LFB171:
3207:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Receive data in 16 Bit mode */
 5669              		.loc 1 3207 0
 5670              		.cfi_startproc
 5671              		@ args = 0, pretend = 0, frame = 8
 5672              		@ frame_needed = 0, uses_anonymous_args = 0
 5673              	.LVL420:
 5674 0000 00B5     		push	{lr}
 5675              	.LCFI75:
 5676              		.cfi_def_cfa_offset 4
 5677              		.cfi_offset 14, -4
 5678 0002 83B0     		sub	sp, sp, #12
 5679              	.LCFI76:
 5680              		.cfi_def_cfa_offset 16
3209:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5681              		.loc 1 3209 0
 5682 0004 0023     		movs	r3, #0
 5683 0006 ADF80630 		strh	r3, [sp, #6]	@ movhi
3212:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5684              		.loc 1 3212 0
 5685 000a 0368     		ldr	r3, [r0]
 5686 000c DA68     		ldr	r2, [r3, #12]
 5687 000e 92B2     		uxth	r2, r2
 5688 0010 ADF80620 		strh	r2, [sp, #6]	@ movhi
3215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5689              		.loc 1 3215 0
 5690 0014 BDF80620 		ldrh	r2, [sp, #6]
3218:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5691              		.loc 1 3218 0
 5692 0018 5A68     		ldr	r2, [r3, #4]
 5693 001a 22F04002 		bic	r2, r2, #64
 5694 001e 5A60     		str	r2, [r3, #4]
3220:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
ARM GAS  /tmp/ccNgnWxc.s 			page 183


 5695              		.loc 1 3220 0
 5696 0020 FFF7FEFF 		bl	SPI_CloseRxTx_ISR
 5697              	.LVL421:
3221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 5698              		.loc 1 3221 0
 5699 0024 03B0     		add	sp, sp, #12
 5700              	.LCFI77:
 5701              		.cfi_def_cfa_offset 4
 5702              		@ sp needed
 5703 0026 5DF804FB 		ldr	pc, [sp], #4
 5704              		.cfi_endproc
 5705              	.LFE171:
 5707              		.section	.text.SPI_DMAError,"ax",%progbits
 5708              		.align	1
 5709              		.syntax unified
 5710              		.thumb
 5711              		.thumb_func
 5712              		.fpu fpv4-sp-d16
 5714              	SPI_DMAError:
 5715              	.LFB163:
2887:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
 5716              		.loc 1 2887 0
 5717              		.cfi_startproc
 5718              		@ args = 0, pretend = 0, frame = 0
 5719              		@ frame_needed = 0, uses_anonymous_args = 0
 5720              	.LVL422:
 5721 0000 08B5     		push	{r3, lr}
 5722              	.LCFI78:
 5723              		.cfi_def_cfa_offset 8
 5724              		.cfi_offset 3, -8
 5725              		.cfi_offset 14, -4
2888:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5726              		.loc 1 2888 0
 5727 0002 806A     		ldr	r0, [r0, #40]
 5728              	.LVL423:
2891:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5729              		.loc 1 2891 0
 5730 0004 0268     		ldr	r2, [r0]
 5731 0006 5368     		ldr	r3, [r2, #4]
 5732 0008 23F00303 		bic	r3, r3, #3
 5733 000c 5360     		str	r3, [r2, #4]
2893:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
 5734              		.loc 1 2893 0
 5735 000e 036E     		ldr	r3, [r0, #96]
 5736 0010 43F01003 		orr	r3, r3, #16
 5737 0014 0366     		str	r3, [r0, #96]
2894:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_SPI_ErrorCallback(hspi);
 5738              		.loc 1 2894 0
 5739 0016 0123     		movs	r3, #1
 5740 0018 80F85D30 		strb	r3, [r0, #93]
2895:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 5741              		.loc 1 2895 0
 5742 001c FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 5743              	.LVL424:
2896:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5744              		.loc 1 2896 0
 5745 0020 08BD     		pop	{r3, pc}
ARM GAS  /tmp/ccNgnWxc.s 			page 184


 5746              		.cfi_endproc
 5747              	.LFE163:
 5749              		.section	.text.SPI_DMATransmitCplt,"ax",%progbits
 5750              		.align	1
 5751              		.syntax unified
 5752              		.thumb
 5753              		.thumb_func
 5754              		.fpu fpv4-sp-d16
 5756              	SPI_DMATransmitCplt:
 5757              	.LFB157:
2625:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
 5758              		.loc 1 2625 0
 5759              		.cfi_startproc
 5760              		@ args = 0, pretend = 0, frame = 8
 5761              		@ frame_needed = 0, uses_anonymous_args = 0
 5762              	.LVL425:
 5763 0000 30B5     		push	{r4, r5, lr}
 5764              	.LCFI79:
 5765              		.cfi_def_cfa_offset 12
 5766              		.cfi_offset 4, -12
 5767              		.cfi_offset 5, -8
 5768              		.cfi_offset 14, -4
 5769 0002 83B0     		sub	sp, sp, #12
 5770              	.LCFI80:
 5771              		.cfi_def_cfa_offset 24
 5772 0004 0546     		mov	r5, r0
2626:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
 5773              		.loc 1 2626 0
 5774 0006 846A     		ldr	r4, [r0, #40]
 5775              	.LVL426:
2630:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5776              		.loc 1 2630 0
 5777 0008 FFF7FEFF 		bl	HAL_GetTick
 5778              	.LVL427:
2633:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5779              		.loc 1 2633 0
 5780 000c 2B68     		ldr	r3, [r5]
 5781 000e 1B68     		ldr	r3, [r3]
 5782 0010 13F0200F 		tst	r3, #32
 5783 0014 23D1     		bne	.L532
2636:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5784              		.loc 1 2636 0
 5785 0016 2268     		ldr	r2, [r4]
 5786 0018 5368     		ldr	r3, [r2, #4]
 5787 001a 23F02003 		bic	r3, r3, #32
 5788 001e 5360     		str	r3, [r2, #4]
2639:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5789              		.loc 1 2639 0
 5790 0020 2268     		ldr	r2, [r4]
 5791 0022 5368     		ldr	r3, [r2, #4]
 5792 0024 23F00203 		bic	r3, r3, #2
 5793 0028 5360     		str	r3, [r2, #4]
2642:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5794              		.loc 1 2642 0
 5795 002a 0246     		mov	r2, r0
 5796 002c 6421     		movs	r1, #100
 5797 002e 2046     		mov	r0, r4
ARM GAS  /tmp/ccNgnWxc.s 			page 185


 5798              	.LVL428:
 5799 0030 FFF7FEFF 		bl	SPI_EndRxTxTransaction
 5800              	.LVL429:
 5801 0034 18B1     		cbz	r0, .L533
2644:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5802              		.loc 1 2644 0
 5803 0036 236E     		ldr	r3, [r4, #96]
 5804 0038 43F02003 		orr	r3, r3, #32
 5805 003c 2366     		str	r3, [r4, #96]
 5806              	.L533:
2648:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5807              		.loc 1 2648 0
 5808 003e A368     		ldr	r3, [r4, #8]
 5809 0040 33B9     		cbnz	r3, .L534
 5810              	.LBB6:
2650:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5811              		.loc 1 2650 0
 5812 0042 0193     		str	r3, [sp, #4]
 5813 0044 2368     		ldr	r3, [r4]
 5814 0046 DA68     		ldr	r2, [r3, #12]
 5815 0048 0192     		str	r2, [sp, #4]
 5816 004a 9B68     		ldr	r3, [r3, #8]
 5817 004c 0193     		str	r3, [sp, #4]
 5818 004e 019B     		ldr	r3, [sp, #4]
 5819              	.L534:
 5820              	.LBE6:
2653:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
 5821              		.loc 1 2653 0
 5822 0050 0023     		movs	r3, #0
 5823 0052 E387     		strh	r3, [r4, #62]	@ movhi
2654:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5824              		.loc 1 2654 0
 5825 0054 0123     		movs	r3, #1
 5826 0056 84F85D30 		strb	r3, [r4, #93]
2656:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5827              		.loc 1 2656 0
 5828 005a 236E     		ldr	r3, [r4, #96]
 5829 005c 23B9     		cbnz	r3, .L537
 5830              	.L532:
2662:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 5831              		.loc 1 2662 0
 5832 005e 2046     		mov	r0, r4
 5833 0060 FFF7FEFF 		bl	HAL_SPI_TxCpltCallback
 5834              	.LVL430:
 5835              	.L531:
2663:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5836              		.loc 1 2663 0
 5837 0064 03B0     		add	sp, sp, #12
 5838              	.LCFI81:
 5839              		.cfi_remember_state
 5840              		.cfi_def_cfa_offset 12
 5841              		@ sp needed
 5842 0066 30BD     		pop	{r4, r5, pc}
 5843              	.LVL431:
 5844              	.L537:
 5845              	.LCFI82:
 5846              		.cfi_restore_state
ARM GAS  /tmp/ccNgnWxc.s 			page 186


2658:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
 5847              		.loc 1 2658 0
 5848 0068 2046     		mov	r0, r4
 5849 006a FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 5850              	.LVL432:
2659:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5851              		.loc 1 2659 0
 5852 006e F9E7     		b	.L531
 5853              		.cfi_endproc
 5854              	.LFE157:
 5856              		.section	.text.SPI_DMAReceiveCplt,"ax",%progbits
 5857              		.align	1
 5858              		.syntax unified
 5859              		.thumb
 5860              		.thumb_func
 5861              		.fpu fpv4-sp-d16
 5863              	SPI_DMAReceiveCplt:
 5864              	.LFB158:
2672:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
 5865              		.loc 1 2672 0
 5866              		.cfi_startproc
 5867              		@ args = 0, pretend = 0, frame = 8
 5868              		@ frame_needed = 0, uses_anonymous_args = 0
 5869              	.LVL433:
 5870 0000 70B5     		push	{r4, r5, r6, lr}
 5871              	.LCFI83:
 5872              		.cfi_def_cfa_offset 16
 5873              		.cfi_offset 4, -16
 5874              		.cfi_offset 5, -12
 5875              		.cfi_offset 6, -8
 5876              		.cfi_offset 14, -4
 5877 0002 84B0     		sub	sp, sp, #16
 5878              	.LCFI84:
 5879              		.cfi_def_cfa_offset 32
 5880 0004 0546     		mov	r5, r0
2673:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
 5881              		.loc 1 2673 0
 5882 0006 846A     		ldr	r4, [r0, #40]
 5883              	.LVL434:
2676:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 5884              		.loc 1 2676 0
 5885 0008 0023     		movs	r3, #0
 5886 000a ADF80E30 		strh	r3, [sp, #14]	@ movhi
2680:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5887              		.loc 1 2680 0
 5888 000e FFF7FEFF 		bl	HAL_GetTick
 5889              	.LVL435:
2683:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 5890              		.loc 1 2683 0
 5891 0012 2B68     		ldr	r3, [r5]
 5892 0014 1B68     		ldr	r3, [r3]
 5893 0016 13F0200F 		tst	r3, #32
 5894 001a 2BD1     		bne	.L539
 5895 001c 0646     		mov	r6, r0
2686:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5896              		.loc 1 2686 0
 5897 001e 2268     		ldr	r2, [r4]
ARM GAS  /tmp/ccNgnWxc.s 			page 187


 5898 0020 5368     		ldr	r3, [r2, #4]
 5899 0022 23F02003 		bic	r3, r3, #32
 5900 0026 5360     		str	r3, [r2, #4]
2690:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5901              		.loc 1 2690 0
 5902 0028 A36A     		ldr	r3, [r4, #40]
 5903 002a B3F5005F 		cmp	r3, #8192
 5904 002e 26D0     		beq	.L548
 5905              	.LVL436:
 5906              	.L540:
2727:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5907              		.loc 1 2727 0
 5908 0030 2268     		ldr	r2, [r4]
 5909 0032 5368     		ldr	r3, [r2, #4]
 5910 0034 23F00303 		bic	r3, r3, #3
 5911 0038 5360     		str	r3, [r2, #4]
2730:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5912              		.loc 1 2730 0
 5913 003a 3246     		mov	r2, r6
 5914 003c 6421     		movs	r1, #100
 5915 003e 2046     		mov	r0, r4
 5916 0040 FFF7FEFF 		bl	SPI_EndRxTransaction
 5917              	.LVL437:
 5918 0044 08B1     		cbz	r0, .L544
2732:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5919              		.loc 1 2732 0
 5920 0046 2023     		movs	r3, #32
 5921 0048 2366     		str	r3, [r4, #96]
 5922              	.L544:
2735:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
 5923              		.loc 1 2735 0
 5924 004a 0023     		movs	r3, #0
 5925 004c A4F84630 		strh	r3, [r4, #70]	@ movhi
2736:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5926              		.loc 1 2736 0
 5927 0050 0123     		movs	r3, #1
 5928 0052 84F85D30 		strb	r3, [r4, #93]
2740:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5929              		.loc 1 2740 0
 5930 0056 2368     		ldr	r3, [r4]
 5931 0058 9A68     		ldr	r2, [r3, #8]
 5932 005a 12F0100F 		tst	r2, #16
 5933 005e 06D0     		beq	.L545
2742:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
 5934              		.loc 1 2742 0
 5935 0060 226E     		ldr	r2, [r4, #96]
 5936 0062 42F00202 		orr	r2, r2, #2
 5937 0066 2266     		str	r2, [r4, #96]
2743:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 5938              		.loc 1 2743 0
 5939 0068 4FF6EF72 		movw	r2, #65519
 5940 006c 9A60     		str	r2, [r3, #8]
 5941              	.L545:
2747:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 5942              		.loc 1 2747 0
 5943 006e 236E     		ldr	r3, [r4, #96]
 5944 0070 002B     		cmp	r3, #0
ARM GAS  /tmp/ccNgnWxc.s 			page 188


 5945 0072 38D1     		bne	.L549
 5946              	.LVL438:
 5947              	.L539:
2753:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 5948              		.loc 1 2753 0
 5949 0074 2046     		mov	r0, r4
 5950 0076 FFF7FEFF 		bl	HAL_SPI_RxCpltCallback
 5951              	.LVL439:
 5952              	.L538:
2754:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5953              		.loc 1 2754 0
 5954 007a 04B0     		add	sp, sp, #16
 5955              	.LCFI85:
 5956              		.cfi_remember_state
 5957              		.cfi_def_cfa_offset 16
 5958              		@ sp needed
 5959 007c 70BD     		pop	{r4, r5, r6, pc}
 5960              	.LVL440:
 5961              	.L548:
 5962              	.LCFI86:
 5963              		.cfi_restore_state
2693:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 5964              		.loc 1 2693 0
 5965 007e 0090     		str	r0, [sp]
 5966 0080 6423     		movs	r3, #100
 5967 0082 0122     		movs	r2, #1
 5968 0084 1146     		mov	r1, r2
 5969 0086 2046     		mov	r0, r4
 5970              	.LVL441:
 5971 0088 FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 5972              	.LVL442:
 5973 008c 18B1     		cbz	r0, .L541
2696:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 5974              		.loc 1 2696 0
 5975 008e 236E     		ldr	r3, [r4, #96]
 5976 0090 43F00203 		orr	r3, r3, #2
 5977 0094 2366     		str	r3, [r4, #96]
 5978              	.L541:
2699:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 5979              		.loc 1 2699 0
 5980 0096 E368     		ldr	r3, [r4, #12]
 5981 0098 B3F5E06F 		cmp	r3, #1792
 5982 009c 07D9     		bls	.L542
2701:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* To avoid GCC warning */
 5983              		.loc 1 2701 0
 5984 009e 2368     		ldr	r3, [r4]
 5985 00a0 DB68     		ldr	r3, [r3, #12]
 5986 00a2 9BB2     		uxth	r3, r3
 5987 00a4 ADF80E30 		strh	r3, [sp, #14]	@ movhi
2703:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 5988              		.loc 1 2703 0
 5989 00a8 BDF80E30 		ldrh	r3, [sp, #14]
 5990 00ac C0E7     		b	.L540
 5991              	.L542:
2707:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* To avoid GCC warning */
 5992              		.loc 1 2707 0
 5993 00ae 2368     		ldr	r3, [r4]
ARM GAS  /tmp/ccNgnWxc.s 			page 189


 5994 00b0 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 5995 00b2 ADF80E30 		strh	r3, [sp, #14]	@ movhi
2709:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 5996              		.loc 1 2709 0
 5997 00b6 BDF80E30 		ldrh	r3, [sp, #14]
2711:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 5998              		.loc 1 2711 0
 5999 00ba 236B     		ldr	r3, [r4, #48]
 6000 00bc 022B     		cmp	r3, #2
 6001 00be B7D1     		bne	.L540
2713:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           {
 6002              		.loc 1 2713 0
 6003 00c0 0096     		str	r6, [sp]
 6004 00c2 6423     		movs	r3, #100
 6005 00c4 0122     		movs	r2, #1
 6006 00c6 1146     		mov	r1, r2
 6007 00c8 2046     		mov	r0, r4
 6008 00ca FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 6009              	.LVL443:
 6010 00ce 18B1     		cbz	r0, .L543
2716:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           }
 6011              		.loc 1 2716 0
 6012 00d0 236E     		ldr	r3, [r4, #96]
 6013 00d2 43F00203 		orr	r3, r3, #2
 6014 00d6 2366     		str	r3, [r4, #96]
 6015              	.L543:
2718:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           /* To avoid GCC warning */
 6016              		.loc 1 2718 0
 6017 00d8 2368     		ldr	r3, [r4]
 6018 00da 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 6019 00dc ADF80E30 		strh	r3, [sp, #14]	@ movhi
2720:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 6020              		.loc 1 2720 0
 6021 00e0 BDF80E30 		ldrh	r3, [sp, #14]
 6022 00e4 A4E7     		b	.L540
 6023              	.L549:
2749:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
 6024              		.loc 1 2749 0
 6025 00e6 2046     		mov	r0, r4
 6026 00e8 FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 6027              	.LVL444:
2750:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 6028              		.loc 1 2750 0
 6029 00ec C5E7     		b	.L538
 6030              		.cfi_endproc
 6031              	.LFE158:
 6033              		.section	.text.SPI_DMATransmitReceiveCplt,"ax",%progbits
 6034              		.align	1
 6035              		.syntax unified
 6036              		.thumb
 6037              		.thumb_func
 6038              		.fpu fpv4-sp-d16
 6040              	SPI_DMATransmitReceiveCplt:
 6041              	.LFB159:
2763:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
 6042              		.loc 1 2763 0
 6043              		.cfi_startproc
ARM GAS  /tmp/ccNgnWxc.s 			page 190


 6044              		@ args = 0, pretend = 0, frame = 8
 6045              		@ frame_needed = 0, uses_anonymous_args = 0
 6046              	.LVL445:
 6047 0000 70B5     		push	{r4, r5, r6, lr}
 6048              	.LCFI87:
 6049              		.cfi_def_cfa_offset 16
 6050              		.cfi_offset 4, -16
 6051              		.cfi_offset 5, -12
 6052              		.cfi_offset 6, -8
 6053              		.cfi_offset 14, -4
 6054 0002 84B0     		sub	sp, sp, #16
 6055              	.LCFI88:
 6056              		.cfi_def_cfa_offset 32
 6057 0004 0546     		mov	r5, r0
2764:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t tickstart = 0U;
 6058              		.loc 1 2764 0
 6059 0006 846A     		ldr	r4, [r0, #40]
 6060              	.LVL446:
2767:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 6061              		.loc 1 2767 0
 6062 0008 0023     		movs	r3, #0
 6063 000a ADF80E30 		strh	r3, [sp, #14]	@ movhi
2770:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6064              		.loc 1 2770 0
 6065 000e FFF7FEFF 		bl	HAL_GetTick
 6066              	.LVL447:
2773:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6067              		.loc 1 2773 0
 6068 0012 2B68     		ldr	r3, [r5]
 6069 0014 1B68     		ldr	r3, [r3]
 6070 0016 13F0200F 		tst	r3, #32
 6071 001a 2ED1     		bne	.L551
 6072 001c 0646     		mov	r6, r0
2776:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6073              		.loc 1 2776 0
 6074 001e 2268     		ldr	r2, [r4]
 6075 0020 5368     		ldr	r3, [r2, #4]
 6076 0022 23F02003 		bic	r3, r3, #32
 6077 0026 5360     		str	r3, [r2, #4]
2780:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6078              		.loc 1 2780 0
 6079 0028 A36A     		ldr	r3, [r4, #40]
 6080 002a B3F5005F 		cmp	r3, #8192
 6081 002e 29D0     		beq	.L560
 6082              	.LVL448:
 6083              	.L552:
2811:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6084              		.loc 1 2811 0
 6085 0030 3246     		mov	r2, r6
 6086 0032 6421     		movs	r1, #100
 6087 0034 2046     		mov	r0, r4
 6088 0036 FFF7FEFF 		bl	SPI_EndRxTxTransaction
 6089              	.LVL449:
 6090 003a 18B1     		cbz	r0, .L556
2813:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 6091              		.loc 1 2813 0
 6092 003c 236E     		ldr	r3, [r4, #96]
ARM GAS  /tmp/ccNgnWxc.s 			page 191


 6093 003e 43F02003 		orr	r3, r3, #32
 6094 0042 2366     		str	r3, [r4, #96]
 6095              	.L556:
2817:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6096              		.loc 1 2817 0
 6097 0044 2268     		ldr	r2, [r4]
 6098 0046 5368     		ldr	r3, [r2, #4]
 6099 0048 23F00303 		bic	r3, r3, #3
 6100 004c 5360     		str	r3, [r2, #4]
2819:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->RxXferCount = 0U;
 6101              		.loc 1 2819 0
 6102 004e 0023     		movs	r3, #0
 6103 0050 E387     		strh	r3, [r4, #62]	@ movhi
2820:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
 6104              		.loc 1 2820 0
 6105 0052 A4F84630 		strh	r3, [r4, #70]	@ movhi
2821:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6106              		.loc 1 2821 0
 6107 0056 0123     		movs	r3, #1
 6108 0058 84F85D30 		strb	r3, [r4, #93]
2825:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6109              		.loc 1 2825 0
 6110 005c 2368     		ldr	r3, [r4]
 6111 005e 9A68     		ldr	r2, [r3, #8]
 6112 0060 12F0100F 		tst	r2, #16
 6113 0064 06D0     		beq	.L557
2827:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
 6114              		.loc 1 2827 0
 6115 0066 226E     		ldr	r2, [r4, #96]
 6116 0068 42F00202 		orr	r2, r2, #2
 6117 006c 2266     		str	r2, [r4, #96]
2828:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 6118              		.loc 1 2828 0
 6119 006e 4FF6EF72 		movw	r2, #65519
 6120 0072 9A60     		str	r2, [r3, #8]
 6121              	.L557:
2832:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6122              		.loc 1 2832 0
 6123 0074 236E     		ldr	r3, [r4, #96]
 6124 0076 002B     		cmp	r3, #0
 6125 0078 36D1     		bne	.L561
 6126              	.LVL450:
 6127              	.L551:
2838:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 6128              		.loc 1 2838 0
 6129 007a 2046     		mov	r0, r4
 6130 007c FFF7FEFF 		bl	HAL_SPI_TxRxCpltCallback
 6131              	.LVL451:
 6132              	.L550:
2839:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6133              		.loc 1 2839 0
 6134 0080 04B0     		add	sp, sp, #16
 6135              	.LCFI89:
 6136              		.cfi_remember_state
 6137              		.cfi_def_cfa_offset 16
 6138              		@ sp needed
 6139 0082 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  /tmp/ccNgnWxc.s 			page 192


 6140              	.LVL452:
 6141              	.L560:
 6142              	.LCFI90:
 6143              		.cfi_restore_state
2782:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 6144              		.loc 1 2782 0
 6145 0084 E368     		ldr	r3, [r4, #12]
 6146 0086 B3F5E06F 		cmp	r3, #1792
 6147 008a 02D1     		bne	.L553
2782:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 6148              		.loc 1 2782 0 is_stmt 0 discriminator 1
 6149 008c 236B     		ldr	r3, [r4, #48]
 6150 008e 012B     		cmp	r3, #1
 6151 0090 15D0     		beq	.L562
 6152              	.L553:
2797:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 6153              		.loc 1 2797 0 is_stmt 1
 6154 0092 0096     		str	r6, [sp]
 6155 0094 6423     		movs	r3, #100
 6156 0096 4FF48062 		mov	r2, #1024
 6157 009a 4FF4C061 		mov	r1, #1536
 6158 009e 2046     		mov	r0, r4
 6159              	.LVL453:
 6160 00a0 FFF7FEFF 		bl	SPI_WaitFifoStateUntilTimeout
 6161              	.LVL454:
 6162 00a4 18B1     		cbz	r0, .L555
2800:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 6163              		.loc 1 2800 0
 6164 00a6 236E     		ldr	r3, [r4, #96]
 6165 00a8 43F00203 		orr	r3, r3, #2
 6166 00ac 2366     		str	r3, [r4, #96]
 6167              	.L555:
2803:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* To avoid GCC warning */
 6168              		.loc 1 2803 0
 6169 00ae 2368     		ldr	r3, [r4]
 6170 00b0 DB68     		ldr	r3, [r3, #12]
 6171 00b2 1BB2     		sxth	r3, r3
 6172 00b4 ADF80E30 		strh	r3, [sp, #14]	@ movhi
2805:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 6173              		.loc 1 2805 0
 6174 00b8 BDF80E30 		ldrh	r3, [sp, #14]
 6175 00bc B8E7     		b	.L552
 6176              	.LVL455:
 6177              	.L562:
2784:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****                                           tickstart) != HAL_OK)
 6178              		.loc 1 2784 0
 6179 00be 0090     		str	r0, [sp]
 6180 00c0 6423     		movs	r3, #100
 6181 00c2 4FF40072 		mov	r2, #512
 6182 00c6 4FF4C061 		mov	r1, #1536
 6183 00ca 2046     		mov	r0, r4
 6184              	.LVL456:
 6185 00cc FFF7FEFF 		bl	SPI_WaitFifoStateUntilTimeout
 6186              	.LVL457:
 6187 00d0 18B1     		cbz	r0, .L554
2788:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 6188              		.loc 1 2788 0
ARM GAS  /tmp/ccNgnWxc.s 			page 193


 6189 00d2 236E     		ldr	r3, [r4, #96]
 6190 00d4 43F00203 		orr	r3, r3, #2
 6191 00d8 2366     		str	r3, [r4, #96]
 6192              	.L554:
2791:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         /* To avoid GCC warning */
 6193              		.loc 1 2791 0
 6194 00da 2368     		ldr	r3, [r4]
 6195 00dc 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 6196 00de ADF80E30 		strh	r3, [sp, #14]	@ movhi
2793:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 6197              		.loc 1 2793 0
 6198 00e2 BDF80E30 		ldrh	r3, [sp, #14]
 6199 00e6 A3E7     		b	.L552
 6200              	.L561:
2834:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       return;
 6201              		.loc 1 2834 0
 6202 00e8 2046     		mov	r0, r4
 6203 00ea FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 6204              	.LVL458:
2835:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 6205              		.loc 1 2835 0
 6206 00ee C7E7     		b	.L550
 6207              		.cfi_endproc
 6208              	.LFE159:
 6210              		.section	.text.HAL_SPI_IRQHandler,"ax",%progbits
 6211              		.align	1
 6212              		.global	HAL_SPI_IRQHandler
 6213              		.syntax unified
 6214              		.thumb
 6215              		.thumb_func
 6216              		.fpu fpv4-sp-d16
 6218              	HAL_SPI_IRQHandler:
 6219              	.LFB146:
2343:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t itsource = hspi->Instance->CR2;
 6220              		.loc 1 2343 0
 6221              		.cfi_startproc
 6222              		@ args = 0, pretend = 0, frame = 16
 6223              		@ frame_needed = 0, uses_anonymous_args = 0
 6224              	.LVL459:
 6225 0000 10B5     		push	{r4, lr}
 6226              	.LCFI91:
 6227              		.cfi_def_cfa_offset 8
 6228              		.cfi_offset 4, -8
 6229              		.cfi_offset 14, -4
 6230 0002 84B0     		sub	sp, sp, #16
 6231              	.LCFI92:
 6232              		.cfi_def_cfa_offset 24
 6233 0004 0446     		mov	r4, r0
2344:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   uint32_t itflag   = hspi->Instance->SR;
 6234              		.loc 1 2344 0
 6235 0006 0268     		ldr	r2, [r0]
 6236 0008 5068     		ldr	r0, [r2, #4]
 6237              	.LVL460:
2345:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6238              		.loc 1 2345 0
 6239 000a 9368     		ldr	r3, [r2, #8]
 6240              	.LVL461:
ARM GAS  /tmp/ccNgnWxc.s 			page 194


2348:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       ((itflag & SPI_FLAG_RXNE) != RESET) && ((itsource & SPI_IT_RXNE) != RESET))
 6241              		.loc 1 2348 0
 6242 000c 03F04101 		and	r1, r3, #65
 6243 0010 0129     		cmp	r1, #1
 6244 0012 0AD0     		beq	.L574
 6245              	.L564:
2356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6246              		.loc 1 2356 0
 6247 0014 13F0020F 		tst	r3, #2
 6248 0018 0ED0     		beq	.L566
2356:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6249              		.loc 1 2356 0 is_stmt 0 discriminator 1
 6250 001a 10F0800F 		tst	r0, #128
 6251 001e 0BD0     		beq	.L566
2358:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return;
 6252              		.loc 1 2358 0 is_stmt 1
 6253 0020 236D     		ldr	r3, [r4, #80]
 6254              	.LVL462:
 6255 0022 2046     		mov	r0, r4
 6256              	.LVL463:
 6257 0024 9847     		blx	r3
 6258              	.LVL464:
 6259              	.L563:
2430:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6260              		.loc 1 2430 0
 6261 0026 04B0     		add	sp, sp, #16
 6262              	.LCFI93:
 6263              		.cfi_remember_state
 6264              		.cfi_def_cfa_offset 8
 6265              		@ sp needed
 6266 0028 10BD     		pop	{r4, pc}
 6267              	.LVL465:
 6268              	.L574:
 6269              	.LCFI94:
 6270              		.cfi_restore_state
2349:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6271              		.loc 1 2349 0
 6272 002a 10F0400F 		tst	r0, #64
 6273 002e F1D0     		beq	.L564
2351:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     return;
 6274              		.loc 1 2351 0
 6275 0030 E36C     		ldr	r3, [r4, #76]
 6276              	.LVL466:
 6277 0032 2046     		mov	r0, r4
 6278              	.LVL467:
 6279 0034 9847     		blx	r3
 6280              	.LVL468:
2352:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 6281              		.loc 1 2352 0
 6282 0036 F6E7     		b	.L563
 6283              	.LVL469:
 6284              	.L566:
2363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6285              		.loc 1 2363 0
 6286 0038 13F4B07F 		tst	r3, #352
 6287 003c F3D0     		beq	.L563
2363:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
ARM GAS  /tmp/ccNgnWxc.s 			page 195


 6288              		.loc 1 2363 0 is_stmt 0 discriminator 1
 6289 003e 10F0200F 		tst	r0, #32
 6290 0042 F0D0     		beq	.L563
2366:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6291              		.loc 1 2366 0 is_stmt 1
 6292 0044 13F0400F 		tst	r3, #64
 6293 0048 0FD0     		beq	.L567
2368:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 6294              		.loc 1 2368 0
 6295 004a 94F85D10 		ldrb	r1, [r4, #93]	@ zero_extendqisi2
 6296 004e C9B2     		uxtb	r1, r1
 6297 0050 0329     		cmp	r1, #3
 6298 0052 4AD0     		beq	.L568
2370:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         __HAL_SPI_CLEAR_OVRFLAG(hspi);
 6299              		.loc 1 2370 0
 6300 0054 216E     		ldr	r1, [r4, #96]
 6301 0056 41F00401 		orr	r1, r1, #4
 6302 005a 2166     		str	r1, [r4, #96]
 6303              	.LBB7:
2371:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 6304              		.loc 1 2371 0
 6305 005c 0021     		movs	r1, #0
 6306 005e 0091     		str	r1, [sp]
 6307 0060 D168     		ldr	r1, [r2, #12]
 6308 0062 0091     		str	r1, [sp]
 6309 0064 9168     		ldr	r1, [r2, #8]
 6310 0066 0091     		str	r1, [sp]
 6311 0068 0099     		ldr	r1, [sp]
 6312              	.L567:
 6313              	.LBE7:
2381:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6314              		.loc 1 2381 0
 6315 006a 13F0200F 		tst	r3, #32
 6316 006e 0CD0     		beq	.L569
2383:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_CLEAR_MODFFLAG(hspi);
 6317              		.loc 1 2383 0
 6318 0070 216E     		ldr	r1, [r4, #96]
 6319 0072 41F00101 		orr	r1, r1, #1
 6320 0076 2166     		str	r1, [r4, #96]
 6321              	.LBB8:
2384:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 6322              		.loc 1 2384 0
 6323 0078 0021     		movs	r1, #0
 6324 007a 0291     		str	r1, [sp, #8]
 6325 007c 9168     		ldr	r1, [r2, #8]
 6326 007e 0291     		str	r1, [sp, #8]
 6327 0080 1168     		ldr	r1, [r2]
 6328 0082 21F04001 		bic	r1, r1, #64
 6329 0086 1160     		str	r1, [r2]
 6330 0088 029A     		ldr	r2, [sp, #8]
 6331              	.L569:
 6332              	.LBE8:
2388:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6333              		.loc 1 2388 0
 6334 008a 13F4807F 		tst	r3, #256
 6335 008e 09D0     		beq	.L570
2390:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       __HAL_SPI_CLEAR_FREFLAG(hspi);
ARM GAS  /tmp/ccNgnWxc.s 			page 196


 6336              		.loc 1 2390 0
 6337 0090 236E     		ldr	r3, [r4, #96]
 6338              	.LVL470:
 6339 0092 43F00803 		orr	r3, r3, #8
 6340 0096 2366     		str	r3, [r4, #96]
 6341              	.LBB9:
2391:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 6342              		.loc 1 2391 0
 6343 0098 0023     		movs	r3, #0
 6344 009a 0393     		str	r3, [sp, #12]
 6345 009c 2368     		ldr	r3, [r4]
 6346 009e 9B68     		ldr	r3, [r3, #8]
 6347 00a0 0393     		str	r3, [sp, #12]
 6348 00a2 039B     		ldr	r3, [sp, #12]
 6349              	.L570:
 6350              	.LBE9:
2394:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6351              		.loc 1 2394 0
 6352 00a4 236E     		ldr	r3, [r4, #96]
 6353 00a6 002B     		cmp	r3, #0
 6354 00a8 BDD0     		beq	.L563
2397:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6355              		.loc 1 2397 0
 6356 00aa 2268     		ldr	r2, [r4]
 6357 00ac 5368     		ldr	r3, [r2, #4]
 6358 00ae 23F0E003 		bic	r3, r3, #224
 6359 00b2 5360     		str	r3, [r2, #4]
2399:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       /* Disable the SPI DMA requests if enabled */
 6360              		.loc 1 2399 0
 6361 00b4 0123     		movs	r3, #1
 6362 00b6 84F85D30 		strb	r3, [r4, #93]
2401:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 6363              		.loc 1 2401 0
 6364 00ba 10F0030F 		tst	r0, #3
 6365 00be 1CD0     		beq	.L571
2403:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6366              		.loc 1 2403 0
 6367 00c0 2268     		ldr	r2, [r4]
 6368 00c2 5368     		ldr	r3, [r2, #4]
 6369 00c4 23F00303 		bic	r3, r3, #3
 6370 00c8 5360     		str	r3, [r2, #4]
2406:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
 6371              		.loc 1 2406 0
 6372 00ca A36D     		ldr	r3, [r4, #88]
 6373 00cc 23B1     		cbz	r3, .L572
2410:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           HAL_DMA_Abort_IT(hspi->hdmarx);
 6374              		.loc 1 2410 0
 6375 00ce 0D4A     		ldr	r2, .L575
 6376 00d0 9A63     		str	r2, [r3, #56]
2411:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 6377              		.loc 1 2411 0
 6378 00d2 A06D     		ldr	r0, [r4, #88]
 6379              	.LVL471:
 6380 00d4 FFF7FEFF 		bl	HAL_DMA_Abort_IT
 6381              	.LVL472:
 6382              	.L572:
2414:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         {
ARM GAS  /tmp/ccNgnWxc.s 			page 197


 6383              		.loc 1 2414 0
 6384 00d8 636D     		ldr	r3, [r4, #84]
 6385 00da 002B     		cmp	r3, #0
 6386 00dc A3D0     		beq	.L563
2418:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****           HAL_DMA_Abort_IT(hspi->hdmatx);
 6387              		.loc 1 2418 0
 6388 00de 094A     		ldr	r2, .L575
 6389 00e0 9A63     		str	r2, [r3, #56]
2419:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         }
 6390              		.loc 1 2419 0
 6391 00e2 606D     		ldr	r0, [r4, #84]
 6392 00e4 FFF7FEFF 		bl	HAL_DMA_Abort_IT
 6393              	.LVL473:
 6394 00e8 9DE7     		b	.L563
 6395              	.LVL474:
 6396              	.L568:
 6397              	.LBB10:
2375:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         return;
 6398              		.loc 1 2375 0
 6399 00ea 0023     		movs	r3, #0
 6400              	.LVL475:
 6401 00ec 0193     		str	r3, [sp, #4]
 6402 00ee D368     		ldr	r3, [r2, #12]
 6403 00f0 0193     		str	r3, [sp, #4]
 6404 00f2 9368     		ldr	r3, [r2, #8]
 6405 00f4 0193     		str	r3, [sp, #4]
 6406 00f6 019B     		ldr	r3, [sp, #4]
 6407              	.LBE10:
2376:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 6408              		.loc 1 2376 0
 6409 00f8 95E7     		b	.L563
 6410              	.L571:
2425:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 6411              		.loc 1 2425 0
 6412 00fa 2046     		mov	r0, r4
 6413              	.LVL476:
 6414 00fc FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 6415              	.LVL477:
 6416 0100 91E7     		b	.L563
 6417              	.L576:
 6418 0102 00BF     		.align	2
 6419              	.L575:
 6420 0104 00000000 		.word	SPI_DMAAbortOnError
 6421              		.cfi_endproc
 6422              	.LFE146:
 6424              		.section	.text.SPI_DMAAbortOnError,"ax",%progbits
 6425              		.align	1
 6426              		.syntax unified
 6427              		.thumb
 6428              		.thumb_func
 6429              		.fpu fpv4-sp-d16
 6431              	SPI_DMAAbortOnError:
 6432              	.LFB164:
2905:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
 6433              		.loc 1 2905 0
 6434              		.cfi_startproc
 6435              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccNgnWxc.s 			page 198


 6436              		@ frame_needed = 0, uses_anonymous_args = 0
 6437              	.LVL478:
 6438 0000 08B5     		push	{r3, lr}
 6439              	.LCFI95:
 6440              		.cfi_def_cfa_offset 8
 6441              		.cfi_offset 3, -8
 6442              		.cfi_offset 14, -4
2906:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->RxXferCount = 0U;
 6443              		.loc 1 2906 0
 6444 0002 806A     		ldr	r0, [r0, #40]
 6445              	.LVL479:
2907:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 6446              		.loc 1 2907 0
 6447 0004 0023     		movs	r3, #0
 6448 0006 A0F84630 		strh	r3, [r0, #70]	@ movhi
2908:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6449              		.loc 1 2908 0
 6450 000a C387     		strh	r3, [r0, #62]	@ movhi
2910:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 6451              		.loc 1 2910 0
 6452 000c FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 6453              	.LVL480:
2911:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6454              		.loc 1 2911 0
 6455 0010 08BD     		pop	{r3, pc}
 6456              		.cfi_endproc
 6457              	.LFE164:
 6459              		.section	.text.HAL_SPI_AbortCpltCallback,"ax",%progbits
 6460              		.align	1
 6461              		.weak	HAL_SPI_AbortCpltCallback
 6462              		.syntax unified
 6463              		.thumb
 6464              		.thumb_func
 6465              		.fpu fpv4-sp-d16
 6467              	HAL_SPI_AbortCpltCallback:
 6468              	.LFB154:
2553:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 6469              		.loc 1 2553 0
 6470              		.cfi_startproc
 6471              		@ args = 0, pretend = 0, frame = 0
 6472              		@ frame_needed = 0, uses_anonymous_args = 0
 6473              		@ link register save eliminated.
 6474              	.LVL481:
2560:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6475              		.loc 1 2560 0
 6476 0000 7047     		bx	lr
 6477              		.cfi_endproc
 6478              	.LFE154:
 6480              		.section	.text.HAL_SPI_Abort_IT,"ax",%progbits
 6481              		.align	1
 6482              		.global	HAL_SPI_Abort_IT
 6483              		.syntax unified
 6484              		.thumb
 6485              		.thumb_func
 6486              		.fpu fpv4-sp-d16
 6488              	HAL_SPI_Abort_IT:
 6489              	.LFB142:
ARM GAS  /tmp/ccNgnWxc.s 			page 199


2082:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   HAL_StatusTypeDef errorcode;
 6490              		.loc 1 2082 0
 6491              		.cfi_startproc
 6492              		@ args = 0, pretend = 0, frame = 16
 6493              		@ frame_needed = 0, uses_anonymous_args = 0
 6494              	.LVL482:
 6495 0000 70B5     		push	{r4, r5, r6, lr}
 6496              	.LCFI96:
 6497              		.cfi_def_cfa_offset 16
 6498              		.cfi_offset 4, -16
 6499              		.cfi_offset 5, -12
 6500              		.cfi_offset 6, -8
 6501              		.cfi_offset 14, -4
 6502 0002 84B0     		sub	sp, sp, #16
 6503              	.LCFI97:
 6504              		.cfi_def_cfa_offset 32
 6505 0004 0446     		mov	r4, r0
 6506              	.LVL483:
2090:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   count = resetcount;
 6507              		.loc 1 2090 0
 6508 0006 614B     		ldr	r3, .L611
 6509 0008 1B68     		ldr	r3, [r3]
 6510 000a 614A     		ldr	r2, .L611+4
 6511 000c A2FB0323 		umull	r2, r3, r2, r3
 6512 0010 5B0A     		lsrs	r3, r3, #9
 6513 0012 6422     		movs	r2, #100
 6514 0014 02FB03F3 		mul	r3, r2, r3
 6515 0018 0293     		str	r3, [sp, #8]
2091:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6516              		.loc 1 2091 0
 6517 001a 029B     		ldr	r3, [sp, #8]
 6518 001c 0393     		str	r3, [sp, #12]
2094:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6519              		.loc 1 2094 0
 6520 001e 0168     		ldr	r1, [r0]
 6521 0020 4B68     		ldr	r3, [r1, #4]
 6522 0022 13F0800F 		tst	r3, #128
 6523 0026 11D0     		beq	.L581
2096:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Wait HAL_SPI_STATE_ABORT state */
 6524              		.loc 1 2096 0
 6525 0028 5A4B     		ldr	r3, .L611+8
 6526 002a 0365     		str	r3, [r0, #80]
 6527              	.L584:
2100:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 6528              		.loc 1 2100 0
 6529 002c 039B     		ldr	r3, [sp, #12]
 6530 002e 5A1E     		subs	r2, r3, #1
 6531 0030 0392     		str	r2, [sp, #12]
 6532 0032 2BB1     		cbz	r3, .L608
2106:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Reset Timeout Counter */
 6533              		.loc 1 2106 0
 6534 0034 94F85D30 		ldrb	r3, [r4, #93]	@ zero_extendqisi2
 6535 0038 DBB2     		uxtb	r3, r3
 6536 003a 072B     		cmp	r3, #7
 6537 003c F6D1     		bne	.L584
 6538 003e 03E0     		b	.L583
 6539              	.L608:
ARM GAS  /tmp/ccNgnWxc.s 			page 200


2102:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         break;
 6540              		.loc 1 2102 0
 6541 0040 236E     		ldr	r3, [r4, #96]
 6542 0042 43F04003 		orr	r3, r3, #64
 6543 0046 2366     		str	r3, [r4, #96]
 6544              	.L583:
2108:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 6545              		.loc 1 2108 0
 6546 0048 029B     		ldr	r3, [sp, #8]
 6547 004a 0393     		str	r3, [sp, #12]
 6548              	.L581:
2111:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6549              		.loc 1 2111 0
 6550 004c 4B68     		ldr	r3, [r1, #4]
 6551 004e 13F0400F 		tst	r3, #64
 6552 0052 11D0     		beq	.L585
2113:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Wait HAL_SPI_STATE_ABORT state */
 6553              		.loc 1 2113 0
 6554 0054 504B     		ldr	r3, .L611+12
 6555 0056 E364     		str	r3, [r4, #76]
 6556              	.L588:
2117:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 6557              		.loc 1 2117 0
 6558 0058 039B     		ldr	r3, [sp, #12]
 6559 005a 5A1E     		subs	r2, r3, #1
 6560 005c 0392     		str	r2, [sp, #12]
 6561 005e 2BB1     		cbz	r3, .L609
2123:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     /* Reset Timeout Counter */
 6562              		.loc 1 2123 0
 6563 0060 94F85D30 		ldrb	r3, [r4, #93]	@ zero_extendqisi2
 6564 0064 DBB2     		uxtb	r3, r3
 6565 0066 072B     		cmp	r3, #7
 6566 0068 F6D1     		bne	.L588
 6567 006a 03E0     		b	.L587
 6568              	.L609:
2119:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         break;
 6569              		.loc 1 2119 0
 6570 006c 236E     		ldr	r3, [r4, #96]
 6571 006e 43F04003 		orr	r3, r3, #64
 6572 0072 2366     		str	r3, [r4, #96]
 6573              	.L587:
2125:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 6574              		.loc 1 2125 0
 6575 0074 029B     		ldr	r3, [sp, #8]
 6576 0076 0393     		str	r3, [sp, #12]
 6577              	.L585:
2129:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6578              		.loc 1 2129 0
 6579 0078 4B68     		ldr	r3, [r1, #4]
 6580 007a 23F02003 		bic	r3, r3, #32
 6581 007e 4B60     		str	r3, [r1, #4]
2134:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6582              		.loc 1 2134 0
 6583 0080 636D     		ldr	r3, [r4, #84]
 6584 0082 33B1     		cbz	r3, .L589
2138:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6585              		.loc 1 2138 0
ARM GAS  /tmp/ccNgnWxc.s 			page 201


 6586 0084 2268     		ldr	r2, [r4]
 6587 0086 5268     		ldr	r2, [r2, #4]
 6588 0088 12F0020F 		tst	r2, #2
 6589 008c 1FD0     		beq	.L590
2140:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 6590              		.loc 1 2140 0
 6591 008e 434A     		ldr	r2, .L611+16
 6592 0090 9A63     		str	r2, [r3, #56]
 6593              	.L589:
2148:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6594              		.loc 1 2148 0
 6595 0092 A36D     		ldr	r3, [r4, #88]
 6596 0094 33B1     		cbz	r3, .L591
2152:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6597              		.loc 1 2152 0
 6598 0096 2268     		ldr	r2, [r4]
 6599 0098 5268     		ldr	r2, [r2, #4]
 6600 009a 12F0010F 		tst	r2, #1
 6601 009e 19D0     		beq	.L592
2154:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 6602              		.loc 1 2154 0
 6603 00a0 3F4A     		ldr	r2, .L611+20
 6604 00a2 9A63     		str	r2, [r3, #56]
 6605              	.L591:
2163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6606              		.loc 1 2163 0
 6607 00a4 2368     		ldr	r3, [r4]
 6608 00a6 5A68     		ldr	r2, [r3, #4]
 6609 00a8 12F0020F 		tst	r2, #2
 6610 00ac 24D0     		beq	.L599
2163:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6611              		.loc 1 2163 0 is_stmt 0 discriminator 1
 6612 00ae 5B68     		ldr	r3, [r3, #4]
 6613 00b0 13F0010F 		tst	r3, #1
 6614 00b4 45D0     		beq	.L600
2166:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6615              		.loc 1 2166 0 is_stmt 1
 6616 00b6 606D     		ldr	r0, [r4, #84]
 6617              	.LVL484:
 6618 00b8 78B1     		cbz	r0, .L601
2169:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 6619              		.loc 1 2169 0
 6620 00ba FFF7FEFF 		bl	HAL_DMA_Abort_IT
 6621              	.LVL485:
 6622 00be C8B1     		cbz	r0, .L602
2171:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
 6623              		.loc 1 2171 0
 6624 00c0 636D     		ldr	r3, [r4, #84]
 6625 00c2 0022     		movs	r2, #0
 6626 00c4 9A63     		str	r2, [r3, #56]
2172:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 6627              		.loc 1 2172 0
 6628 00c6 4023     		movs	r3, #64
 6629 00c8 2366     		str	r3, [r4, #96]
2089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   resetcount = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
 6630              		.loc 1 2089 0
 6631 00ca 0126     		movs	r6, #1
ARM GAS  /tmp/ccNgnWxc.s 			page 202


 6632 00cc 06E0     		b	.L594
 6633              	.LVL486:
 6634              	.L590:
2144:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 6635              		.loc 1 2144 0
 6636 00ce 0022     		movs	r2, #0
 6637 00d0 9A63     		str	r2, [r3, #56]
 6638 00d2 DEE7     		b	.L589
 6639              	.L592:
2158:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 6640              		.loc 1 2158 0
 6641 00d4 0022     		movs	r2, #0
 6642 00d6 9A63     		str	r2, [r3, #56]
 6643 00d8 E4E7     		b	.L591
 6644              	.LVL487:
 6645              	.L601:
2089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   resetcount = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
 6646              		.loc 1 2089 0
 6647 00da 0126     		movs	r6, #1
 6648              	.L594:
 6649              	.LVL488:
2180:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6650              		.loc 1 2180 0
 6651 00dc A06D     		ldr	r0, [r4, #88]
 6652 00de 60B1     		cbz	r0, .L593
2183:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 6653              		.loc 1 2183 0
 6654 00e0 FFF7FEFF 		bl	HAL_DMA_Abort_IT
 6655              	.LVL489:
 6656 00e4 78B3     		cbz	r0, .L603
2185:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
 6657              		.loc 1 2185 0
 6658 00e6 A36D     		ldr	r3, [r4, #88]
 6659 00e8 0022     		movs	r2, #0
 6660 00ea 9A63     		str	r2, [r3, #56]
2186:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         abortcplt = 1U;
 6661              		.loc 1 2186 0
 6662 00ec 4023     		movs	r3, #64
 6663 00ee 2366     		str	r3, [r4, #96]
 6664              	.LVL490:
2187:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 6665              		.loc 1 2187 0
 6666 00f0 0126     		movs	r6, #1
 6667 00f2 02E0     		b	.L593
 6668              	.L602:
2176:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 6669              		.loc 1 2176 0
 6670 00f4 0026     		movs	r6, #0
 6671 00f6 F1E7     		b	.L594
 6672              	.LVL491:
 6673              	.L599:
2089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   resetcount = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
 6674              		.loc 1 2089 0
 6675 00f8 0126     		movs	r6, #1
 6676              	.LVL492:
 6677              	.L593:
2197:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
ARM GAS  /tmp/ccNgnWxc.s 			page 203


 6678              		.loc 1 2197 0
 6679 00fa 2368     		ldr	r3, [r4]
 6680 00fc 5B68     		ldr	r3, [r3, #4]
 6681 00fe 13F0020F 		tst	r3, #2
 6682 0102 09D0     		beq	.L595
2200:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6683              		.loc 1 2200 0
 6684 0104 606D     		ldr	r0, [r4, #84]
 6685 0106 38B1     		cbz	r0, .L595
2203:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 6686              		.loc 1 2203 0
 6687 0108 FFF7FEFF 		bl	HAL_DMA_Abort_IT
 6688              	.LVL493:
 6689 010c E8B1     		cbz	r0, .L604
2205:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
 6690              		.loc 1 2205 0
 6691 010e 636D     		ldr	r3, [r4, #84]
 6692 0110 0022     		movs	r2, #0
 6693 0112 9A63     		str	r2, [r3, #56]
2206:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 6694              		.loc 1 2206 0
 6695 0114 4023     		movs	r3, #64
 6696 0116 2366     		str	r3, [r4, #96]
 6697              	.LVL494:
 6698              	.L595:
2215:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6699              		.loc 1 2215 0
 6700 0118 2368     		ldr	r3, [r4]
 6701 011a 5B68     		ldr	r3, [r3, #4]
 6702 011c 13F0010F 		tst	r3, #1
 6703 0120 0AD0     		beq	.L596
2218:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6704              		.loc 1 2218 0
 6705 0122 A06D     		ldr	r0, [r4, #88]
 6706 0124 40B1     		cbz	r0, .L596
2221:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       {
 6707              		.loc 1 2221 0
 6708 0126 FFF7FEFF 		bl	HAL_DMA_Abort_IT
 6709              	.LVL495:
 6710 012a 0546     		mov	r5, r0
 6711 012c 30B1     		cbz	r0, .L597
2223:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****         hspi->ErrorCode = HAL_SPI_ERROR_ABORT;
 6712              		.loc 1 2223 0
 6713 012e A36D     		ldr	r3, [r4, #88]
 6714 0130 0022     		movs	r2, #0
 6715 0132 9A63     		str	r2, [r3, #56]
2224:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 6716              		.loc 1 2224 0
 6717 0134 4023     		movs	r3, #64
 6718 0136 2366     		str	r3, [r4, #96]
 6719              	.L596:
2233:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6720              		.loc 1 2233 0
 6721 0138 4EB9     		cbnz	r6, .L610
2088:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   abortcplt = 1U;
 6722              		.loc 1 2088 0
 6723 013a 0025     		movs	r5, #0
ARM GAS  /tmp/ccNgnWxc.s 			page 204


 6724              	.LVL496:
 6725              	.L597:
2263:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6726              		.loc 1 2263 0
 6727 013c 2846     		mov	r0, r5
 6728 013e 04B0     		add	sp, sp, #16
 6729              	.LCFI98:
 6730              		.cfi_remember_state
 6731              		.cfi_def_cfa_offset 16
 6732              		@ sp needed
 6733 0140 70BD     		pop	{r4, r5, r6, pc}
 6734              	.LVL497:
 6735              	.L600:
 6736              	.LCFI99:
 6737              		.cfi_restore_state
2089:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   resetcount = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
 6738              		.loc 1 2089 0
 6739 0142 0126     		movs	r6, #1
 6740 0144 D9E7     		b	.L593
 6741              	.LVL498:
 6742              	.L603:
2191:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 6743              		.loc 1 2191 0
 6744 0146 0026     		movs	r6, #0
 6745              	.LVL499:
 6746 0148 D7E7     		b	.L593
 6747              	.LVL500:
 6748              	.L604:
2210:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****       }
 6749              		.loc 1 2210 0
 6750 014a 0026     		movs	r6, #0
 6751              	.LVL501:
 6752 014c E4E7     		b	.L595
 6753              	.LVL502:
 6754              	.L610:
2236:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     hspi->TxXferCount = 0U;
 6755              		.loc 1 2236 0
 6756 014e 0023     		movs	r3, #0
 6757 0150 A4F84630 		strh	r3, [r4, #70]	@ movhi
2237:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6758              		.loc 1 2237 0
 6759 0154 E387     		strh	r3, [r4, #62]	@ movhi
2240:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6760              		.loc 1 2240 0
 6761 0156 236E     		ldr	r3, [r4, #96]
 6762 0158 402B     		cmp	r3, #64
 6763 015a 14D0     		beq	.L606
2248:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 6764              		.loc 1 2248 0
 6765 015c 0025     		movs	r5, #0
 6766 015e 2566     		str	r5, [r4, #96]
 6767              	.L598:
 6768              	.LVL503:
 6769              	.LBB11:
2252:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     __HAL_SPI_CLEAR_FREFLAG(hspi);
 6770              		.loc 1 2252 0
 6771 0160 0022     		movs	r2, #0
ARM GAS  /tmp/ccNgnWxc.s 			page 205


 6772 0162 0092     		str	r2, [sp]
 6773 0164 2368     		ldr	r3, [r4]
 6774 0166 D968     		ldr	r1, [r3, #12]
 6775 0168 0091     		str	r1, [sp]
 6776 016a 9968     		ldr	r1, [r3, #8]
 6777 016c 0091     		str	r1, [sp]
 6778 016e 0099     		ldr	r1, [sp]
 6779              	.LBE11:
 6780              	.LBB12:
2253:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6781              		.loc 1 2253 0
 6782 0170 0192     		str	r2, [sp, #4]
 6783 0172 9B68     		ldr	r3, [r3, #8]
 6784 0174 0193     		str	r3, [sp, #4]
 6785 0176 019B     		ldr	r3, [sp, #4]
 6786              	.LBE12:
2256:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6787              		.loc 1 2256 0
 6788 0178 0123     		movs	r3, #1
 6789 017a 84F85D30 		strb	r3, [r4, #93]
2259:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 6790              		.loc 1 2259 0
 6791 017e 2046     		mov	r0, r4
 6792 0180 FFF7FEFF 		bl	HAL_SPI_AbortCpltCallback
 6793              	.LVL504:
 6794 0184 DAE7     		b	.L597
 6795              	.LVL505:
 6796              	.L606:
2243:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     }
 6797              		.loc 1 2243 0
 6798 0186 0125     		movs	r5, #1
 6799 0188 EAE7     		b	.L598
 6800              	.L612:
 6801 018a 00BF     		.align	2
 6802              	.L611:
 6803 018c 00000000 		.word	SystemCoreClock
 6804 0190 F1197605 		.word	91625969
 6805 0194 00000000 		.word	SPI_AbortTx_ISR
 6806 0198 00000000 		.word	SPI_AbortRx_ISR
 6807 019c 00000000 		.word	SPI_DMATxAbortCallback
 6808 01a0 00000000 		.word	SPI_DMARxAbortCallback
 6809              		.cfi_endproc
 6810              	.LFE142:
 6812              		.section	.text.SPI_DMARxAbortCallback,"ax",%progbits
 6813              		.align	1
 6814              		.syntax unified
 6815              		.thumb
 6816              		.thumb_func
 6817              		.fpu fpv4-sp-d16
 6819              	SPI_DMARxAbortCallback:
 6820              	.LFB166:
2984:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
 6821              		.loc 1 2984 0
 6822              		.cfi_startproc
 6823              		@ args = 0, pretend = 0, frame = 8
 6824              		@ frame_needed = 0, uses_anonymous_args = 0
 6825              	.LVL506:
ARM GAS  /tmp/ccNgnWxc.s 			page 206


 6826 0000 30B5     		push	{r4, r5, lr}
 6827              	.LCFI100:
 6828              		.cfi_def_cfa_offset 12
 6829              		.cfi_offset 4, -12
 6830              		.cfi_offset 5, -8
 6831              		.cfi_offset 14, -4
 6832 0002 85B0     		sub	sp, sp, #20
 6833              	.LCFI101:
 6834              		.cfi_def_cfa_offset 32
2985:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6835              		.loc 1 2985 0
 6836 0004 846A     		ldr	r4, [r0, #40]
 6837              	.LVL507:
2988:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6838              		.loc 1 2988 0
 6839 0006 2268     		ldr	r2, [r4]
 6840 0008 1368     		ldr	r3, [r2]
 6841 000a 23F04003 		bic	r3, r3, #64
 6842 000e 1360     		str	r3, [r2]
2990:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6843              		.loc 1 2990 0
 6844 0010 A36D     		ldr	r3, [r4, #88]
 6845 0012 0025     		movs	r5, #0
 6846 0014 9D63     		str	r5, [r3, #56]
2993:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6847              		.loc 1 2993 0
 6848 0016 2268     		ldr	r2, [r4]
 6849 0018 5368     		ldr	r3, [r2, #4]
 6850 001a 23F00103 		bic	r3, r3, #1
 6851 001e 5360     		str	r3, [r2, #4]
2996:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6852              		.loc 1 2996 0
 6853 0020 FFF7FEFF 		bl	HAL_GetTick
 6854              	.LVL508:
 6855 0024 0090     		str	r0, [sp]
 6856 0026 6423     		movs	r3, #100
 6857 0028 2A46     		mov	r2, r5
 6858 002a 8021     		movs	r1, #128
 6859 002c 2046     		mov	r0, r4
 6860 002e FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 6861              	.LVL509:
 6862 0032 08B1     		cbz	r0, .L614
2998:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 6863              		.loc 1 2998 0
 6864 0034 4023     		movs	r3, #64
 6865 0036 2366     		str	r3, [r4, #96]
 6866              	.L614:
3002:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6867              		.loc 1 3002 0
 6868 0038 FFF7FEFF 		bl	HAL_GetTick
 6869              	.LVL510:
 6870 003c 0090     		str	r0, [sp]
 6871 003e 6423     		movs	r3, #100
 6872 0040 0022     		movs	r2, #0
 6873 0042 4FF4C061 		mov	r1, #1536
 6874 0046 2046     		mov	r0, r4
 6875 0048 FFF7FEFF 		bl	SPI_WaitFifoStateUntilTimeout
ARM GAS  /tmp/ccNgnWxc.s 			page 207


 6876              	.LVL511:
 6877 004c 08B1     		cbz	r0, .L615
3004:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 6878              		.loc 1 3004 0
 6879 004e 4023     		movs	r3, #64
 6880 0050 2366     		str	r3, [r4, #96]
 6881              	.L615:
3008:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6882              		.loc 1 3008 0
 6883 0052 636D     		ldr	r3, [r4, #84]
 6884 0054 0BB1     		cbz	r3, .L616
3010:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 6885              		.loc 1 3010 0
 6886 0056 9B6B     		ldr	r3, [r3, #56]
 6887 0058 D3B9     		cbnz	r3, .L613
 6888              	.L616:
3017:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 6889              		.loc 1 3017 0
 6890 005a 0023     		movs	r3, #0
 6891 005c A4F84630 		strh	r3, [r4, #70]	@ movhi
3018:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6892              		.loc 1 3018 0
 6893 0060 E387     		strh	r3, [r4, #62]	@ movhi
3021:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6894              		.loc 1 3021 0
 6895 0062 236E     		ldr	r3, [r4, #96]
 6896 0064 402B     		cmp	r3, #64
 6897 0066 01D0     		beq	.L618
3024:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 6898              		.loc 1 3024 0
 6899 0068 0023     		movs	r3, #0
 6900 006a 2366     		str	r3, [r4, #96]
 6901              	.L618:
 6902              	.LBB13:
3028:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_CLEAR_FREFLAG(hspi);
 6903              		.loc 1 3028 0
 6904 006c 0022     		movs	r2, #0
 6905 006e 0292     		str	r2, [sp, #8]
 6906 0070 2368     		ldr	r3, [r4]
 6907 0072 D968     		ldr	r1, [r3, #12]
 6908 0074 0291     		str	r1, [sp, #8]
 6909 0076 9968     		ldr	r1, [r3, #8]
 6910 0078 0291     		str	r1, [sp, #8]
 6911 007a 0299     		ldr	r1, [sp, #8]
 6912              	.LBE13:
 6913              	.LBB14:
3029:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6914              		.loc 1 3029 0
 6915 007c 0392     		str	r2, [sp, #12]
 6916 007e 9B68     		ldr	r3, [r3, #8]
 6917 0080 0393     		str	r3, [sp, #12]
 6918 0082 039B     		ldr	r3, [sp, #12]
 6919              	.LBE14:
3032:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6920              		.loc 1 3032 0
 6921 0084 0123     		movs	r3, #1
 6922 0086 84F85D30 		strb	r3, [r4, #93]
ARM GAS  /tmp/ccNgnWxc.s 			page 208


3035:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 6923              		.loc 1 3035 0
 6924 008a 2046     		mov	r0, r4
 6925 008c FFF7FEFF 		bl	HAL_SPI_AbortCpltCallback
 6926              	.LVL512:
 6927              	.L613:
3036:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6928              		.loc 1 3036 0
 6929 0090 05B0     		add	sp, sp, #20
 6930              	.LCFI102:
 6931              		.cfi_def_cfa_offset 12
 6932              		@ sp needed
 6933 0092 30BD     		pop	{r4, r5, pc}
 6934              		.cfi_endproc
 6935              	.LFE166:
 6937              		.section	.text.SPI_DMATxAbortCallback,"ax",%progbits
 6938              		.align	1
 6939              		.syntax unified
 6940              		.thumb
 6941              		.thumb_func
 6942              		.fpu fpv4-sp-d16
 6944              	SPI_DMATxAbortCallback:
 6945              	.LFB165:
2922:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   SPI_HandleTypeDef *hspi = (SPI_HandleTypeDef *)((DMA_HandleTypeDef *)hdma)->Parent;
 6946              		.loc 1 2922 0
 6947              		.cfi_startproc
 6948              		@ args = 0, pretend = 0, frame = 8
 6949              		@ frame_needed = 0, uses_anonymous_args = 0
 6950              	.LVL513:
 6951 0000 10B5     		push	{r4, lr}
 6952              	.LCFI103:
 6953              		.cfi_def_cfa_offset 8
 6954              		.cfi_offset 4, -8
 6955              		.cfi_offset 14, -4
 6956 0002 84B0     		sub	sp, sp, #16
 6957              	.LCFI104:
 6958              		.cfi_def_cfa_offset 24
2923:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6959              		.loc 1 2923 0
 6960 0004 846A     		ldr	r4, [r0, #40]
 6961              	.LVL514:
2925:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6962              		.loc 1 2925 0
 6963 0006 636D     		ldr	r3, [r4, #84]
 6964 0008 0022     		movs	r2, #0
 6965 000a 9A63     		str	r2, [r3, #56]
2928:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6966              		.loc 1 2928 0
 6967 000c 2268     		ldr	r2, [r4]
 6968 000e 5368     		ldr	r3, [r2, #4]
 6969 0010 23F00203 		bic	r3, r3, #2
 6970 0014 5360     		str	r3, [r2, #4]
2930:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6971              		.loc 1 2930 0
 6972 0016 FFF7FEFF 		bl	HAL_GetTick
 6973              	.LVL515:
 6974 001a 0246     		mov	r2, r0
ARM GAS  /tmp/ccNgnWxc.s 			page 209


 6975 001c 6421     		movs	r1, #100
 6976 001e 2046     		mov	r0, r4
 6977 0020 FFF7FEFF 		bl	SPI_EndRxTxTransaction
 6978              	.LVL516:
 6979 0024 08B1     		cbz	r0, .L621
2932:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 6980              		.loc 1 2932 0
 6981 0026 4023     		movs	r3, #64
 6982 0028 2366     		str	r3, [r4, #96]
 6983              	.L621:
2936:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 6984              		.loc 1 2936 0
 6985 002a 2268     		ldr	r2, [r4]
 6986 002c 1368     		ldr	r3, [r2]
 6987 002e 23F04003 		bic	r3, r3, #64
 6988 0032 1360     		str	r3, [r2]
2939:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 6989              		.loc 1 2939 0
 6990 0034 FFF7FEFF 		bl	HAL_GetTick
 6991              	.LVL517:
 6992 0038 0090     		str	r0, [sp]
 6993 003a 6423     		movs	r3, #100
 6994 003c 0022     		movs	r2, #0
 6995 003e 4FF4C061 		mov	r1, #1536
 6996 0042 2046     		mov	r0, r4
 6997 0044 FFF7FEFF 		bl	SPI_WaitFifoStateUntilTimeout
 6998              	.LVL518:
 6999 0048 08B1     		cbz	r0, .L622
2941:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 7000              		.loc 1 2941 0
 7001 004a 4023     		movs	r3, #64
 7002 004c 2366     		str	r3, [r4, #96]
 7003              	.L622:
2945:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 7004              		.loc 1 2945 0
 7005 004e A36D     		ldr	r3, [r4, #88]
 7006 0050 0BB1     		cbz	r3, .L623
2947:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****     {
 7007              		.loc 1 2947 0
 7008 0052 9B6B     		ldr	r3, [r3, #56]
 7009 0054 D3B9     		cbnz	r3, .L620
 7010              	.L623:
2954:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 7011              		.loc 1 2954 0
 7012 0056 0023     		movs	r3, #0
 7013 0058 A4F84630 		strh	r3, [r4, #70]	@ movhi
2955:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 7014              		.loc 1 2955 0
 7015 005c E387     		strh	r3, [r4, #62]	@ movhi
2958:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   {
 7016              		.loc 1 2958 0
 7017 005e 236E     		ldr	r3, [r4, #96]
 7018 0060 402B     		cmp	r3, #64
 7019 0062 01D0     		beq	.L625
2961:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   }
 7020              		.loc 1 2961 0
 7021 0064 0023     		movs	r3, #0
ARM GAS  /tmp/ccNgnWxc.s 			page 210


 7022 0066 2366     		str	r3, [r4, #96]
 7023              	.L625:
 7024              	.LBB15:
2965:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   __HAL_SPI_CLEAR_FREFLAG(hspi);
 7025              		.loc 1 2965 0
 7026 0068 0022     		movs	r2, #0
 7027 006a 0292     		str	r2, [sp, #8]
 7028 006c 2368     		ldr	r3, [r4]
 7029 006e D968     		ldr	r1, [r3, #12]
 7030 0070 0291     		str	r1, [sp, #8]
 7031 0072 9968     		ldr	r1, [r3, #8]
 7032 0074 0291     		str	r1, [sp, #8]
 7033 0076 0299     		ldr	r1, [sp, #8]
 7034              	.LBE15:
 7035              	.LBB16:
2966:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 7036              		.loc 1 2966 0
 7037 0078 0392     		str	r2, [sp, #12]
 7038 007a 9B68     		ldr	r3, [r3, #8]
 7039 007c 0393     		str	r3, [sp, #12]
 7040 007e 039B     		ldr	r3, [sp, #12]
 7041              	.LBE16:
2969:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 7042              		.loc 1 2969 0
 7043 0080 0123     		movs	r3, #1
 7044 0082 84F85D30 		strb	r3, [r4, #93]
2972:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 7045              		.loc 1 2972 0
 7046 0086 2046     		mov	r0, r4
 7047 0088 FFF7FEFF 		bl	HAL_SPI_AbortCpltCallback
 7048              	.LVL519:
 7049              	.L620:
2973:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 7050              		.loc 1 2973 0
 7051 008c 04B0     		add	sp, sp, #16
 7052              	.LCFI105:
 7053              		.cfi_def_cfa_offset 8
 7054              		@ sp needed
 7055 008e 10BD     		pop	{r4, pc}
 7056              		.cfi_endproc
 7057              	.LFE165:
 7059              		.section	.text.HAL_SPI_GetState,"ax",%progbits
 7060              		.align	1
 7061              		.global	HAL_SPI_GetState
 7062              		.syntax unified
 7063              		.thumb
 7064              		.thumb_func
 7065              		.fpu fpv4-sp-d16
 7067              	HAL_SPI_GetState:
 7068              	.LFB155:
2588:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Return SPI handle state */
 7069              		.loc 1 2588 0
 7070              		.cfi_startproc
 7071              		@ args = 0, pretend = 0, frame = 0
 7072              		@ frame_needed = 0, uses_anonymous_args = 0
 7073              		@ link register save eliminated.
 7074              	.LVL520:
ARM GAS  /tmp/ccNgnWxc.s 			page 211


2590:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 7075              		.loc 1 2590 0
 7076 0000 90F85D00 		ldrb	r0, [r0, #93]	@ zero_extendqisi2
 7077              	.LVL521:
2591:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 7078              		.loc 1 2591 0
 7079 0004 7047     		bx	lr
 7080              		.cfi_endproc
 7081              	.LFE155:
 7083              		.section	.text.HAL_SPI_GetError,"ax",%progbits
 7084              		.align	1
 7085              		.global	HAL_SPI_GetError
 7086              		.syntax unified
 7087              		.thumb
 7088              		.thumb_func
 7089              		.fpu fpv4-sp-d16
 7091              	HAL_SPI_GetError:
 7092              	.LFB156:
2600:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c ****   /* Return SPI ErrorCode */
 7093              		.loc 1 2600 0
 7094              		.cfi_startproc
 7095              		@ args = 0, pretend = 0, frame = 0
 7096              		@ frame_needed = 0, uses_anonymous_args = 0
 7097              		@ link register save eliminated.
 7098              	.LVL522:
2602:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** }
 7099              		.loc 1 2602 0
 7100 0000 006E     		ldr	r0, [r0, #96]
 7101              	.LVL523:
2603:Drivers/STM32L4xx_HAL_Driver/Src/stm32l4xx_hal_spi.c **** 
 7102              		.loc 1 2603 0
 7103 0002 7047     		bx	lr
 7104              		.cfi_endproc
 7105              	.LFE156:
 7107              		.text
 7108              	.Letext0:
 7109              		.file 2 "/opt/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/machine/_default_types.h"
 7110              		.file 3 "/opt/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/_stdint.h"
 7111              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 7112              		.file 5 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/system_stm32l4xx.h"
 7113              		.file 6 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l475xx.h"
 7114              		.file 7 "/opt/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/lock.h"
 7115              		.file 8 "/opt/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/_types.h"
 7116              		.file 9 "/opt/gcc-arm-none-eabi-7-2018-q2-update/lib/gcc/arm-none-eabi/7.3.1/include/stddef.h"
 7117              		.file 10 "/opt/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/reent.h"
 7118              		.file 11 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l4xx.h"
 7119              		.file 12 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 7120              		.file 13 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 7121              		.file 14 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_spi.h"
 7122              		.file 15 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
ARM GAS  /tmp/ccNgnWxc.s 			page 212


DEFINED SYMBOLS
                            *ABS*:0000000000000000 stm32l4xx_hal_spi.c
     /tmp/ccNgnWxc.s:18     .text.SPI_WaitFlagStateUntilTimeout:0000000000000000 $t
     /tmp/ccNgnWxc.s:24     .text.SPI_WaitFlagStateUntilTimeout:0000000000000000 SPI_WaitFlagStateUntilTimeout
     /tmp/ccNgnWxc.s:137    .text.SPI_WaitFifoStateUntilTimeout:0000000000000000 $t
     /tmp/ccNgnWxc.s:143    .text.SPI_WaitFifoStateUntilTimeout:0000000000000000 SPI_WaitFifoStateUntilTimeout
     /tmp/ccNgnWxc.s:267    .text.SPI_EndRxTxTransaction:0000000000000000 $t
     /tmp/ccNgnWxc.s:273    .text.SPI_EndRxTxTransaction:0000000000000000 SPI_EndRxTxTransaction
     /tmp/ccNgnWxc.s:360    .text.SPI_EndRxTransaction:0000000000000000 $t
     /tmp/ccNgnWxc.s:366    .text.SPI_EndRxTransaction:0000000000000000 SPI_EndRxTransaction
     /tmp/ccNgnWxc.s:476    .text.SPI_AbortRx_ISR:0000000000000000 $t
     /tmp/ccNgnWxc.s:482    .text.SPI_AbortRx_ISR:0000000000000000 SPI_AbortRx_ISR
     /tmp/ccNgnWxc.s:578    .text.SPI_AbortRx_ISR:0000000000000088 $d
     /tmp/ccNgnWxc.s:584    .text.SPI_AbortTx_ISR:0000000000000000 $t
     /tmp/ccNgnWxc.s:590    .text.SPI_AbortTx_ISR:0000000000000000 SPI_AbortTx_ISR
     /tmp/ccNgnWxc.s:684    .text.SPI_AbortTx_ISR:0000000000000084 $d
     /tmp/ccNgnWxc.s:690    .text.HAL_SPI_MspInit:0000000000000000 $t
     /tmp/ccNgnWxc.s:697    .text.HAL_SPI_MspInit:0000000000000000 HAL_SPI_MspInit
     /tmp/ccNgnWxc.s:711    .text.HAL_SPI_Init:0000000000000000 $t
     /tmp/ccNgnWxc.s:718    .text.HAL_SPI_Init:0000000000000000 HAL_SPI_Init
     /tmp/ccNgnWxc.s:874    .text.HAL_SPI_MspDeInit:0000000000000000 $t
     /tmp/ccNgnWxc.s:881    .text.HAL_SPI_MspDeInit:0000000000000000 HAL_SPI_MspDeInit
     /tmp/ccNgnWxc.s:895    .text.HAL_SPI_DeInit:0000000000000000 $t
     /tmp/ccNgnWxc.s:902    .text.HAL_SPI_DeInit:0000000000000000 HAL_SPI_DeInit
     /tmp/ccNgnWxc.s:953    .text.HAL_SPI_Transmit:0000000000000000 $t
     /tmp/ccNgnWxc.s:960    .text.HAL_SPI_Transmit:0000000000000000 HAL_SPI_Transmit
     /tmp/ccNgnWxc.s:1333   .text.HAL_SPI_TransmitReceive:0000000000000000 $t
     /tmp/ccNgnWxc.s:1340   .text.HAL_SPI_TransmitReceive:0000000000000000 HAL_SPI_TransmitReceive
     /tmp/ccNgnWxc.s:2036   .text.HAL_SPI_Receive:0000000000000000 $t
     /tmp/ccNgnWxc.s:2043   .text.HAL_SPI_Receive:0000000000000000 HAL_SPI_Receive
     /tmp/ccNgnWxc.s:2480   .text.HAL_SPI_Transmit_IT:0000000000000000 $t
     /tmp/ccNgnWxc.s:2487   .text.HAL_SPI_Transmit_IT:0000000000000000 HAL_SPI_Transmit_IT
     /tmp/ccNgnWxc.s:2631   .text.HAL_SPI_Transmit_IT:00000000000000bc $d
     /tmp/ccNgnWxc.s:4744   .text.SPI_TxISR_16BIT:0000000000000000 SPI_TxISR_16BIT
     /tmp/ccNgnWxc.s:4687   .text.SPI_TxISR_8BIT:0000000000000000 SPI_TxISR_8BIT
     /tmp/ccNgnWxc.s:2637   .text.HAL_SPI_TransmitReceive_IT:0000000000000000 $t
     /tmp/ccNgnWxc.s:2644   .text.HAL_SPI_TransmitReceive_IT:0000000000000000 HAL_SPI_TransmitReceive_IT
     /tmp/ccNgnWxc.s:2886   .text.HAL_SPI_TransmitReceive_IT:0000000000000124 $d
     /tmp/ccNgnWxc.s:5594   .text.SPI_2linesRxISR_16BIT:0000000000000000 SPI_2linesRxISR_16BIT
     /tmp/ccNgnWxc.s:5518   .text.SPI_2linesTxISR_16BIT:0000000000000000 SPI_2linesTxISR_16BIT
     /tmp/ccNgnWxc.s:5342   .text.SPI_2linesRxISR_8BIT:0000000000000000 SPI_2linesRxISR_8BIT
     /tmp/ccNgnWxc.s:5246   .text.SPI_2linesTxISR_8BIT:0000000000000000 SPI_2linesTxISR_8BIT
     /tmp/ccNgnWxc.s:2894   .text.HAL_SPI_Receive_IT:0000000000000000 $t
     /tmp/ccNgnWxc.s:2901   .text.HAL_SPI_Receive_IT:0000000000000000 HAL_SPI_Receive_IT
     /tmp/ccNgnWxc.s:3101   .text.HAL_SPI_Receive_IT:000000000000010c $d
     /tmp/ccNgnWxc.s:5017   .text.SPI_RxISR_16BIT:0000000000000000 SPI_RxISR_16BIT
     /tmp/ccNgnWxc.s:4883   .text.SPI_RxISR_8BIT:0000000000000000 SPI_RxISR_8BIT
     /tmp/ccNgnWxc.s:3107   .text.HAL_SPI_Transmit_DMA:0000000000000000 $t
     /tmp/ccNgnWxc.s:3114   .text.HAL_SPI_Transmit_DMA:0000000000000000 HAL_SPI_Transmit_DMA
     /tmp/ccNgnWxc.s:3327   .text.HAL_SPI_Transmit_DMA:0000000000000128 $d
     /tmp/ccNgnWxc.s:4445   .text.SPI_DMAHalfTransmitCplt:0000000000000000 SPI_DMAHalfTransmitCplt
     /tmp/ccNgnWxc.s:5756   .text.SPI_DMATransmitCplt:0000000000000000 SPI_DMATransmitCplt
     /tmp/ccNgnWxc.s:5714   .text.SPI_DMAError:0000000000000000 SPI_DMAError
     /tmp/ccNgnWxc.s:3334   .text.HAL_SPI_TransmitReceive_DMA:0000000000000000 $t
     /tmp/ccNgnWxc.s:3341   .text.HAL_SPI_TransmitReceive_DMA:0000000000000000 HAL_SPI_TransmitReceive_DMA
     /tmp/ccNgnWxc.s:3674   .text.HAL_SPI_TransmitReceive_DMA:00000000000001ec $d
     /tmp/ccNgnWxc.s:4547   .text.SPI_DMAHalfTransmitReceiveCplt:0000000000000000 SPI_DMAHalfTransmitReceiveCplt
ARM GAS  /tmp/ccNgnWxc.s 			page 213


     /tmp/ccNgnWxc.s:6040   .text.SPI_DMATransmitReceiveCplt:0000000000000000 SPI_DMATransmitReceiveCplt
     /tmp/ccNgnWxc.s:4496   .text.SPI_DMAHalfReceiveCplt:0000000000000000 SPI_DMAHalfReceiveCplt
     /tmp/ccNgnWxc.s:5863   .text.SPI_DMAReceiveCplt:0000000000000000 SPI_DMAReceiveCplt
     /tmp/ccNgnWxc.s:3683   .text.HAL_SPI_Receive_DMA:0000000000000000 $t
     /tmp/ccNgnWxc.s:3690   .text.HAL_SPI_Receive_DMA:0000000000000000 HAL_SPI_Receive_DMA
     /tmp/ccNgnWxc.s:3929   .text.HAL_SPI_Receive_DMA:000000000000016c $d
     /tmp/ccNgnWxc.s:3936   .text.HAL_SPI_Abort:0000000000000000 $t
     /tmp/ccNgnWxc.s:3943   .text.HAL_SPI_Abort:0000000000000000 HAL_SPI_Abort
     /tmp/ccNgnWxc.s:4207   .text.HAL_SPI_Abort:000000000000017c $d
     /tmp/ccNgnWxc.s:4215   .text.HAL_SPI_DMAPause:0000000000000000 $t
     /tmp/ccNgnWxc.s:4222   .text.HAL_SPI_DMAPause:0000000000000000 HAL_SPI_DMAPause
     /tmp/ccNgnWxc.s:4260   .text.HAL_SPI_DMAResume:0000000000000000 $t
     /tmp/ccNgnWxc.s:4267   .text.HAL_SPI_DMAResume:0000000000000000 HAL_SPI_DMAResume
     /tmp/ccNgnWxc.s:4305   .text.HAL_SPI_DMAStop:0000000000000000 $t
     /tmp/ccNgnWxc.s:4312   .text.HAL_SPI_DMAStop:0000000000000000 HAL_SPI_DMAStop
     /tmp/ccNgnWxc.s:4355   .text.HAL_SPI_TxCpltCallback:0000000000000000 $t
     /tmp/ccNgnWxc.s:4362   .text.HAL_SPI_TxCpltCallback:0000000000000000 HAL_SPI_TxCpltCallback
     /tmp/ccNgnWxc.s:4376   .text.HAL_SPI_RxCpltCallback:0000000000000000 $t
     /tmp/ccNgnWxc.s:4383   .text.HAL_SPI_RxCpltCallback:0000000000000000 HAL_SPI_RxCpltCallback
     /tmp/ccNgnWxc.s:4397   .text.HAL_SPI_TxRxCpltCallback:0000000000000000 $t
     /tmp/ccNgnWxc.s:4404   .text.HAL_SPI_TxRxCpltCallback:0000000000000000 HAL_SPI_TxRxCpltCallback
     /tmp/ccNgnWxc.s:4418   .text.HAL_SPI_TxHalfCpltCallback:0000000000000000 $t
     /tmp/ccNgnWxc.s:4425   .text.HAL_SPI_TxHalfCpltCallback:0000000000000000 HAL_SPI_TxHalfCpltCallback
     /tmp/ccNgnWxc.s:4439   .text.SPI_DMAHalfTransmitCplt:0000000000000000 $t
     /tmp/ccNgnWxc.s:4469   .text.HAL_SPI_RxHalfCpltCallback:0000000000000000 $t
     /tmp/ccNgnWxc.s:4476   .text.HAL_SPI_RxHalfCpltCallback:0000000000000000 HAL_SPI_RxHalfCpltCallback
     /tmp/ccNgnWxc.s:4490   .text.SPI_DMAHalfReceiveCplt:0000000000000000 $t
     /tmp/ccNgnWxc.s:4520   .text.HAL_SPI_TxRxHalfCpltCallback:0000000000000000 $t
     /tmp/ccNgnWxc.s:4527   .text.HAL_SPI_TxRxHalfCpltCallback:0000000000000000 HAL_SPI_TxRxHalfCpltCallback
     /tmp/ccNgnWxc.s:4541   .text.SPI_DMAHalfTransmitReceiveCplt:0000000000000000 $t
     /tmp/ccNgnWxc.s:4571   .text.HAL_SPI_ErrorCallback:0000000000000000 $t
     /tmp/ccNgnWxc.s:4578   .text.HAL_SPI_ErrorCallback:0000000000000000 HAL_SPI_ErrorCallback
     /tmp/ccNgnWxc.s:4592   .text.SPI_CloseTx_ISR:0000000000000000 $t
     /tmp/ccNgnWxc.s:4598   .text.SPI_CloseTx_ISR:0000000000000000 SPI_CloseTx_ISR
     /tmp/ccNgnWxc.s:4681   .text.SPI_TxISR_8BIT:0000000000000000 $t
     /tmp/ccNgnWxc.s:4738   .text.SPI_TxISR_16BIT:0000000000000000 $t
     /tmp/ccNgnWxc.s:4797   .text.SPI_CloseRx_ISR:0000000000000000 $t
     /tmp/ccNgnWxc.s:4803   .text.SPI_CloseRx_ISR:0000000000000000 SPI_CloseRx_ISR
     /tmp/ccNgnWxc.s:4877   .text.SPI_RxISR_8BIT:0000000000000000 $t
     /tmp/ccNgnWxc.s:4948   .text.SPI_RxISR_8BIT:0000000000000054 $d
     /tmp/ccNgnWxc.s:4959   .text.SPI_RxISR_8BITCRC:0000000000000000 SPI_RxISR_8BITCRC
     /tmp/ccNgnWxc.s:4953   .text.SPI_RxISR_8BITCRC:0000000000000000 $t
     /tmp/ccNgnWxc.s:5011   .text.SPI_RxISR_16BIT:0000000000000000 $t
     /tmp/ccNgnWxc.s:5084   .text.SPI_RxISR_16BIT:0000000000000058 $d
     /tmp/ccNgnWxc.s:5095   .text.SPI_RxISR_16BITCRC:0000000000000000 SPI_RxISR_16BITCRC
     /tmp/ccNgnWxc.s:5089   .text.SPI_RxISR_16BITCRC:0000000000000000 $t
     /tmp/ccNgnWxc.s:5136   .text.SPI_CloseRxTx_ISR:0000000000000000 $t
     /tmp/ccNgnWxc.s:5142   .text.SPI_CloseRxTx_ISR:0000000000000000 SPI_CloseRxTx_ISR
     /tmp/ccNgnWxc.s:5240   .text.SPI_2linesTxISR_8BIT:0000000000000000 $t
     /tmp/ccNgnWxc.s:5336   .text.SPI_2linesRxISR_8BIT:0000000000000000 $t
     /tmp/ccNgnWxc.s:5441   .text.SPI_2linesRxISR_8BIT:0000000000000090 $d
     /tmp/ccNgnWxc.s:5452   .text.SPI_2linesRxISR_8BITCRC:0000000000000000 SPI_2linesRxISR_8BITCRC
     /tmp/ccNgnWxc.s:5446   .text.SPI_2linesRxISR_8BITCRC:0000000000000000 $t
     /tmp/ccNgnWxc.s:5512   .text.SPI_2linesTxISR_16BIT:0000000000000000 $t
     /tmp/ccNgnWxc.s:5588   .text.SPI_2linesRxISR_16BIT:0000000000000000 $t
     /tmp/ccNgnWxc.s:5656   .text.SPI_2linesRxISR_16BIT:000000000000004c $d
     /tmp/ccNgnWxc.s:5667   .text.SPI_2linesRxISR_16BITCRC:0000000000000000 SPI_2linesRxISR_16BITCRC
ARM GAS  /tmp/ccNgnWxc.s 			page 214


     /tmp/ccNgnWxc.s:5661   .text.SPI_2linesRxISR_16BITCRC:0000000000000000 $t
     /tmp/ccNgnWxc.s:5708   .text.SPI_DMAError:0000000000000000 $t
     /tmp/ccNgnWxc.s:5750   .text.SPI_DMATransmitCplt:0000000000000000 $t
     /tmp/ccNgnWxc.s:5857   .text.SPI_DMAReceiveCplt:0000000000000000 $t
     /tmp/ccNgnWxc.s:6034   .text.SPI_DMATransmitReceiveCplt:0000000000000000 $t
     /tmp/ccNgnWxc.s:6211   .text.HAL_SPI_IRQHandler:0000000000000000 $t
     /tmp/ccNgnWxc.s:6218   .text.HAL_SPI_IRQHandler:0000000000000000 HAL_SPI_IRQHandler
     /tmp/ccNgnWxc.s:6420   .text.HAL_SPI_IRQHandler:0000000000000104 $d
     /tmp/ccNgnWxc.s:6431   .text.SPI_DMAAbortOnError:0000000000000000 SPI_DMAAbortOnError
     /tmp/ccNgnWxc.s:6425   .text.SPI_DMAAbortOnError:0000000000000000 $t
     /tmp/ccNgnWxc.s:6460   .text.HAL_SPI_AbortCpltCallback:0000000000000000 $t
     /tmp/ccNgnWxc.s:6467   .text.HAL_SPI_AbortCpltCallback:0000000000000000 HAL_SPI_AbortCpltCallback
     /tmp/ccNgnWxc.s:6481   .text.HAL_SPI_Abort_IT:0000000000000000 $t
     /tmp/ccNgnWxc.s:6488   .text.HAL_SPI_Abort_IT:0000000000000000 HAL_SPI_Abort_IT
     /tmp/ccNgnWxc.s:6803   .text.HAL_SPI_Abort_IT:000000000000018c $d
     /tmp/ccNgnWxc.s:6944   .text.SPI_DMATxAbortCallback:0000000000000000 SPI_DMATxAbortCallback
     /tmp/ccNgnWxc.s:6819   .text.SPI_DMARxAbortCallback:0000000000000000 SPI_DMARxAbortCallback
     /tmp/ccNgnWxc.s:6813   .text.SPI_DMARxAbortCallback:0000000000000000 $t
     /tmp/ccNgnWxc.s:6938   .text.SPI_DMATxAbortCallback:0000000000000000 $t
     /tmp/ccNgnWxc.s:7060   .text.HAL_SPI_GetState:0000000000000000 $t
     /tmp/ccNgnWxc.s:7067   .text.HAL_SPI_GetState:0000000000000000 HAL_SPI_GetState
     /tmp/ccNgnWxc.s:7084   .text.HAL_SPI_GetError:0000000000000000 $t
     /tmp/ccNgnWxc.s:7091   .text.HAL_SPI_GetError:0000000000000000 HAL_SPI_GetError

UNDEFINED SYMBOLS
HAL_GetTick
SystemCoreClock
HAL_DMA_Start_IT
HAL_DMA_Abort
HAL_DMA_Abort_IT
